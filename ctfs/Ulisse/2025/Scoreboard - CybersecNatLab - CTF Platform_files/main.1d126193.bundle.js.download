(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[792],{1144:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23fff%27%3e%3cpath d=%27M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e"},1533:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var s=t(1601),r=t.n(s),a=t(6314),i=t.n(a)()(r());i.push([e.id,".rbt .rbt-input-main::-ms-clear {\n  display: none;\n}\n\n/**\n * Menu\n */\n.rbt-menu {\n  margin-bottom: 2px;\n}\n.rbt-menu > .dropdown-item {\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.rbt-menu > .dropdown-item:focus {\n  outline: none;\n}\n.rbt-menu-pagination-option {\n  text-align: center;\n}\n\n/**\n * Multi-select Input\n */\n.rbt-input-multi {\n  cursor: text;\n  overflow: hidden;\n  position: relative;\n}\n.rbt-input-multi.focus {\n  border-color: #80bdff;\n  box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  outline: 0;\n}\n.rbt-input-multi.form-control {\n  height: auto;\n}\n.rbt-input-multi.disabled {\n  background-color: #e9ecef;\n  opacity: 1;\n}\n.rbt-input-multi.is-invalid.focus {\n  border-color: #dc3545;\n  box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25);\n}\n.rbt-input-multi.is-valid.focus {\n  border-color: #28a745;\n  box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.25);\n}\n.rbt-input-multi .rbt-input-wrapper {\n  align-items: flex-start;\n  display: flex;\n  flex-wrap: wrap;\n  margin-bottom: -1px;\n  margin-top: -1px;\n  overflow: hidden;\n}\n.rbt-input-multi .rbt-input-main {\n  margin: 1px 0 4px;\n}\n\n/**\n * Close Button\n */\n.rbt-close {\n  z-index: 1;\n  color: inherit;\n}\n.rbt-close-lg {\n  font-size: 1.5rem;\n}\n\n/**\n * Token\n */\n.rbt-token {\n  border: 0;\n  border-radius: 0.25rem;\n  color: inherit;\n  border: solid 1px rgba(255 255 255 / .2);\n  display: inline-flex;\n  line-height: 1rem;\n  margin: 1px 3px 2px 0;\n}\n.rbt-token .rbt-token-label {\n  padding: 0.25rem 0.5rem;\n}\n.rbt-token .rbt-token-label:not(:last-child) {\n  padding-right: 0.25rem;\n}\n.rbt-token-disabled {\n  background-color: rgba(0, 0, 0, 0.1);\n  color: #495057;\n  pointer-events: none;\n}\n.rbt-token-removeable {\n  cursor: pointer;\n}\n.rbt-token .rbt-token-remove-button {\n  background-image: none;\n  border-bottom-left-radius: 0;\n  border-top-left-radius: 0;\n  box-shadow: none;\n  color: inherit;\n  display: flex;\n  justify-content: center;\n  font-size: inherit;\n  font-weight: normal;\n  opacity: 1;\n  outline: none;\n  padding: 0.25rem 0.5rem;\n  padding-left: 0;\n  text-shadow: none;\n}\n.rbt-token .rbt-token-remove-button .rbt-close-content {\n  display: block;\n  color: black;\n}\n\n/**\n * Loader + CloseButton container\n */\n.rbt-aux {\n  align-items: center;\n  display: flex;\n  bottom: 0;\n  justify-content: center;\n  pointer-events: none;\n  /* Don't block clicks on the input */\n  position: absolute;\n  right: 0;\n  top: 0;\n  width: 2rem;\n}\n.rbt-aux-lg {\n  width: 3rem;\n}\n.rbt-aux .rbt-close {\n  margin-top: -0.25rem;\n  pointer-events: auto;\n  /* Override pointer-events: none; above */\n}\n\n.has-aux .form-control {\n  padding-right: 2rem;\n}\n.has-aux .form-control.is-valid, .has-aux .form-control.is-invalid {\n  background-position: right 2rem center;\n  padding-right: 4rem;\n}\n\n.rbt-highlight-text {\n  background-color: inherit;\n  color: inherit;\n  font-weight: bold;\n  padding: 0;\n}\n\n/**\n * Input Groups\n */\n.input-group > .rbt {\n  flex: 1;\n}\n.rbt-input-hint {\n  color: inherit !important;\n  opacity: .4;\n}\n.input-group > .rbt .rbt-input-hint, .input-group > .rbt .rbt-aux {\n  z-index: 5;\n}\n.input-group > .rbt:not(:first-child) .form-control {\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.input-group > .rbt:not(:last-child) .form-control {\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n}",""]);const c=i},1825:(e,n,t)=>{var s={"./nb":2274,"./nb.js":2274};function r(e){var n=a(e);return t(n)}function a(e){if(!t.o(s,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return s[e]}r.keys=function(){return Object.keys(s)},r.resolve=a,e.exports=r,r.id=1825},1985:(e,n,t)=>{"use strict";var s=t(5338),r=t(6540),a=t(545),i=t(5458),c=t(7767),l=t(4976),o=t(3747),d=t(5606);const u=t.p+"static/img/cybersecnatlab.svg";var h=t(3304),x=t(3375),m=t(369),f=t(3875);const p=()=>r.createElement(r.Fragment,null,r.createElement("div",{className:"bg-blue text-white py-5"},r.createElement(h.A,null,r.createElement(x.A,{className:"justify-content-center align-items-center text-center"},r.createElement(m.A,{xs:6,md:4,lg:3},r.createElement("a",{className:"pointer a-white",href:"https://cybersecnatlab.it/",target:"_blank",rel:"noopener noreferrer"},r.createElement("img",{className:"w-100 p-3",src:u,alt:"Logo CybersecNatLab"})))),r.createElement(x.A,{className:"justify-content-center align-items-center"},r.createElement(m.A,{xs:12,lg:8,className:"mt-3"},r.createElement("small",null,r.createElement("span",null,"@ 2017 - 2024 Cybersecurity National Lab | All rights reserved | "),r.createElement("a",{className:"pointer a-white",href:"/privacy-policy"},"Privacy Policy"),r.createElement("span",null," | "),r.createElement("a",{className:"pointer a-white",href:"/cookie-policy"},"Cookie Policy"))),r.createElement(m.A,{xs:12,lg:4,className:"mt-3"},r.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"mailto:info@cybersecnatlab.it",className:"me-2"},r.createElement(o.g,{fixedWidth:!0,icon:d.y_8,size:"2x",className:"svg-white"})),r.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://twitter.com/CybersecNatLab",className:"mx-2"},r.createElement(o.g,{fixedWidth:!0,icon:f.HQ1,size:"2x",className:"svg-white"})),r.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.facebook.com/cybersecnatlab/",className:"mx-2"},r.createElement(o.g,{fixedWidth:!0,icon:f.aUl,size:"2x",className:"svg-white"})),r.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.linkedin.com/company/cybersecnatlab/",className:"mx-2"},r.createElement(o.g,{fixedWidth:!0,icon:f.IAJ,size:"2x",className:"svg-white"})),r.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.instagram.com/cybersecnatlab/",className:"ms-2"},r.createElement(o.g,{fixedWidth:!0,icon:f.QV6,size:"2x",className:"svg-white"}))))))),g="CybersecNatLab - CTF Platform",j=()=>r.createElement("img",{src:u,className:"svg-white",height:"52",alt:"Logo"}),v=({genLink:e,genReplace:n,isCurrent:t,scoreboardVisible:s,user:a})=>{const i=(0,r.useCallback)((e=>t(e)?"p-2 nav-link active":"p-2 nav-link"),[t]);return r.createElement(r.Fragment,null,r.createElement(l.N_,{to:"/",className:i("/"),replace:n("/","/")},r.createElement(o.g,{fixedWidth:!0,icon:d.v02})," Home"),s&&r.createElement(l.N_,{to:a.publicScoreboard?"/scoreboard":e("/scoreboard"),className:i("/scoreboard"),replace:n("/scoreboard",a.publicScoreboard?"/scoreboard":void 0)},r.createElement(o.g,{fixedWidth:!0,icon:d.Tsj})," Scoreboard"),r.createElement(l.N_,{to:e("/challenges"),className:i("/challenges"),replace:n("/challenges")},r.createElement(o.g,{fixedWidth:!0,icon:d.s6x})," Challenges"))};var A=t(467),b=t(296),y=t(4756),N=t.n(y),w=t(9417),k=t(5501),C=t(9426),S=t(3437),W=t(9379),I=t(4765),E=t(3029),M=t(2901),L=t(6596),R=t(6589),F=function(e){return e.NORMAL="NORMAL",e.AUTH="AUTH",e.DYNAMIC="DYNAMIC",e}({}),T=function(e){return e.SOLVE="SOLVE",e.FIRST_BLOOD="FIRST_BLOOD",e.COMPETITION_START="COMPETITION_START",e.COMPETITION_END="COMPETITION_END",e.COMPETITION_FREEZE="COMPETITION_FREEZE",e.SECTION_FULL_SOLVE="SECTION_FULL_SOLVE",e.GLOBAL_FULL_SOLVE="GLOBAL_FULL_SOLVE",e.OVERTAKE="OVERTAKE",e}({}),Y=function(e){return e.GENERIC="GENERIC",e.DISCORD="DISCORD",e.DISCORD_EMBED="DISCORD_EMBED",e}({}),D=function(){function e(){(0,E.A)(this,e),this.client=L.Ay,this.token=void 0,this.token=localStorage.getItem("token"),this.updateHeaders()}var n,t,s,r,a,i,c,l,o,d,u,h,x,m,f,p,g,j,v,b,y,w,k,C,S,F,T,Y,D,P,z,_,U,G,H,B,q,V,Q,K,Z,$,X,J,ee,ne,te,se,re,ae,ie,ce,le,oe,de,ue,he,xe,me,fe,pe,ge,je,ve,Ae,be,ye,Ne,we,ke,Ce,Se,We,Ie,Ee,Me,Le;return(0,M.A)(e,[{key:"updateHeaders",value:function(){var e={};this.token&&(e.Authorization="Token ".concat(this.token)),e["X-Version"]="v2.9",this.client=L.Ay.extend({headers:e})}},{key:"buildError",value:(Le=(0,A.A)(N().mark((function e(n){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n instanceof R.H)){e.next=18;break}return e.prev=1,e.next=4,n.response.json();case 4:t=e.sent,e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),new O({code:"CLIENT_ERROR",message:e.t0.toString()});case 10:if("VERSION_MISMATCH"!==t.code){e.next=15;break}window.alert("The page is going to be reloaded in order to update your client, your last actions will be lost."),window.location.reload(),e.next=16;break;case 15:throw new O(t);case 16:e.next=19;break;case 18:throw new O({code:"CLIENT_ERROR",message:n.toString()});case 19:case"end":return e.stop()}}),e,null,[[1,7]])}))),function(e){return Le.apply(this,arguments)})},{key:"get",value:(Me=(0,A.A)(N().mark((function e(n,t){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.client.get("/api".concat(n),{searchParams:t,timeout:1e4,retry:0}).json();case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.next=10,this.buildError(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(e,n){return Me.apply(this,arguments)})},{key:"post",value:(Ee=(0,A.A)(N().mark((function e(n,t){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.client.post("/api".concat(n),{json:t,timeout:1e4,retry:0}).json();case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.next=10,this.buildError(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(e,n){return Ee.apply(this,arguments)})},{key:"put",value:(Ie=(0,A.A)(N().mark((function e(n,t){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.client.put("/api".concat(n),{json:t,timeout:1e4,retry:0}).json();case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.next=10,this.buildError(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(e,n){return Ie.apply(this,arguments)})},{key:"delete",value:(We=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.client.delete("/api".concat(n),{timeout:1e4,retry:0}).json();case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.next=10,this.buildError(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(e){return We.apply(this,arguments)})},{key:"currentUser",value:(Se=(0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/currentUser");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return Se.apply(this,arguments)})},{key:"login",value:(Ce=(0,A.A)(N().mark((function e(n,t){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/login",{email:n,password:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e,n){return Ce.apply(this,arguments)})},{key:"signup",value:(ke=(0,A.A)(N().mark((function e(n,t,s){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/signup",{email:n,token:t,captchaToken:s});case 2:case"end":return e.stop()}}),e,this)}))),function(e,n,t){return ke.apply(this,arguments)})},{key:"getSignupConfig",value:(we=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/signup/config",{token:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return we.apply(this,arguments)})},{key:"completeSignup",value:(Ne=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/signup/complete",n);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return Ne.apply(this,arguments)})},{key:"recoverPassword",value:(ye=(0,A.A)(N().mark((function e(n,t){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/recoverPassword",{email:n,captchaToken:t});case 2:case"end":return e.stop()}}),e,this)}))),function(e,n){return ye.apply(this,arguments)})},{key:"completeRecoverPassword",value:(be=(0,A.A)(N().mark((function e(n,t){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/recoverPassword/complete",{token:n,password:t});case 2:case"end":return e.stop()}}),e,this)}))),function(e,n){return be.apply(this,arguments)})},{key:"enroll",value:(Ae=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/enroll",{token:n});case 2:case"end":return e.stop()}}),e,this)}))),function(e){return Ae.apply(this,arguments)})},{key:"logout",value:(ve=(0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/logout");case 2:case"end":return e.stop()}}),e,this)}))),function(){return ve.apply(this,arguments)})},{key:"getFiles",value:(je=(0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/admin/files");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return je.apply(this,arguments)})},{key:"changeFileType",value:(ge=(0,A.A)(N().mark((function e(n,t){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/admin/file/".concat(n,"/type"),{type:t});case 2:case"end":return e.stop()}}),e,this)}))),function(e,n){return ge.apply(this,arguments)})},{key:"deleteFile",value:(pe=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.delete("/admin/file/"+n);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return pe.apply(this,arguments)})},{key:"uploadFiles",value:(fe=(0,A.A)(N().mark((function e(n,t){var s,r,a,i;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=new FormData,r=(0,I.A)(t);try{for(r.s();!(a=r.n()).done;)i=a.value,s.append(i.name,i)}catch(e){r.e(e)}finally{r.f()}return e.prev=3,e.next=6,this.client.post("/api/admin/files?type=".concat(n),{body:s,timeout:!1,retry:0}).json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(3),e.next=13,this.buildError(e.t0);case 13:case"end":return e.stop()}}),e,this,[[3,9]])}))),function(e,n){return fe.apply(this,arguments)})},{key:"deleteUser",value:(me=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.delete("/admin/users/"+n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return me.apply(this,arguments)})},{key:"upsertAdminUser",value:(xe=(0,A.A)(N().mark((function e(n,t){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/admin/users/".concat(n),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e,n){return xe.apply(this,arguments)})},{key:"getChallenges",value:(he=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/challenges",{noFreeze:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return he.apply(this,arguments)})},{key:"getChallengeScoreboard",value:(ue=(0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/challenges/scoreboard");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return ue.apply(this,arguments)})},{key:"getChallenge",value:(de=(0,A.A)(N().mark((function e(n,t){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/challenges/".concat(n),{noFreeze:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e,n){return de.apply(this,arguments)})},{key:"getPlayerUnlocks",value:(oe=(0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/player/unlocks");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return oe.apply(this,arguments)})},{key:"unlockHint",value:(le=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/hint/".concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return le.apply(this,arguments)})},{key:"submitFlag",value:(ce=(0,A.A)(N().mark((function e(n,t){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/challenges/".concat(n,"/flag"),{flag:t});case 2:return e.abrupt("return",e.sent.valid);case 3:case"end":return e.stop()}}),e,this)}))),function(e,n){return ce.apply(this,arguments)})},{key:"getScoreboard",value:(ie=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/scoreboard",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return ie.apply(this,arguments)})},{key:"getScoreboardTable",value:(ae=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/scoreboard/table",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return ae.apply(this,arguments)})},{key:"getScoreboardChart",value:(re=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/scoreboard/chart",{noFreeze:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return re.apply(this,arguments)})},{key:"getAdminChallenges",value:(se=(0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/admin/challenges");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return se.apply(this,arguments)})},{key:"getAdminVisibilityLocks",value:(te=(0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/admin/challenges/locks");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return te.apply(this,arguments)})},{key:"setAdminVisibilityLocks",value:(ne=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/admin/challenges/locks",{locks:n});case 2:case"end":return e.stop()}}),e,this)}))),function(e){return ne.apply(this,arguments)})},{key:"getAdminChallenge",value:(ee=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/admin/challenges/"+n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return ee.apply(this,arguments)})},{key:"getAdminChallengeSolves",value:(J=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/admin/challenges/solves/"+n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return J.apply(this,arguments)})},{key:"upsertAdminChallenge",value:(X=(0,A.A)(N().mark((function e(n,t){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/admin/challenges/".concat(n),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e,n){return X.apply(this,arguments)})},{key:"upsertAdminAffiliation",value:($=(0,A.A)(N().mark((function e(n,t){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/admin/affiliations/".concat(n),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e,n){return $.apply(this,arguments)})},{key:"deleteAdminAffiliation",value:(Z=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.delete("/admin/affiliations/".concat(n));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return Z.apply(this,arguments)})},{key:"deleteChallenge",value:(K=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.delete("/admin/challenges/".concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return K.apply(this,arguments)})},{key:"getAdminWebhooks",value:(Q=(0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/admin/webhooks");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return Q.apply(this,arguments)})},{key:"getAdminWebhook",value:(V=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/admin/webhooks/".concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return V.apply(this,arguments)})},{key:"upsertAdminWebhook",value:(q=(0,A.A)(N().mark((function e(n,t){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/admin/webhooks/"+n,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e,n){return q.apply(this,arguments)})},{key:"deleteWebhook",value:(B=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.delete("/admin/webhooks/".concat(n));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return B.apply(this,arguments)})},{key:"testWebhook",value:(H=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/admin/webhooks/".concat(n,"/test"));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return H.apply(this,arguments)})},{key:"getPage",value:(G=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/pages/"+n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return G.apply(this,arguments)})},{key:"getWriteup",value:(U=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/writeups/".concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return U.apply(this,arguments)})},{key:"createWriteup",value:(_=(0,A.A)(N().mark((function e(n,t,s){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/writeups/new",{challengeId:n,title:t,content:s});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e,n,t){return _.apply(this,arguments)})},{key:"updateWriteup",value:(z=(0,A.A)(N().mark((function e(n,t,s){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/writeups/".concat(n),{title:t,content:s});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e,n,t){return z.apply(this,arguments)})},{key:"deleteWriteup",value:(P=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.delete("/writeups/".concat(n));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return P.apply(this,arguments)})},{key:"getAdminPage",value:(D=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/admin/pages/"+n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return D.apply(this,arguments)})},{key:"getPages",value:(Y=(0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/admin/pages");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return Y.apply(this,arguments)})},{key:"getStatistics",value:(T=(0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/admin/stats");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return T.apply(this,arguments)})},{key:"deletePage",value:(F=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.delete("/admin/pages/"+n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return F.apply(this,arguments)})},{key:"updatePage",value:(S=(0,A.A)(N().mark((function e(n,t){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.put("/admin/pages/".concat(n),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e,n){return S.apply(this,arguments)})},{key:"getAffiliation",value:(C=(0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/supervisor/affiliation");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return C.apply(this,arguments)})},{key:"updateAffiliation",value:(k=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/supervisor/affiliation",{customization:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return k.apply(this,arguments)})},{key:"generateAffiliationEnrollmentToken",value:(w=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/supervisor/enrollment/generate",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return w.apply(this,arguments)})},{key:"getAffiliationEvents",value:(y=(0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/supervisor/events");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"getPlayerPage",value:(b=(0,A.A)(N().mark((function e(n,t){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n){e.next=4;break}return e.next=3,this.get("/scoreboard/player");case 3:case 6:return e.abrupt("return",e.sent);case 4:return e.next=6,this.get("/scoreboard/player/".concat(n),{noFreeze:t});case 7:case"end":return e.stop()}}),e,this)}))),function(e,n){return b.apply(this,arguments)})},{key:"getScoreboardSearchParams",value:(v=(0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/scoreboard/search-params");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"getAdminUsers",value:(j=(0,A.A)(N().mark((function e(n,t,s){var r;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},void 0!==n&&(r.offset=n),void 0!==t&&(r.limit=t),s&&(r=(0,W.A)((0,W.A)({},r),s)),e.next=6,this.get("/admin/users",r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)}))),function(e,n,t){return j.apply(this,arguments)})},{key:"getAdminSubmissions",value:(g=(0,A.A)(N().mark((function e(n,t,s){var r;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},void 0!==n&&(r.offset=n),void 0!==t&&(r.limit=t),s&&(r=(0,W.A)((0,W.A)({},r),s)),e.next=6,this.get("/admin/submissions",r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)}))),function(e,n,t){return g.apply(this,arguments)})},{key:"getAdminHints",value:(p=(0,A.A)(N().mark((function e(n,t,s){var r;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},void 0!==n&&(r.offset=n),void 0!==t&&(r.limit=t),s&&(r=(0,W.A)((0,W.A)({},r),s)),e.next=6,this.get("/admin/hints",r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)}))),function(e,n,t){return p.apply(this,arguments)})},{key:"getAdminWriteups",value:(f=(0,A.A)(N().mark((function e(n,t,s){var r;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},void 0!==n&&(r.offset=n),void 0!==t&&(r.limit=t),s&&(r=(0,W.A)((0,W.A)({},r),s)),e.next=6,this.get("/admin/writeups",r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)}))),function(e,n,t){return f.apply(this,arguments)})},{key:"getAdminAffiliation",value:(m=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/admin/affiliations/".concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"getAdminAffiliations",value:(x=(0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/admin/affiliations");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return x.apply(this,arguments)})},{key:"upsertAdminEvent",value:(h=(0,A.A)(N().mark((function e(n,t,s){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/admin/events/".concat(n),{name:t,order:s});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e,n,t){return h.apply(this,arguments)})},{key:"deleteAdminEvent",value:(u=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.delete("/admin/events/".concat(n));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"createAdminEventSection",value:(d=(0,A.A)(N().mark((function e(n,t,s){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/admin/event/sections/new",{eventId:n,name:t,order:s});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e,n,t){return d.apply(this,arguments)})},{key:"updateAdminEventSection",value:(o=(0,A.A)(N().mark((function e(n,t,s){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/admin/event/sections/".concat(n),{name:t,order:s});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e,n,t){return o.apply(this,arguments)})},{key:"deleteAdminEventSection",value:(l=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.delete("/admin/event/sections/".concat(n));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"getAdminEvents",value:(c=(0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/admin/events");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"getAdminUser",value:(i=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/admin/users/".concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"updatePlayer",value:(a=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/player/update",n);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"getAdminConfigs",value:(r=(0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/admin/configs");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getAdminRegistrationConfigs",value:(s=(0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/admin/configs/registration");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"setAdminConfigs",value:(t=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/admin/configs",n);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"setAdminRegistrationConfigs",value:(n=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/admin/configs/registration",n);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})}]),e}();const P=new D;var O=function(e){(0,k.A)(t,e);var n=(0,C.A)(t);function t(e){var s;return(0,E.A)(this,t),(s=n.call(this,"HTTP Error `".concat(e.code,"`: ").concat(e.message))).code=void 0,s.message=void 0,Object.setPrototypeOf((0,w.A)(s),t.prototype),s.code=e.code,s.message=e.message,s}return(0,M.A)(t,[{key:"toString",value:function(){return"".concat(this.code,": ").concat(this.message)}}]),t}((0,S.A)(Error)),z=t(8032),_=t(5615),U=t(4848),G=r.createContext({displayError:function(e){}}),H=function(){return(0,r.useContext)(G).displayError};const B=function(e){var n=(0,r.useState)(""),t=(0,b.A)(n,2),s=t[0],a=t[1],i=(0,r.useState)(!1),l=(0,b.A)(i,2),o=l[0],d=l[1],u=(0,c.zy)();return(0,r.useEffect)((function(){a("")}),[u]),(0,U.jsxs)(G.Provider,{value:{displayError:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&console.error(e),a(e),d(n)}},children:[(0,U.jsxs)(z.A,{show:!!s,onHide:function(){o&&a("")},centered:!0,children:[(0,U.jsx)(z.A.Header,{closeButton:o,children:(0,U.jsx)(z.A.Title,{className:"text-center",children:"Error"})}),(0,U.jsx)(z.A.Body,{children:s}),o&&(0,U.jsx)(z.A.Footer,{children:(0,U.jsx)(_.A,{variant:"primary",onClick:function(){return a("")},children:"Close"})})]}),e.children]})};var q=r.createContext({user:void 0,setSession:function(e){}});const V=function(e){var n=H(),t=(0,r.useState)(void 0),s=(0,b.A)(t,2),a=s[0],i=s[1],c=(0,r.useCallback)(function(){var e=(0,A.A)(N().mark((function e(t){var s;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P.token=t,P.updateHeaders(),null!==t){e.next=11;break}return localStorage.removeItem("token"),e.t0=i,e.next=7,P.currentUser();case 7:e.t1=e.sent,(0,e.t0)(e.t1),e.next=23;break;case 11:return e.prev=11,localStorage.setItem("token",t),e.next=15,P.currentUser();case 15:(s=e.sent).logged||(localStorage.removeItem("token"),P.token=null,P.updateHeaders()),i(s),e.next=23;break;case 20:e.prev=20,e.t2=e.catch(11),n(e.t2.toString(),!1);case 23:case"end":return e.stop()}}),e,null,[[11,20]])})));return function(n){return e.apply(this,arguments)}}(),[n]);return(0,r.useEffect)((function(){var e=localStorage.getItem("token");c(e)}),[c]),(0,U.jsx)(q.Provider,{value:{user:a,setSession:c},children:e.children})};var Q=t(9716),K=t(7660),Z=t(5962),$=t(2630),X=t(6784),J=t(5531),ee={light:"☀️",dark:"🌙",auto:"⚙️"},ne=function(){var e=localStorage.getItem("colorMode");return"light"===e||"dark"===e||"auto"===e?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"},te=function(){switch(ne()){case"dark":return"dark";case"light":return"light";case"auto":return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}};const se=function(e){var n=(0,r.useState)(ne()),t=(0,b.A)(n,2),s=t[0],a=t[1];return(0,r.useEffect)((function(){var e;"auto"===(e=s)&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.setAttribute("data-bs-theme","dark"):document.documentElement.setAttribute("data-bs-theme",e),localStorage.setItem("colorMode",s)}),[s]),(0,U.jsx)(J.A,(0,W.A)((0,W.A)({},e),{},{title:(0,U.jsxs)(U.Fragment,{children:[ee[s]," "]}),drop:e.drop,children:Object.entries(ee).map((function(e){var n=(0,b.A)(e,2),t=n[0],r=n[1];return(0,U.jsxs)(J.A.Item,{className:"text-capitalize "+(s===t?"active":""),onClick:function(){return a(t)},children:[r," ",t," ",s===t&&(0,U.jsx)(X.g,{icon:$.e68,className:"ms-1",size:"sm"})]},t)}))}))};var re=t(3510);const ae=function(){return(0,U.jsx)("div",{className:"loading-spinner",children:(0,U.jsx)("svg",{viewBox:"25 25 50 50",children:(0,U.jsx)("circle",{cx:"50",cy:"50",r:"20",fill:"none",strokeWidth:"2",strokeMiterlimit:"10"})})})},ie=function(e){var n=e.children,t=e.active,s=(0,r.useRef)(null);return(0,U.jsxs)("div",{className:"position-relative flex-grow-1",children:[(0,U.jsx)(re.A,{in:t,timeout:300,unmountOnExit:!0,nodeRef:s,children:function(e){return(0,U.jsx)("div",{ref:s,className:"entering"===e||"entered"===e?"loading-container loading-container-entering":"loading-container",children:(0,U.jsxs)("div",{className:"m-auto",children:[(0,U.jsx)(ae,{}),"Loading ..."]})})}}),n]})};var ce=t(5072),le=t.n(ce),oe=t(7825),de=t.n(oe),ue=t(7659),he=t.n(ue),xe=t(5056),me=t.n(xe),fe=t(540),pe=t.n(fe),ge=t(1113),je=t.n(ge),ve=t(3544),Ae={};Ae.styleTagTransform=je(),Ae.setAttributes=me(),Ae.insert=he().bind(null,"head"),Ae.domAPI=de(),Ae.insertStyleElement=pe(),le()(ve.A,Ae),ve.A&&ve.A.locals&&ve.A.locals;var be=r.createContext({setLoading:function(e){}}),ye=function(){return(0,r.useContext)(be).setLoading};const Ne=function(e){var n=(0,r.useState)(!1),t=(0,b.A)(n,2),s=t[0],a=t[1];return(0,U.jsx)(be.Provider,{value:{setLoading:a},children:(0,U.jsx)(ie,{active:s,children:e.children})})};var we=t(1041),ke=t(7452),Ce=r.createContext({displayToast:function(e,n,t){}});const Se=function(e){var n=e.children,t=(0,r.useState)([]),s=(0,b.A)(t,2),a=s[0],c=s[1],l=(0,r.useCallback)((function(e,n,t){c([].concat((0,i.A)(a),[{id:Date.now(),title:e,message:n,variant:t}]))}),[a]),o=(0,r.useCallback)((function(e){var n=a.findIndex((function(n){return n.id===e}));if(-1!==n){var t=a.slice();t.splice(n,1),c(t)}}),[a]);return(0,U.jsxs)(Ce.Provider,{value:{displayToast:l},children:[(0,U.jsx)(we.A,{position:"bottom-end",className:"position-fixed p-3",children:a.map((function(e){return(0,U.jsxs)(ke.A,{onClose:function(){return o(e.id)},show:!0,delay:5e3,autohide:!0,animation:!0,bg:e.variant,children:[(0,U.jsx)(ke.A.Header,{children:(0,U.jsx)("strong",{className:"me-auto",children:e.title})}),(0,U.jsx)(ke.A.Body,{className:"light"===e.variant||"white"===e.variant?"text-dark":"text-light",children:e.message})]},e.id)}))}),n]})};function We(e,n,t){var s=(0,r.useRef)(H()),a=(0,r.useRef)(ye()),i=(0,r.useContext)(Ce).displayToast,c=(0,r.useContext)(q).setSession,l=(0,r.useCallback)(e,n);return(0,r.useCallback)((0,A.A)(N().mark((function e(){var n=arguments;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.current(!0),e.next=4,l.apply(void 0,n);case 4:a.current(!1),null!=t&&t.title&&null!=t&&t.successMessage&&i(t.title,t.successMessage,"success"),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),a.current(!1),e.t0 instanceof O&&"LOGIN_REQUIRED"===e.t0.code?c(null):s.current(e.t0.toString(),!0),t&&t.catch&&t.catch(e.t0);case 13:return e.prev=13,t&&t.finally&&t.finally(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,8,13,16]])}))),[l,t,i,c])}function Ie(e,n,t){var s=(0,r.useRef)(H()),a=(0,r.useRef)(ye()),i=(0,r.useContext)(q).setSession,c=(0,r.useCallback)(e,n);(0,r.useEffect)((function(){(0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.current(!0),e.next=4,c();case 4:a.current(!1),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),a.current(!1),e.t0 instanceof O&&"LOGIN_REQUIRED"===e.t0.code?i(null):s.current(e.t0.toString(),!0),t&&t.catch&&t.catch(e.t0);case 12:return e.prev=12,t&&t.finally&&t.finally(),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,7,12,15]])})))()}),[c,t,i])}const Ee=function(){var e=(0,c.zy)(),n=(0,c.Zp)(),t=(0,r.useContext)(q),s=t.user,a=t.setSession,i=We((0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.logout();case 2:a(null),n("/login");case 4:case"end":return e.stop()}}),e)}))),[n,a]),o=(0,r.useCallback)((function(e){return null!=s&&s.logged?e:"/login?redirect=".concat(encodeURIComponent(e).replace(/%2F/g,"/"))}),[s]),d=(0,r.useCallback)((function(n,t){return"/login"===e.pathname&&!t||e.pathname===(null!=t?t:o(n))}),[e.pathname,o]),u=(0,r.useCallback)((function(n){return e.pathname===n}),[e.pathname]),h=(null==s?void 0:s.logged)&&(""===s.name&&""===s.surname?s.nickname:"".concat(s.name," ").concat(s.surname));return(0,U.jsx)(U.Fragment,{children:(0,U.jsxs)(Q.A,{bg:"blue",expand:"lg",variant:"dark",className:"text-white shadow p-0 px-lg-3 py-lg-2 navbar-height",style:{zIndex:3},children:[(0,U.jsx)(Q.A.Brand,{className:"d-flex w-50 order px-3 py-2 p-lg-0",children:(0,U.jsx)(l.N_,{to:"/",replace:d("/"),children:(0,U.jsx)(j,{})})}),(0,U.jsx)(Q.A.Toggle,{"aria-controls":"headerNavbar",className:"border-0 px-3 py-2 p-lg-0"}),(0,U.jsx)(Q.A.Collapse,{id:"headerNavbar",className:"justify-content-center bg-blue order-2 w-80",children:(0,U.jsxs)(K.A,{children:[s&&(0,U.jsx)(v,{genReplace:d,genLink:o,isCurrent:u,scoreboardVisible:!s.logged||s.scoreboardVisible||s.publicScoreboard,user:s}),null!=s&&s.logged?(0,U.jsx)(U.Fragment,{children:(0,U.jsx)(K.A.Item,{className:"d-flex d-lg-none p-2",children:(0,U.jsxs)(Z.A,{className:"m-auto text-center",children:["PLAYER"===s.group?(0,U.jsx)(l.N_,{to:"/player",replace:d("/player"),children:(0,U.jsxs)(_.A,{size:"sm",variant:"success",className:"mx-1 mb-1",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.X46})," ",h]})}):(0,U.jsxs)("div",{className:"mx-1 mb-1",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.X46})," ",h]}),"ADMIN"===s.group&&(0,U.jsx)(l.N_,{to:"/admin",replace:d("/admin"),children:(0,U.jsxs)(_.A,{size:"sm",variant:"info",className:"mx-1 text-white",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.h6r})," Admin"]})}),"SUPERVISOR"===s.group&&(0,U.jsx)(l.N_,{to:"/venue-management",replace:d("/venue-management"),children:(0,U.jsxs)(_.A,{size:"sm",variant:"info",className:"mx-1 text-white",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.ZQp})," Venue"]})}),(0,U.jsxs)(_.A,{size:"sm",variant:"danger",className:"mx-1",onClick:i,children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.GxD})," "]})]})})}):(0,U.jsx)(U.Fragment,{children:(0,U.jsx)(K.A.Item,{className:"d-flex d-lg-none p-2",children:(0,U.jsx)(Z.A,{className:"m-auto text-center",children:s&&(0,U.jsx)(l.N_,{to:"/login",replace:d("/login"),children:(0,U.jsxs)(_.A,{size:"sm",variant:"success",className:"mx-1",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.rhE})," Login"]})})})})}),(0,U.jsx)(K.A.Item,{className:"d-flex d-lg-none pb-2 text-center",children:(0,U.jsx)(se,{className:"m-auto",drop:"down"})})]})}),null!=s&&s.logged?(0,U.jsxs)(Z.A,{className:"w-50 order-1 order-md-last justify-content-end align-items-center d-none d-lg-flex",children:["PLAYER"===s.group?(0,U.jsx)(l.N_,{to:"/player",replace:d("/player"),children:(0,U.jsxs)(_.A,{size:"sm",variant:"success",className:"mx-1",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.X46})," ",h]})}):(0,U.jsxs)("div",{className:"mx-1",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.X46})," ",h]}),"ADMIN"===s.group&&(0,U.jsx)(l.N_,{to:"/admin",replace:d("/admin"),children:(0,U.jsxs)(_.A,{size:"sm",variant:"info",className:"mx-1 text-white",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.h6r})," ",(0,U.jsx)("span",{className:"d-none d-xl-inline",children:"Admin"})]})}),"SUPERVISOR"===s.group&&(0,U.jsx)(l.N_,{to:"/venue-management",replace:d("/venue-management"),children:(0,U.jsxs)(_.A,{size:"sm",variant:"info",className:"mx-1 text-white",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.ZQp})," ",(0,U.jsx)("span",{className:"d-none d-xl-inline",children:"Venue"})]})}),(0,U.jsx)(_.A,{size:"sm",variant:"danger",className:"mx-1",onClick:i,children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.GxD})})]}):(0,U.jsx)(Z.A,{className:"w-50 order-1 order-md-last justify-content-end align-items-center d-none d-lg-flex",children:s&&(0,U.jsxs)(U.Fragment,{children:[s.registrationAllowed&&(0,U.jsx)(l.N_,{to:"/signup",replace:d("/signup","/signup"),children:(0,U.jsxs)(_.A,{size:"sm",variant:"primary",className:"mx-1",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.nWR})," ",(0,U.jsx)("span",{className:"d-none d-xl-inline",children:"Sign up"})]})}),(0,U.jsx)(l.N_,{to:"/login",replace:d("/login","/login"),children:(0,U.jsxs)(_.A,{size:"sm",variant:"success",className:"mx-1",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.rhE})," ",(0,U.jsx)("span",{className:"d-none d-xl-inline",children:"Login"})]})})]})}),(0,U.jsx)(se,{className:"ms-3 order-last d-none d-lg-block",drop:"start"})]})})};var Me=t(3048),Le=t(4479),Re=t(1105);const Fe=function(){return(0,U.jsx)(U.Fragment,{children:(0,U.jsxs)(Q.A,{bg:"blue",expand:"lg",variant:"dark",className:"shadow p-0 px-lg-3 py-lg-2",children:[(0,U.jsx)(Q.A.Toggle,{"aria-controls":"adminNavbar",className:"border-0 px-3 py-2 p-lg-0"}),(0,U.jsx)(Q.A.Collapse,{id:"adminNavbar",className:"justify-content-center text-center bg-blue order-2 w-75",children:(0,U.jsxs)(K.A,{children:[(0,U.jsxs)(K.A.Link,{as:l.k2,className:"p-3",to:"/admin/statistics",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.W1p})," Statistics"]}),(0,U.jsxs)(K.A.Link,{as:l.k2,className:"p-3",to:"/admin/users",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.X46})," Users"]}),(0,U.jsxs)(K.A.Link,{as:l.k2,className:"p-3",to:"/admin/challenges",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.s6x})," Challenges"]}),(0,U.jsxs)(K.A.Link,{as:l.k2,className:"p-3",to:"/admin/hints",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.wRm})," Hints"]}),(0,U.jsxs)(K.A.Link,{as:l.k2,className:"p-3",to:"/admin/submissions",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.Tsj})," Submissions"]}),(0,U.jsxs)(K.A.Link,{as:l.k2,className:"p-3",to:"/admin/writeups",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.LBj})," Writeups"]}),(0,U.jsxs)(K.A.Link,{as:l.k2,className:"p-3",to:"/admin/pages",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.A4h})," Pages"]}),(0,U.jsxs)(K.A.Link,{as:l.k2,className:"p-3",to:"/admin/files",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.ao0})," Files"]}),(0,U.jsxs)(K.A.Link,{as:l.k2,className:"p-3",to:"/admin/webhooks",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.z$e})," Webhooks"]}),(0,U.jsxs)(K.A.Link,{as:l.k2,className:"p-3",to:"/admin/registration",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.nWR})," Registration"]}),(0,U.jsxs)(K.A.Link,{as:l.k2,className:"p-3",to:"/admin/affiliations",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.QnR})," Affiliations"]}),(0,U.jsxs)(K.A.Link,{as:l.k2,className:"p-3",to:"/admin/config",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.Ubc})," Config"]}),(0,U.jsxs)(K.A.Link,{as:l.k2,className:"p-3",to:"/admin/inventory",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.KTq})," Inventory"]})]})})]})})};var Te=t(1351);const Ye=function(e){var n=(0,Te.A)(),t=n.trackPageView,s=n.pushInstruction,i=(0,r.useContext)(q).user,l=(0,c.zy)(),o=l.pathname,d=l.search,u=(0,r.useState)(""),h=(0,b.A)(u,2),x=h[0],m=h[1];return(0,r.useEffect)((function(){x&&(null!=i&&i.logged&&s("setUserId",i.id),t({documentTitle:x}))}),[x,o,d,i,s,t]),(0,U.jsx)(a.mg,(0,W.A)((0,W.A)({},e),{},{onChangeClientState:function(n,t,s){x&&n.title===x||m(n.title),e.onChangeClientState&&e.onChangeClientState(n,t,s)}}))},De=function(){return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Ye,{children:(0,U.jsxs)("title",{children:["Admin - ",g]})}),(0,U.jsx)("div",{className:"py-5 bg-blue-light text-center text-white",children:(0,U.jsx)(Me.A,{children:(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsx)(Re.A,{xs:12,lg:8,children:(0,U.jsx)("h1",{children:"Platform administration"})})})})}),(0,U.jsx)(Fe,{}),(0,U.jsx)("div",{className:"py-5 bg-body text-center",children:(0,U.jsx)(Me.A,{children:(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsx)(Re.A,{xs:12,children:(0,U.jsx)(c.sv,{})})})})})]})};var Pe=t(2735),Oe=t(428),ze=t(3524),_e=t(6052),Ue=t(5093),Ge=t.n(Ue),He=function(e,n){var t,s,r,a,i,c,l,o;return e.solved===n.solved&&e.compactMode===n.compactMode&&e.challenge.currentScore===n.challenge.currentScore&&e.challenge.currentAffiliationSolves===n.challenge.currentAffiliationSolves&&e.challenge.currentGlobalSolves===n.challenge.currentGlobalSolves&&(null===(t=e.challenge.status)||void 0===t?void 0:t.ok)===(null===(s=n.challenge.status)||void 0===s?void 0:s.ok)&&(null===(r=e.challenge.status)||void 0===r?void 0:r.lastChecked)===(null===(a=n.challenge.status)||void 0===a?void 0:a.lastChecked)&&e.challenge.ownWriteupId===n.challenge.ownWriteupId&&e.challenge.hidden===n.challenge.hidden&&e.hideTags===n.hideTags&&(null===(i=e.challenge.tags)||void 0===i?void 0:i.join("|"))===(null===(c=n.challenge.tags)||void 0===c?void 0:c.join("|"))&&(null===(l=e.challenge.hiddenTags)||void 0===l?void 0:l.join("|"))===(null===(o=n.challenge.hiddenTags)||void 0===o?void 0:o.join("|"))&&e.challenge.id===n.challenge.id&&e.challenge.title===n.challenge.title},Be=(0,r.memo)((function(e){var n=e.challenge,t=e.solved,s=e.hideTags,a=e.compactMode,i=(0,r.useContext)(q).user;return(0,U.jsx)(l.N_,{to:"/challenges#challenge-".concat(n.id),children:(0,U.jsx)("div",{className:"rounded-5 text-white border border-blue shadow p-2 cursor-pointer position-relative "+(t?"bg-success":"bg-secondary")+" "+(n.hidden?"opacity-50":"opacity-100"),children:a?(0,U.jsxs)("div",{children:[(0,U.jsxs)("span",{className:"float-end line-height-1",children:[n.status&&!t&&(0,U.jsx)(Oe.A,{placement:"bottom",overlay:(0,U.jsxs)(ze.A,{id:"challengeStatusTooltip-".concat(n.id),children:["Last checked: ",Ge()(n.status.lastChecked).fromNow()]}),children:(0,U.jsx)("span",{children:(0,U.jsx)("svg",{className:"svg-inline--fa fa-w-18 fa-lg fa-fw ".concat(n.status.ok?"text-success":"text-danger"),children:(0,U.jsx)("use",{xlinkHref:"#icon-circle"})})})}),void 0!==n.currentGlobalSolves&&(0,U.jsx)(Oe.A,{placement:"top",overlay:(0,U.jsx)(ze.A,{id:"tooltipGlobalSolves",children:"Global challenge solves"}),children:(0,U.jsxs)(_e.A,{bg:"primary",className:"mx-1",style:{minWidth:"4rem"},children:[(0,U.jsx)("svg",{className:"svg-inline--fa fa-w-18 fa-fw",children:(0,U.jsx)("use",{xlinkHref:"#icon-globe"})})," ",n.currentGlobalSolves]})}),void 0!==n.currentAffiliationSolves&&(0,U.jsx)(U.Fragment,{children:(0,U.jsx)(Oe.A,{placement:"top",overlay:(0,U.jsx)(ze.A,{id:"tooltipLocalSolves",children:"Local challenge solves"}),children:(0,U.jsxs)(_e.A,{bg:"primary",className:"mx-1",style:{minWidth:"4rem"},children:[(0,U.jsx)("svg",{className:"svg-inline--fa fa-w-18 fa-fw",children:(0,U.jsx)("use",{xlinkHref:"#icon-university"})})," ",n.currentAffiliationSolves]})})}),(0,U.jsx)(Oe.A,{placement:"top",overlay:(0,U.jsx)(ze.A,{id:"tooltipPoints",children:"Challenge points"}),children:(0,U.jsxs)(_e.A,{bg:"danger",className:"mx-1",style:{minWidth:"4rem"},children:[(0,U.jsx)("svg",{className:"svg-inline--fa fa-w-18 fa-fw",children:(0,U.jsx)("use",{xlinkHref:"#icon-trophy"})})," ",n.currentScore]})})]}),(0,U.jsxs)("h6",{className:"m-0 text-overflow-ellipsis white-space-nowrap overflow-hidden",children:[n.hidden&&(0,U.jsx)(Oe.A,{placement:"top",overlay:(0,U.jsx)(ze.A,{id:"tooltipHide",children:"Challenge disabled by supervisor"}),children:(0,U.jsx)("svg",{className:"svg-inline--fa fa-w-18 fa-fw",children:(0,U.jsx)("use",{xlinkHref:"#icon-eye-slash"})})})," ",n.title]})]}):(0,U.jsxs)("div",{children:[(0,U.jsxs)("div",{className:"p-0 mb-0 line-height-1",children:[(0,U.jsx)(Oe.A,{placement:"top",overlay:(0,U.jsx)(ze.A,{id:"tooltipPoints",children:"Challenge points"}),children:(0,U.jsxs)(_e.A,{bg:"danger",children:[(0,U.jsx)("svg",{className:"svg-inline--fa fa-w-18 fa-fw",children:(0,U.jsx)("use",{xlinkHref:"#icon-trophy"})})," ",n.currentScore]})}),t&&i.logged&&i.writeupsEnabled&&void 0===n.ownWriteupId&&(0,U.jsx)(Oe.A,{placement:"top",overlay:(0,U.jsx)(ze.A,{id:"tooltipWriteup",children:"Missing writeup"}),children:(0,U.jsx)(_e.A,{bg:"danger",className:"mx-1",style:{width:"2rem"},children:(0,U.jsx)("svg",{className:"svg-inline--fa fa-w-18 fa-fw",children:(0,U.jsx)("use",{xlinkHref:"#icon-book"})})})}),void 0!==n.currentGlobalSolves&&(0,U.jsx)(Oe.A,{placement:"top",overlay:(0,U.jsx)(ze.A,{id:"tooltipGlobalSolves",children:"Global challenge solves"}),children:(0,U.jsxs)(_e.A,{bg:"primary",className:"float-end",children:[(0,U.jsx)("svg",{className:"svg-inline--fa fa-w-18 fa-fw",children:(0,U.jsx)("use",{xlinkHref:"#icon-globe"})})," ",n.currentGlobalSolves," ",(0,U.jsx)("svg",{className:"svg-inline--fa fa-w-18 fa-fw",children:(0,U.jsx)("use",{xlinkHref:"#icon-flag"})})]})})]}),void 0!==n.currentAffiliationSolves&&(0,U.jsx)(U.Fragment,{children:(0,U.jsx)("div",{className:"p-0 m-0 line-height-1",children:(0,U.jsx)(Oe.A,{placement:"top",overlay:(0,U.jsx)(ze.A,{id:"tooltipLocalSolves",children:"Local challenge solves"}),children:(0,U.jsxs)(_e.A,{bg:"primary",className:"float-end mb-1",children:[(0,U.jsx)("svg",{className:"svg-inline--fa fa-w-18 fa-fw",children:(0,U.jsx)("use",{xlinkHref:"#icon-university"})})," ",n.currentAffiliationSolves," ",(0,U.jsx)("svg",{className:"svg-inline--fa fa-w-18 fa-fw",children:(0,U.jsx)("use",{xlinkHref:"#icon-flag"})})]})})})}),(0,U.jsx)("div",{children:(0,U.jsxs)("h6",{className:"mx-0 my-2 text-overflow-ellipsis white-space-nowrap overflow-hidden lh-sm",children:[n.hidden&&(0,U.jsx)(Oe.A,{placement:"top",overlay:(0,U.jsx)(ze.A,{id:"tooltipHide",children:"Challenge disabled by supervisor"}),children:(0,U.jsx)("span",{children:(0,U.jsx)("svg",{className:"svg-inline--fa fa-w-18 fa-fw",children:(0,U.jsx)("use",{xlinkHref:"#icon-eye-slash"})})})})," ",n.title]})}),(0,U.jsxs)("div",{className:"p-0 mb-0",children:[!s&&n.tags.length>0&&(0,U.jsxs)("div",{className:"d-block",children:[(0,U.jsx)(Oe.A,{placement:"top",overlay:(0,U.jsx)(ze.A,{id:"tooltipTags",children:"Challenge tags"}),children:(0,U.jsx)("span",{children:(0,U.jsx)("svg",{className:"svg-inline--fa fa-w-18 fa-fw",children:(0,U.jsx)("use",{xlinkHref:"#icon-tags"})})})}),n.tags.map((function(e,n){return(0,U.jsxs)(r.Fragment,{children:[" ",(0,U.jsx)(_e.A,{bg:"warning",text:"dark",children:e})," "]},n)}))]}),!s&&n.hiddenTags&&n.hiddenTags.length>0&&(0,U.jsxs)("div",{className:"d-inline-block",children:[(0,U.jsx)(Oe.A,{placement:"top",overlay:(0,U.jsx)(ze.A,{id:"tooltipTagsHidden",children:"Supervisor challenge tags"}),children:(0,U.jsx)("span",{children:(0,U.jsx)("svg",{className:"svg-inline--fa fa-w-18 fa-fw",children:(0,U.jsx)("use",{xlinkHref:"#icon-search"})})})}),n.hiddenTags.map((function(e,n){return(0,U.jsxs)(r.Fragment,{children:[" ",(0,U.jsx)(_e.A,{bg:"info",text:"dark",children:e})," "]},n)}))]}),n.status&&!t&&(0,U.jsx)(Oe.A,{placement:"bottom",overlay:(0,U.jsxs)(ze.A,{id:"challengeStatusTooltip-".concat(n.id),children:["Last checked: ",Ge()(n.status.lastChecked).fromNow()]}),children:(0,U.jsx)("span",{className:"position-absolute end-0 bottom-0 mb-2 me-2",children:(0,U.jsx)("svg",{className:"svg-inline--fa fa-w-18 fa-lg fa-fw ".concat(n.status.ok?"text-success":"text-danger"),children:(0,U.jsx)("use",{xlinkHref:"#icon-circle"})})})})]})]})})})}),He);const qe=Be,Ve=function(e){var n=e.id,t=e.title,s=e.challenges,a=e.playerUnlocks,l=e.hideSolved,o=e.hideTags,d=e.hideCount,u=e.hideHidden,h=e.compactMode,x=e.challengeSort,m=(0,r.useContext)(q).user,f=(0,c.zy)(),p=(0,r.useRef)(null);(0,r.useEffect)((function(){var e,t=f.hash.split("#")[1];t&&t.startsWith("section-")&&Number.parseInt(t.split("section-")[1],10)===n&&p.current&&(null===(e=p.current)||void 0===e||e.scrollIntoView())}),[f.hash,n]);var g=s.filter((function(e){return a.solves.includes(e.id)})).length,j=s.length,v="(".concat(g,"/").concat(j,")"),A=(0,r.useMemo)((function(){if("original"===x)return s;var e=(0,i.A)(s);return e.sort((function(e,n){var t=0;switch(x){case"title":t=e.title<n.title?-1:1;break;case"solves":t=e.currentGlobalSolves-n.currentGlobalSolves;break;case"points":t=e.currentScore-n.currentScore;break;case"-solves":t=-(e.currentGlobalSolves-n.currentGlobalSolves);break;case"-points":t=-(e.currentScore-n.currentScore);break;default:t=-1}return t})),e}),[s,x]);return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Le.A,{className:"justify-content-center text-start mt-3",ref:p,children:(0,U.jsx)(Re.A,{xs:12,children:h?(0,U.jsxs)("h5",{className:"m-0",children:[t," ",null!=m&&m.logged&&"PLAYER"===m.group&&!d?v:""]}):(0,U.jsxs)("h3",{className:"m-0",children:[t," ",null!=m&&m.logged&&"PLAYER"===m.group&&!d?v:""]})})}),(0,U.jsx)(X.g,{symbol:"icon-search",icon:$.MjD}),(0,U.jsx)(X.g,{symbol:"icon-flag",icon:$.s6x}),(0,U.jsx)(X.g,{symbol:"icon-tags",icon:$.DX_}),(0,U.jsx)(X.g,{symbol:"icon-trophy",icon:$.iHh}),(0,U.jsx)(X.g,{symbol:"icon-eye-slash",icon:$.k6j}),(0,U.jsx)(X.g,{symbol:"icon-globe",icon:$.Bwz}),(0,U.jsx)(X.g,{symbol:"icon-university",icon:$.QnR}),(0,U.jsx)(X.g,{symbol:"icon-circle",icon:$.GEE}),(0,U.jsx)(X.g,{symbol:"icon-book",icon:$.LBj}),(0,U.jsx)(Le.A,{className:"text-start mt-3",children:A.map((function(e){return(0,U.jsx)(Re.A,{xs:12,md:6,lg:4,className:(h?"p-0 px-1 px-md-0":"p-1")+(l&&a.solves.includes(e.id)||u&&e.hidden?" d-none":" d-block"),children:(0,U.jsx)(qe,{challenge:e,solved:a.solves.includes(e.id),hideTags:o,compactMode:h})},e.id)}))})]})},Qe=function(e){var n=e.id,t=e.title,s=e.sections,a=e.playerUnlocks,i=e.hideSolved,l=e.hideTags,o=e.hideCount,d=e.hideHidden,u=e.compactMode,h=e.challengeSort,x=(0,r.useContext)(q).user,m=(0,c.zy)(),f=(0,r.useRef)(null);(0,r.useEffect)((function(){var e,t=m.hash.split("#")[1];t&&t.startsWith("event-")&&Number.parseInt(t.split("event-")[1],10)===n&&f.current&&(null===(e=f.current)||void 0===e||e.scrollIntoView())}),[m.hash,n]);var p=s.map((function(e){return e.challenges.filter((function(e){return a.solves.includes(e.id)})).length})).reduce((function(e,n){return e+n}),0),g=s.map((function(e){return e.challenges.length})).reduce((function(e,n){return e+n}),0);return(0,U.jsx)(U.Fragment,{children:(0,U.jsx)("div",{className:(u?"py-3":"py-5")+" bg-body",children:(0,U.jsxs)(Me.A,{children:[(0,U.jsx)(Le.A,{className:"justify-content-center text-start text-lg-center",ref:f,children:(0,U.jsx)(Re.A,{xs:12,children:u?(0,U.jsxs)("h3",{className:"m-0",children:[t," ",null!=x&&x.logged&&"PLAYER"===x.group&&!o?"(".concat(p,"/").concat(g,")"):""]}):(0,U.jsxs)("h2",{className:"m-0",children:[t," ",null!=x&&x.logged&&"PLAYER"===x.group&&!o?"(".concat(p,"/").concat(g,")"):""]})})}),s.map((function(e,n){return(0,U.jsx)(Ve,{id:e.id,title:e.name,challenges:e.challenges,playerUnlocks:a,hideSolved:i,hideTags:l,hideHidden:d,hideCount:o,compactMode:u,challengeSort:h},n)}))]})})})};var Ke=t(45),Ze=t(1100),$e=t(2431),Xe=t(7468),Je=t(622),en=t(8563),nn={};nn.styleTagTransform=je(),nn.setAttributes=me(),nn.insert=he().bind(null,"head"),nn.domAPI=de(),nn.insertStyleElement=pe(),le()(en.A,nn),en.A&&en.A.locals&&en.A.locals;var tn=r.createContext({noFreeze:!1,appearFrozen:function(e,n){return e.frozen},setNoFreeze:function(e){}}),sn=function(){return(0,r.useContext)(tn)};const rn=function(e){var n=e.children,t=(0,r.useContext)(q).user,s=(0,r.useState)((function(){return"true"===localStorage.getItem("noFreeze")})),a=(0,b.A)(s,2),i=a[0],c=a[1],l=!(null==t||!t.logged)&&i&&("ADMIN"===t.group||"SUPERVISOR"===t.group);(0,r.useEffect)((function(){localStorage.setItem("noFreeze","".concat(i))}),[i]);var o=(0,r.useCallback)((function(e,n){if(l){if(!e.frozen&&null!==e.freezeTime)return e.freezeTime<(null!=n?n:Date.now())}else if(e.frozen)return e.freezeTime<(null!=n?n:Date.now());return e.frozen}),[l]);return(0,U.jsx)(tn.Provider,{value:{noFreeze:l,setNoFreeze:c,appearFrozen:o},children:n})};var an=["node","className","children"];const cn=function(e){var n=e.gameFreeze,t=e.challenge,s=e.playerUnlocks,a=e.onClose,i=e.updateChallenges,c=e.hideTags,o=(0,r.useContext)(q).user,d=(0,Te.A)().trackEvent,u=sn().appearFrozen,h=(0,r.useState)(""),x=(0,b.A)(h,2),m=x[0],f=x[1],p=(0,r.useState)(!1),g=(0,b.A)(p,2),j=g[0],v=g[1],y=(0,r.useState)(""),w=(0,b.A)(y,2),k=w[0],C=w[1],S=(0,r.useState)(-1),E=(0,b.A)(S,2),M=E[0],L=E[1],R=(0,r.useState)(),F=(0,b.A)(R,2),T=F[0],Y=F[1],D=We(function(){var e=(0,A.A)(N().mark((function e(n){var s;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.unlockHint(n);case 2:s=e.sent,Y(s),i(),d({category:"Challenges",action:"Show hint",name:t.title});case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[i,d,t]),G=We((0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(!s.solves.includes(t.id)){e.next=6;break}return C("You've already solved the challenge"),v(!1),e.abrupt("return");case 6:if(""!==m.trim()){e.next=8;break}return e.abrupt("return");case 8:return e.prev=8,e.next=11,P.submitFlag(t.id,m.trim());case 11:e.sent?(C("Valid flag"),v(!1),i(),d({category:"Challenges",action:"Submit valid flag",name:t.title})):(C("Wrong flag"),v(!0),d({category:"Challenges",action:"Submit wrong flag",name:t.title})),e.next=29;break;case 15:if(e.prev=15,e.t0=e.catch(8),!(e.t0 instanceof O)){e.next=28;break}if("ALREADY_SOLVED"!==e.t0.code){e.next=24;break}return C("Challenge already solved"),v(!0),e.abrupt("return");case 24:if("INVALID_USER"!==e.t0.code){e.next=28;break}return C("You're not a player"),v(!0),e.abrupt("return");case 28:throw e.t0;case 29:case"end":return e.stop()}}),e,null,[[8,15]])}))),[t,m,i,s.solves,d]),H=function(e){if(null==o||!o.logged||null==o||!o.filesToken)return e;if(e.startsWith("/api/file")){var n=new URL("https://example.com"+e);return n.searchParams.set("auth",o.filesToken),n.pathname+n.search}var t,s=(0,I.A)(o.fileUrls);try{for(s.s();!(t=s.n()).done;){var r=t.value;if(e.startsWith(r)){var a=new URL(e);return a.searchParams.set("token",o.filesToken),a.toString()}}}catch(e){s.e(e)}finally{s.f()}return e};return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(z.A,{show:!0,onHide:a,centered:!0,children:[(0,U.jsx)(z.A.Header,{closeButton:!0,children:(0,U.jsxs)(z.A.Title,{className:"text-center d-flex align-items-center",style:{gap:".5em"},children:[o.logged&&"ADMIN"===o.group&&(0,U.jsx)(l.N_,{to:"/admin/challenges/".concat(t.id),children:(0,U.jsxs)(_.A,{size:"sm",variant:"secondary",className:"text-nowrap",children:[(0,U.jsx)(X.g,{icon:$.MT7})," Edit"]})}),t.title]})}),(0,U.jsxs)(z.A.Body,{children:[(0,U.jsxs)("div",{className:"text-center",children:[void 0!==t.currentGlobalSolves&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Oe.A,{placement:"top",overlay:(0,U.jsx)(ze.A,{id:"tooltipGlobalSolves",children:"Global challenge solves"}),children:(0,U.jsxs)(_e.A,{bg:"primary",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.Bwz})," ",t.currentGlobalSolves," ",(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.s6x})]})})," "]}),void 0!==t.currentAffiliationSolves&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Oe.A,{placement:"top",overlay:(0,U.jsx)(ze.A,{id:"tooltipLocalSolves",children:"Local challenge solves"}),children:(0,U.jsxs)(_e.A,{bg:"primary",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.QnR})," ",t.currentAffiliationSolves," ",(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.s6x})]})})," "]}),(0,U.jsx)(Oe.A,{placement:"top",overlay:(0,U.jsx)(ze.A,{id:"tooltipPoints",children:"Challenge points"}),children:(0,U.jsxs)(_e.A,{bg:"danger",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.iHh})," ",t.currentScore]})})]}),(0,U.jsxs)("div",{className:"mt-3 px-3 d-flex justify-content-center gap-3 flex-wrap",children:[!c&&t.tags.length>0&&(0,U.jsxs)("div",{className:"text-center",children:[(0,U.jsx)(Oe.A,{placement:"top",overlay:(0,U.jsx)(ze.A,{id:"tooltipTags",children:"Challenge tags"}),children:(0,U.jsx)("span",{children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.DX_})})}),t.tags.map((function(e){return(0,U.jsxs)(r.Fragment,{children:[" ",(0,U.jsx)(_e.A,{bg:"warning",text:"dark",children:e})," "]},e)}))]}),!c&&t.hiddenTags&&t.hiddenTags.length>0&&(0,U.jsxs)("div",{className:"text-center",children:[(0,U.jsx)(Oe.A,{placement:"top",overlay:(0,U.jsx)(ze.A,{id:"tooltipTagsHidden",children:"Supervisor challenge tags"}),children:(0,U.jsx)("span",{children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.MjD})})}),t.hiddenTags.map((function(e){return(0,U.jsxs)(r.Fragment,{children:[" ",(0,U.jsx)(_e.A,{bg:"info",text:"dark",children:e})," "]},e)}))]})]}),t.authors.length>0&&(0,U.jsx)("div",{className:"mt-3 px-3 d-flex justify-content-center gap-3 flex-wrap",children:(0,U.jsxs)("div",{className:"text-center",children:[(0,U.jsx)(Oe.A,{placement:"top",overlay:(0,U.jsx)(ze.A,{id:"tooltipAuthors",children:"Authors"}),children:(0,U.jsx)("span",{children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.Hzw})})}),t.authors.map((function(e){return(0,U.jsxs)(r.Fragment,{children:[" ",(0,U.jsx)(_e.A,{bg:"light",text:"dark",children:e})," "]},e)}))]})}),t.status&&(0,U.jsxs)("div",{className:"text-center mt-3",children:["Status:"," ",t.status.ok?(0,U.jsx)("span",{className:"text-success fw-bold",children:"up"}):(0,U.jsx)("span",{className:"text-danger fw-bold",children:"down"}),", last checked: ",(0,U.jsx)("i",{children:Ge()(t.status.lastChecked).fromNow()})]}),(0,U.jsx)("div",{children:(0,U.jsx)("div",{className:"markdown bg-body p-3 mt-3",children:(0,U.jsx)(Xe.$,{rehypePlugins:[Je.A],linkTarget:"_blank",components:{code:function(e){e.node;var n=e.className,t=e.children,s=(0,Ke.A)(e,an);return(0,U.jsx)("code",(0,W.A)((0,W.A)({className:n?"code "+n:"code"},s),{},{children:t}))}},children:t.description})})}),t.hints.length>0&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("hr",{}),(0,U.jsxs)("div",{children:[(0,U.jsxs)("h5",{className:"text-center",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.iW_})," Hints"]}),t.hints.map((function(e){return(0,U.jsxs)(r.Fragment,{children:[(0,U.jsxs)(_.A,{className:"mt-3",variant:s.hints.includes(e.id)?"success":"danger",onClick:null!=o&&o.logged&&("ADMIN"===o.group||"SUPERVISOR"===o.group)||s.hints.includes(e.id)?function(){return D(e.id)}:function(){return L(e.id)},children:[" ",(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.iW_})," ",e.title," ",(0,U.jsxs)(_e.A,{bg:"warning",text:"dark",children:["-",e.price,"pt"]})]})," "]},e.id)}))]})]}),t.files.length>0&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("hr",{}),(0,U.jsxs)("div",{children:[(0,U.jsxs)("h5",{className:"text-center",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.A4h})," Attachments"]}),t.files.map((function(e,n){return(0,U.jsx)("div",{className:"mt-2",children:(0,U.jsxs)("a",{href:H(e.url),target:"_blank",rel:"noopener noreferrer",children:[(0,U.jsxs)(_.A,{variant:"primary",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:e.url.startsWith("/api/file")?$.cbP:$.AaJ})," ",e.name]})," "]})},n)}))]})]}),!(k&&!j)&&!s.solves.includes(t.id)&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("hr",{}),(0,U.jsxs)(Ze.A,{children:[(0,U.jsx)(Z.A.Control,{type:"text",placeholder:"flag{...}",value:m,onKeyDown:function(e){"Enter"===e.key&&G()},onChange:function(e){C(""),f(e.target.value)}}),(0,U.jsxs)(_.A,{variant:"success",onClick:G,children:["Submit ",(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.dmS})]})]})]}),k&&(0,U.jsxs)(Pe.A,{variant:j?"danger":"success",className:"mt-3 w-100",children:[j?(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.zpE}):(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.SGM})," ",k]}),null!=o&&o.logged&&"PLAYER"===o.group&&o.writeupsEnabled&&s.solves.includes(t.id)?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("hr",{}),(0,U.jsxs)("div",{children:[(0,U.jsxs)("h5",{className:"text-center mt-3",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.LBj})," Your writeup"]}),t.writeups&&1===t.writeups.length?(0,U.jsxs)("div",{className:"d-flex align-items-center",children:[(0,U.jsx)("div",{className:"flex-grow-1 d-flex align-items-center",children:(0,U.jsxs)("div",{children:[(0,U.jsx)("div",{children:t.writeups[0].title}),(0,U.jsx)("small",{className:"text-muted",children:Ge()(t.writeups[0].timestamp).format("YYYY-MM-DD HH:mm:ss")})]})}),(0,U.jsxs)("div",{children:[(0,U.jsx)(l.N_,{to:"/writeup/".concat(t.writeups[0].id),children:(0,U.jsxs)(_.A,{variant:"secondary",children:[(0,U.jsx)(X.g,{icon:$.pS3,fixedWidth:!0})," View"]})})," ",o.writeupsEditing&&(0,U.jsx)(l.N_,{to:"/writeup/edit/".concat(t.writeups[0].id),children:(0,U.jsxs)(_.A,{children:[(0,U.jsx)(X.g,{icon:$.MT7,fixedWidth:!0})," Edit"]})})]})]}):(0,U.jsxs)("div",{className:"d-flex",children:[(0,U.jsx)("div",{className:"flex-grow-1 d-flex align-items-center ps-3",children:(0,U.jsx)("i",{children:"None"})}),o.writeupsEditing&&(0,U.jsx)(l.N_,{to:"/writeup/new/".concat(t.id),children:(0,U.jsxs)(_.A,{children:[(0,U.jsx)(X.g,{icon:$.QLR,fixedWidth:!0})," Create"]})})]})]})]}):(null==o?void 0:o.logged)&&"PLAYER"!==o.group&&t.writeups&&t.writeups.length>0&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("hr",{}),(0,U.jsxs)("div",{children:[(0,U.jsxs)("h5",{className:"text-center mt-3",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.LBj})," Writeups"]}),(0,U.jsx)("div",{className:"mt-3 table-responsive text-start table-overflow-256",children:(0,U.jsxs)($e.A,{striped:!0,bordered:!0,hover:!0,className:"m-0",children:[(0,U.jsx)("thead",{children:(0,U.jsxs)("tr",{children:[(0,U.jsx)("th",{className:"align-middle",children:"Title"}),(0,U.jsx)("th",{className:"align-middle",children:"Time"}),(0,U.jsx)("th",{className:"align-middle",children:"User"})]})}),(0,U.jsx)("tbody",{children:t.writeups.map((function(e,n){return(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{className:"align-middle text-nowrap",children:(0,U.jsx)(l.N_,{to:"/writeup/".concat(e.id),target:"_blank",children:e.title})}),(0,U.jsx)("td",{className:"align-middle text-nowrap",children:Ge()(e.timestamp).format("YYYY-MM-DD HH:mm:ss")}),(0,U.jsx)("td",{className:"align-middle",children:(0,U.jsx)(l.N_,{to:"/player/".concat(e.authorId),target:"_blank",children:e.authorDisplayedName})})]},n)}))})]})})]})]}),t.solves&&t.solves.length>0&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("hr",{}),(0,U.jsxs)("div",{children:[(0,U.jsxs)("h5",{className:"text-center mt-3",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.s6x})," Solves"]}),(0,U.jsx)("div",{className:"mt-3 table-responsive text-start table-overflow-256",children:(0,U.jsxs)($e.A,{striped:!0,bordered:!0,hover:!0,className:"m-0",children:[(0,U.jsx)("thead",{children:(0,U.jsxs)("tr",{children:[(0,U.jsx)("th",{className:"align-middle text-center",children:"#"}),(0,U.jsx)("th",{className:"align-middle",children:"Time"}),(0,U.jsx)("th",{className:"align-middle",children:"User"})]})}),(0,U.jsx)("tbody",{children:t.solves.map((function(e,t){return(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{className:"align-middle text-nowrap text-center",children:1+t}),(0,U.jsxs)("td",{className:"align-middle text-nowrap",children:[Ge()(e.timestamp).format("YYYY-MM-DD HH:mm:ss"),u(n,new Date(e.timestamp).getTime())&&(0,U.jsxs)(U.Fragment,{children:[" ",(0,U.jsx)(X.g,{icon:$.Wkq,fixedWidth:!0})]})]}),(0,U.jsxs)("td",{className:"align-middle",children:[(0,U.jsx)(l.N_,{to:"/player/".concat(e.playerId),children:e.displayedName}),e.guest&&(0,U.jsx)(Oe.A,{placement:"top",overlay:(0,U.jsx)(ze.A,{children:"Guest"}),children:(0,U.jsx)(X.g,{icon:$.Rwe,fixedWidth:!0})})]})]},t)}))})]})})]})]})]})]}),(0,U.jsxs)(z.A,{show:-1!==M,onHide:function(){return L(-1)},centered:!0,children:[(0,U.jsx)(z.A.Header,{closeButton:!0,children:(0,U.jsx)(z.A.Title,{className:"text-center",children:"Unlock Hint"})}),(0,U.jsx)(z.A.Body,{children:(0,U.jsx)("div",{className:"p-3",children:"Do you really want to unlock the hint?"})}),(0,U.jsxs)(z.A.Footer,{children:[(0,U.jsxs)(_.A,{variant:"danger",onClick:function(){return L(-1)},children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.GRI})," Close"]}),(0,U.jsxs)(_.A,{variant:"success",onClick:function(){D(M),L(-1)},children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.e68})," Confirm"]})]})]}),(0,U.jsxs)(z.A,{show:!!T,onHide:function(){return Y(void 0)},centered:!0,backdrop:!1,size:"lg",children:[(0,U.jsx)(z.A.Header,{closeButton:!0,children:(0,U.jsx)(z.A.Title,{className:"text-center",children:null==T?void 0:T.title})}),(0,U.jsx)(z.A.Body,{children:(0,U.jsx)("div",{className:"markdown bg-body p-3 overflow-wrap-anywhere",children:(0,U.jsx)(Xe.$,{linkTarget:"_blank",children:(null==T?void 0:T.content)||""})})}),(0,U.jsx)(z.A.Footer,{children:(0,U.jsx)(_.A,{variant:"primary",onClick:function(){return Y(void 0)},children:"Close"})})]})]})};var ln=t(6253),on=function(e){var n=e.end,t={isPlaying:!0,size:128,strokeWidth:6},s=3600,r=86400,a=function(e,n){return(0,U.jsxs)("div",{className:"time-wrapper",children:[(0,U.jsx)("h4",{className:"time",children:n}),(0,U.jsx)("h5",{children:e})]})},i=Date.now()/1e3;return(0,U.jsxs)("div",{className:"row text-center justify-content-between font-weight-bold",children:[(0,U.jsx)("div",{className:"d-flex justify-content-between col-6 col-md-3 mt-3",children:(0,U.jsx)("div",{className:"m-auto",children:(0,U.jsx)(ln.CountdownCircleTimer,(0,W.A)((0,W.A)({},t),{},{colors:"#7E2E84",duration:Math.ceil((n/1e3-i)/r)*r,initialRemainingTime:n/1e3-i,children:function(e){var t=e.elapsedTime;return a("days",(Math.ceil((n/1e3-i)/r)*r-(t||0))/r|0)}}))})}),(0,U.jsx)("div",{className:"d-flex justify-content-between col-6 col-md-3 mt-3",children:(0,U.jsx)("div",{className:"m-auto",children:(0,U.jsx)(ln.CountdownCircleTimer,(0,W.A)((0,W.A)({},t),{},{colors:"#D14081",duration:r,initialRemainingTime:(n/1e3-i)%r,onComplete:function(e){return[n/1e3-i-e>s,0]},children:function(e){var n=e.elapsedTime;return a("hours",(r-(n||0))%r/s|0)}}))})}),(0,U.jsx)("div",{className:"d-flex justify-content-between col-6 col-md-3 mt-3",children:(0,U.jsx)("div",{className:"m-auto",children:(0,U.jsx)(ln.CountdownCircleTimer,(0,W.A)((0,W.A)({},t),{},{colors:"#EF798A",duration:s,initialRemainingTime:(n/1e3-i)%s,onComplete:function(e){return[n/1e3-i-e>60,0]},children:function(e){var n=e.elapsedTime;return a("minutes",(s-(n||0))%s/60|0)}}))})}),(0,U.jsx)("div",{className:"d-flex justify-content-between col-6 col-md-3 mt-3",children:(0,U.jsx)("div",{className:"m-auto",children:(0,U.jsx)(ln.CountdownCircleTimer,(0,W.A)((0,W.A)({},t),{},{colors:"#218380",duration:60,initialRemainingTime:(n/1e3-i)%60,onComplete:function(e){return[n/1e3-i-e>0,0]},children:function(e){var n=e.elapsedTime;return a("seconds",60-(n||0)|0)}}))})})]})};const dn=function(){var e=(0,r.useContext)(q).user,n=sn(),t=n.noFreeze,s=n.setNoFreeze,a=n.appearFrozen,i=(0,Te.A)().trackEvent,l=(0,c.Zp)(),o=(0,c.zy)(),d=(0,r.useState)(),u=(0,b.A)(d,2),h=u[0],x=u[1],m=(0,r.useState)(),f=(0,b.A)(m,2),p=f[0],j=f[1],v=(0,r.useState)(),y=(0,b.A)(v,2),w=y[0],k=y[1],C=(0,r.useState)((function(){return"1"===localStorage.getItem("challengesHideHidden")})),S=(0,b.A)(C,2),W=S[0],I=S[1],E=(0,r.useState)((function(){return"1"===localStorage.getItem("challengesHideSolved")})),M=(0,b.A)(E,2),L=M[0],R=M[1],F=(0,r.useState)((function(){return"1"===localStorage.getItem("challengesHideTags")})),T=(0,b.A)(F,2),Y=T[0],D=T[1],O=(0,r.useState)((function(){return"1"===localStorage.getItem("challengesHideCount")})),z=(0,b.A)(O,2),_=z[0],G=z[1],H=(0,r.useState)((function(){return"1"===localStorage.getItem("challengesCompactMode")})),B=(0,b.A)(H,2),V=B[0],Q=B[1],K=(0,r.useState)((function(){return localStorage.getItem("challengesSort")||"original"})),J=(0,b.A)(K,2),ee=J[0],ne=J[1],te=(0,r.useState)({solves:[],hints:[]}),se=(0,b.A)(te,2),re=se[0],ae=se[1],ie=(0,r.useState)(),ce=(0,b.A)(ie,2),le=ce[0],oe=ce[1],de=We((0,A.A)(N().mark((function n(){var s,r,a,i;return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=e&&e.logged){n.next=2;break}return n.abrupt("return");case 2:if("PLAYER"!==e.group){n.next=11;break}return n.next=5,Promise.all([P.getChallenges(t),P.getPlayerUnlocks()]);case 5:a=n.sent,i=(0,b.A)(a,2),r=i[0],s=i[1],n.next=14;break;case 11:return n.next=13,P.getChallenges(t);case 13:r=n.sent;case 14:x(r.gamePause),j(r.gameFreeze),r.events&&(k(r.events),void 0!==s&&ae(s));case 17:case"end":return n.stop()}}),n)}))),[e,t]),ue=(0,r.useRef)("");(0,r.useEffect)((function(){void 0===w||0===(null==w?void 0:w.length)?(ue.current=o.hash,de()):o.hash===ue.current?(oe(void 0),de()):ue.current=o.hash}),[o.hash,o.key,de]);var he=We(function(){var e=(0,A.A)(N().mark((function e(n){var s;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.getChallenge(n,t);case 2:s=e.sent,oe(s),i({category:"Challenges",action:"Open challenge",name:s.title});case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[i,t]);return(0,r.useEffect)((function(){var e=o.hash.split("#")[1];if(e){if(e.startsWith("challenge-")){var n=Number.parseInt(e.split("challenge-")[1],10);he(n)}}else oe(void 0)}),[o.hash,he]),(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Ye,{children:(0,U.jsxs)("title",{children:["Challenges - ",g]})}),(0,U.jsx)("div",{className:"py-5 bg-blue-light text-center text-white mb-5",children:(0,U.jsx)(Me.A,{children:(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsx)(Re.A,{xs:12,lg:8,children:(0,U.jsxs)("h1",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.s6x})," Challenges"]})})})})}),p&&a(p)&&(0,U.jsx)("div",{className:"pb-3 text-center",children:(0,U.jsx)(Me.A,{children:(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsx)(Re.A,{xs:12,lg:8,children:(0,U.jsxs)(Pe.A,{variant:"info",className:"mb-0",children:[(0,U.jsxs)("h5",{className:"m-0 py-2",children:[(0,U.jsx)(X.g,{icon:$.Wkq})," The scoreboard is frozen"," ",(0,U.jsx)(X.g,{icon:$.Wkq})]}),(null==e?void 0:e.logged)&&("ADMIN"===(null==e?void 0:e.group)||"SUPERVISOR"===(null==e?void 0:e.group))&&(0,U.jsx)("div",{className:"d-flex justify-content-center",children:(0,U.jsx)("h6",{className:"m-0",children:(0,U.jsx)(Z.A.Check,{id:"showFreezeCheckbox",type:"checkbox",label:"Show freeze",checked:!t,onChange:function(e){return s(!e.target.checked)}})})})]})})})})}),(null==h?void 0:h.paused)&&(0,U.jsx)("div",{className:"pb-5 text-center",children:(0,U.jsx)(Me.A,{children:(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsx)(Re.A,{xs:12,lg:8,children:"manual-pause"===h.reason?(0,U.jsx)(Pe.A,{variant:"warning",className:"mb-0",children:(0,U.jsxs)("h5",{className:"m-0 py-2",children:[(0,U.jsx)(X.g,{icon:$.G1Y})," The competition is currently paused"," ",(0,U.jsx)(X.g,{icon:$.G1Y})]})}):"before-start"===h.reason?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Pe.A,{variant:"info",className:"mb-0",children:(0,U.jsxs)("h5",{className:"m-0 py-2",children:[(0,U.jsx)(X.g,{icon:$.a$})," The competition starts on"," ",Ge()(h.start).format("DD-MM-YYYY [at] HH:mm:ss")," ",(0,U.jsx)(X.g,{icon:$.a$})]})}),(0,U.jsx)(on,{end:Date.parse(h.start)})]}):"after-end"===h.reason?(0,U.jsx)(Pe.A,{variant:"danger",className:"mb-0",children:(0,U.jsxs)("h5",{className:"m-0 py-2",children:[(0,U.jsx)(X.g,{icon:$.APi})," The competition has ended on"," ",Ge()(h.end).format("DD-MM-YYYY [at] HH:mm:ss")," ",(0,U.jsx)(X.g,{icon:$.APi})]})}):(0,U.jsx)(U.Fragment,{})})})})}),!1===(null==h?void 0:h.paused)&&h.end&&(0,U.jsx)("div",{className:"pb-5 text-center",children:(0,U.jsx)(Me.A,{children:(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsxs)(Re.A,{xs:12,lg:8,children:[(0,U.jsx)(Pe.A,{variant:"info",className:"mb-0",children:(0,U.jsxs)("h5",{className:"m-0 py-2",children:[(0,U.jsx)(X.g,{icon:$.a$})," The competition ends on"," ",Ge()(h.end).format("DD-MM-YYYY [at] HH:mm:ss")," ",(0,U.jsx)(X.g,{icon:$.a$})]})}),(0,U.jsx)(on,{end:Date.parse(h.end)})]})})})}),(null==e?void 0:e.logged)&&w&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("div",{className:"py-3 bg-body text-start",children:(0,U.jsx)(Me.A,{children:(0,U.jsxs)(Le.A,{className:"justify-content-start",children:["SUPERVISOR"===e.group&&(0,U.jsx)(Re.A,{xs:10,md:6,lg:3,children:(0,U.jsx)(Z.A.Check,{id:"hideHiddenCheckbox",type:"checkbox",label:"Hide hidden challenges",checked:W,onChange:function(e){localStorage.setItem("challengesHideHidden",e.target.checked?"1":"0"),I(e.target.checked)}})}),"PLAYER"===e.group&&(0,U.jsx)(Re.A,{xs:10,md:6,lg:3,children:(0,U.jsx)(Z.A.Check,{id:"hideSolvedCheckbox",type:"checkbox",label:"Hide solved challenges",checked:L,onChange:function(e){localStorage.setItem("challengesHideSolved",e.target.checked?"1":"0"),R(e.target.checked)}})}),"PLAYER"===e.group&&(0,U.jsx)(Re.A,{xs:10,md:6,lg:3,children:(0,U.jsx)(Z.A.Check,{id:"hideCountCheckbox",type:"checkbox",label:"Hide challenges count",checked:_,onChange:function(e){localStorage.setItem("challengesHideCount",e.target.checked?"1":"0"),G(e.target.checked)}})}),("ADMIN"===e.group||"SUPERVISOR"===e.group)&&(0,U.jsx)(Re.A,{xs:10,md:6,lg:3,children:(0,U.jsx)(Z.A.Check,{id:"hideTagsCheckbox",type:"checkbox",label:"Hide challenge tags",checked:Y,onChange:function(e){localStorage.setItem("challengesHideTags",e.target.checked?"1":"0"),D(e.target.checked)}})}),(0,U.jsx)(Re.A,{xs:10,md:6,lg:3,children:(0,U.jsx)(Z.A.Check,{id:"compactModeCheckbox",type:"checkbox",label:"Compact view",checked:V,onChange:function(e){localStorage.setItem("challengesCompactMode",e.target.checked?"1":"0"),Q(e.target.checked)}})})]})})}),(0,U.jsx)("div",{className:"py-3 bg-body text-start",children:(0,U.jsx)(Me.A,{children:(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsx)(Re.A,{xs:10,md:6,lg:4,className:"text-center",children:(0,U.jsxs)(Z.A.Select,{className:"w-100",onChange:function(e){localStorage.setItem("challengesSort",e.target.value),ne(e.target.value)},value:ee,children:[(0,U.jsx)("option",{value:"original",children:"Sort by original order"}),(0,U.jsx)("option",{value:"title",children:"Sort by title"}),(0,U.jsx)("option",{value:"solves",children:"Sort by solves (asc)"}),(0,U.jsx)("option",{value:"-solves",children:"Sort by solves (desc)"}),(0,U.jsx)("option",{value:"points",children:"Sort by points (asc)"}),(0,U.jsx)("option",{value:"-points",children:"Sort by points (desc)"})]})})})})})]}),w&&w.map((function(e,n){return(0,U.jsx)(Qe,{id:e.id,title:e.name,sections:e.sections,playerUnlocks:re,hideHidden:W,hideSolved:L,hideCount:_,hideTags:Y,compactMode:V,challengeSort:ee},n)})),le&&p&&(0,U.jsx)(cn,{challenge:le,gameFreeze:p,playerUnlocks:re,onClose:function(){l("/challenges")},updateChallenges:de,hideTags:Y})]})},un=function(){var e=(0,r.useContext)(q),n=e.user,t=e.setSession,s=(0,c.Zp)(),a=(0,c.zy)(),i=(0,r.useState)(""),o=(0,b.A)(i,2),d=o[0],u=o[1],h=(0,r.useState)(""),x=(0,b.A)(h,2),m=x[0],f=x[1],p=(0,r.useState)(!1),j=(0,b.A)(p,2),v=j[0],y=j[1],w=We((0,A.A)(N().mark((function e(){var n,r;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.login(d.trim(),m);case 3:r=e.sent,t(r.token),s(null!==(n=new URLSearchParams(a.search).get("redirect"))&&void 0!==n?n:"/challenges",{replace:!0}),e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof O&&"INVALID_LOGIN"===e.t0.code)){e.next=13;break}return y(!0),e.abrupt("return");case 13:throw e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,8]])}))),[d,m,a.search,s,t]),k=(0,r.useCallback)((function(e){"Enter"===e.key&&w()}),[w]);return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Ye,{children:(0,U.jsxs)("title",{children:["Login - ",g]})}),(0,U.jsx)("div",{className:"py-5 bg-blue-light text-center text-white",children:(0,U.jsx)(Me.A,{children:(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsx)(Re.A,{xs:12,lg:8,children:(0,U.jsxs)("h1",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.rhE})," Login to the platform"]})})})})}),(0,U.jsx)("div",{className:"py-5 bg-body",children:(0,U.jsx)(Me.A,{children:(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsxs)(Re.A,{xs:12,lg:6,children:[(0,U.jsxs)("div",{className:"text-center",children:[(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.Hzw})," Email"]}),(0,U.jsx)(Z.A.Control,{type:"email",placeholder:"Email",value:d,onKeyDown:k,onChange:function(e){y(!1),u(e.target.value)}})]}),(0,U.jsxs)("div",{className:"text-center mt-3",children:[(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.bMg})," Password"]}),(0,U.jsx)(Z.A.Control,{type:"password",placeholder:"Password",value:m,onKeyDown:k,onChange:function(e){y(!1),f(e.target.value)}})]}),v&&(0,U.jsxs)(Pe.A,{variant:"danger",className:"mt-3",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.zpE})," Invalid credentials"]}),(0,U.jsx)("div",{className:"mt-4 text-center",children:(0,U.jsxs)(_.A,{variant:"success",className:"w-50",onClick:w,children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.rhE})," Login"]})}),(null==n?void 0:n.passwordRecoveryAllowed)&&(0,U.jsx)("div",{className:"mt-4 text-center",children:(0,U.jsx)(l.N_,{to:"/password-recovery",children:(0,U.jsxs)(_.A,{variant:"danger",className:"w-50",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.DW4})," Forgot password"]})})}),(null==n?void 0:n.registrationAllowed)&&(0,U.jsx)("div",{className:"mt-4 text-center",children:(0,U.jsx)(l.N_,{to:"/signup",children:(0,U.jsxs)(_.A,{variant:"primary",className:"w-50",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.nWR})," Sign up"]})})})]})})})})]})};var hn=t(5232);const xn=function(){return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Ye,{children:(0,U.jsxs)("title",{children:["Page not Found - ",g]})}),(0,U.jsx)("div",{className:"py-5 bg-body text-center",children:(0,U.jsx)(Me.A,{children:(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsx)(Re.A,{xs:12,lg:8,children:(0,U.jsxs)("h3",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.zpE})," 404 Page not Found"]})})})})})]})},mn=function(){var e=(0,r.useRef)(H()),n=(0,r.useRef)(ye()),t=(0,r.useContext)(q).setSession,s=(0,c.g)()["*"],a=(0,c.zy)(),i=(0,c.Zp)(),o=(0,r.useState)(!1),d=(0,b.A)(o,2),u=d[0],h=d[1],x=(0,r.useState)(""),m=(0,b.A)(x,2),f=m[0],p=m[1],g={trim:!0,replace:function(e){var n,t;if("attribs"in e&&"name"in e)return"html"===e.name||"body"===e.name?(0,U.jsx)(U.Fragment,{children:(0,hn.zd)(e.children,g)}):"a"!==e.name||null===(n=e.attribs.href)||void 0===n||!n.startsWith("/")||null!==(t=e.attribs.href)&&void 0!==t&&t.startsWith("/api")?"head"===e.name?(0,U.jsx)(Ye,{children:(0,hn.zd)(e.children,g)}):void 0:(0,U.jsx)(l.N_,{className:e.attribs.class,to:e.attribs.href,children:(0,hn.zd)(e.children,g)})}};return(0,r.useEffect)((function(){var r=!0;return(0,A.A)(N().mark((function a(){var c;return N().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n.current(!0),a.next=4,P.getPage(null!=s?s:"");case 4:c=a.sent,r&&(p(c),h(!1)),n.current(!1),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),"NOT_FOUND"===a.t0.code?h(!0):"LOGIN_REQUIRED"===a.t0.code?(t(null),i("/login?redirect=/".concat(encodeURIComponent(s).replace(/%2F/g,"/")))):e.current(a.t0.toString(),!0),n.current(!1);case 13:case"end":return a.stop()}}),a,null,[[0,9]])})))(),function(){r=!1}}),[s,a.key,i,t]),(0,U.jsx)(U.Fragment,{children:u?(0,U.jsx)(xn,{}):(0,hn.Ay)(f,g)})};var fn=t(3540),pn=t(455),gn=t(3399),jn=t(6734),vn=t(3050);t(6929),vn.t1.register(vn.Bs,vn.UA,vn.PP,vn.kc,vn.FN,vn.No,vn.E8,vn.s$);var An=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf","#ddf0ff","#718f94","#ffb400"],bn=["rgba(31, 119, 180, 0.5)","rgba(255, 127, 14, 0.5)","rgba(44, 160, 44, 0.5)","rgba(214, 39, 40, 0.5)","rgba(148, 103, 189, 0.5)","rgba(140, 86, 75, 0.5)","rgba(227, 119, 194, 0.5)","rgba(127, 127, 127, 0.5)","rgba(188, 189, 34, 0.5)","rgba(23, 190, 207, 0.5)","rgba(221, 240, 255, 0.5)","rgba(113, 143, 148, 0.5)","rgba(255, 180, 0, 0.5)"],yn=function(e,n){if(0===n)return"danger";var t=e/n;return t<.33?"danger":t>.66?"success":"warning"};const Nn=function(){var e=(0,r.useContext)(q).user,n=(0,c.g)(),t=sn(),s=t.noFreeze,a=t.appearFrozen,o=(0,r.useState)(),d=(0,b.A)(o,2),u=d[0],h=d[1],x=(0,r.useState)(!1),m=(0,b.A)(x,2),f=m[0],p=m[1],j=(0,r.useState)(""),v=(0,b.A)(j,2),y=v[0],w=v[1],k=(0,r.useState)([]),C=(0,b.A)(k,2),S=C[0],E=C[1],M=(0,r.useState)(-1),L=(0,b.A)(M,2),R=L[0],F=L[1];Ie((0,A.A)(N().mark((function t(){var r,a,i;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e&&e.publicScoreboard||null!=e&&e.logged){t.next=2;break}return t.abrupt("return");case 2:if(!n.id){t.next=9;break}return t.next=5,P.getPlayerPage(Number.parseInt(n.id,10),s);case 5:r=t.sent,h(r),t.next=15;break;case 9:return t.next=11,P.getPlayerPage();case 11:i=t.sent,w(null!==(a=i.nickname)&&void 0!==a?a:""),E(i.customFields),h(i);case 15:case"end":return t.stop()}}),t)}))),[n.id,e,s]);var T,Y,D,O,z,G,H=We((0,A.A)(N().mark((function e(){var n,t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.updatePlayer({nickname:y||null,customFields:S.reduce((function(e,n){return e[n.name]=n.value,e}),{})});case 2:return p(!1),e.next=5,P.getPlayerPage();case 5:n=e.sent,h(n),n.extended&&(w(null!==(t=n.nickname)&&void 0!==t?t:""),E(n.customFields));case 8:case"end":return e.stop()}}),e)}))),[y,S],{title:"Player",successMessage:"Player updated successfully!"}),B=(0,r.useMemo)((function(){if(u&&u.categories){for(var e={data:{labels:[],datasets:[{label:"Solved",backgroundColor:An[0],data:[]},{label:"Not solved",backgroundColor:An[3],data:[]}]},options:{scales:{x:{stacked:!0},y:{stacked:!0}}}},n=0,t=Object.entries(u.categories);n<t.length;n++){var s=(0,b.A)(t[n],2),r=s[0],a=s[1],i=a.solves,c=a.challenges;e.data.datasets[0].data.push(i),e.data.datasets[1].data.push(c-i),e.data.labels.push(r)}return e}}),[u]),V=(0,r.useMemo)((function(){if(u){for(var e={labels:[],datasets:[]},n=Object.entries(u.solves).sort((function(e,n){return e[1].timestamp<n[1].timestamp?-1:1})),t=Array.from(new Set(n.map((function(e){return e[1].section})))),s={},r=0,a=t;r<a.length;r++){var i=a[r];e.datasets.push({label:i,fill:!0,pointBackgroundColor:An[t.indexOf(i)],borderColor:An[t.indexOf(i)],backgroundColor:bn[t.indexOf(i)],borderCapStyle:"butt",data:[]}),s[i]=0}var c,l=(0,I.A)(n);try{for(l.s();!(c=l.n()).done;){var o=c.value;e.labels.push(o[1].timestamp);var d,h=(0,I.A)(t);try{for(h.s();!(d=h.n()).done;){var x=d.value;o[1].section===x&&(s[o[1].section]+=o[1].score),e.datasets[t.indexOf(x)].data.push(s[x])}}catch(e){h.e(e)}finally{h.f()}}}catch(e){l.e(e)}finally{l.f()}return e}}),[u]),Q=(0,r.useMemo)((function(){if(u&&u.categories){for(var e={data:{datasets:[{data:[],backgroundColor:An}],labels:[]},options:{title:{display:!1,text:"Solves by category"},responsive:!0}},n=0,t=Object.entries(u.categories);n<t.length;n++){var s=(0,b.A)(t[n],2),r=s[0],a=s[1].solves;e.data.datasets[0].data.push(a),e.data.labels.push(r)}return e}}),[u]);return u&&V?(T=!0===u.extended?u.name||u.surname?"".concat(u.name," ").concat(u.surname):u.nickname:u.displayedName,(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Ye,{children:(0,U.jsxs)("title",{children:[T," - ",g]})}),(0,U.jsx)("div",{className:"py-5 bg-blue-light text-center text-white",children:(0,U.jsxs)(Me.A,{children:[(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsxs)(Re.A,{xs:12,lg:8,children:[(0,U.jsxs)("h1",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:u.extended?$.Lmx:$.X46})," ",u.guest&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(X.g,{icon:$.Rwe,fixedWidth:!0})," "]}),T]}),u.extended&&(0,U.jsxs)("h4",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.Hzw})," ",u.email]}),u.affiliationName&&(0,U.jsxs)("h4",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.QnR})," ",u.affiliationName]}),u.extended&&(f&&null!=e&&e.logged&&e.canEditNickname?(0,U.jsxs)(Ze.A,{className:"w-50 mx-auto mb-2",children:[(0,U.jsx)(Ze.A.Text,{className:"w-25",children:"Nickname"}),(0,U.jsx)(Z.A.Control,{type:"text",placeholder:"Nickname",value:y,onChange:function(e){return w(e.target.value)}})]}):u.nickname&&(0,U.jsxs)("h3",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.X46})," ",u.nickname]})),null!==u.scoreboardPosition&&(0,U.jsxs)("h4",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.Tsj})," Position:"," ",(Y=u.scoreboardPosition+1,D=new Intl.PluralRules("en-US",{type:"ordinal"}),O=new Map([["one","st"],["two","nd"],["few","rd"],["other","th"]]),z=D.select(Y),G=O.get(z),"".concat(Y).concat(G))]}),u.extended?f&&null!=e&&e.logged?(0,U.jsx)(U.Fragment,{children:S.map((function(e,n){return e.editable&&(0,U.jsxs)(Ze.A,{className:"w-50 mx-auto mb-1 e",size:"sm",children:[(0,U.jsx)(Ze.A.Text,{className:"w-25",children:e.name}),"text"===e.type?(0,U.jsx)(Z.A.Control,{type:"text",placeholder:e.name,value:e.value,onChange:function(t){S.splice(n,1,(0,W.A)((0,W.A)({},e),{},{value:t.target.value})),E((0,i.A)(S))}}):"choice"===e.type?(0,U.jsxs)(Z.A.Select,{value:e.value,onChange:function(t){S.splice(n,1,(0,W.A)((0,W.A)({},e),{},{value:t.target.value})),E((0,i.A)(S))},children:[!e.required&&(0,U.jsx)("option",{value:"",children:"Select an option"},"__EMPTY__"),e.choices.map((function(e){return(0,U.jsx)("option",{value:e,children:e},e)}))]}):(0,U.jsx)(U.Fragment,{})]},e.name)}))}):(0,U.jsx)(U.Fragment,{children:u.customFields.map((function(e){return(0,U.jsxs)("h5",{children:[e.name,": ",e.value]},e.name)}))}):(0,U.jsx)(U.Fragment,{children:Object.entries(u.customFields).map((function(e){var n=(0,b.A)(e,2),t=n[0],s=n[1];return(0,U.jsxs)("h5",{children:[t,": ",s]},t)}))}),(0,U.jsxs)("div",{children:[!n.id&&(null==e?void 0:e.logged)&&u.extended&&(!!u.customFields.find((function(e){return e.editable}))||e.canEditNickname)&&(f?(0,U.jsxs)(_.A,{variant:"success",size:"sm",className:"mb-2 mt-1",onClick:function(){return H()},children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.hSh})," Save"]}):(0,U.jsxs)(_.A,{variant:"primary",size:"sm",className:"mb-2",onClick:function(){return p(!0)},children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.MT7})," Edit"]})),!n.id&&(null==e?void 0:e.logged)&&e.passwordRecoveryAllowed&&(0,U.jsx)(l.N_,{to:"/password-recovery",children:(0,U.jsxs)(_.A,{variant:"primary",size:"sm",className:"mb-2 ms-2",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.aAJ})," Reset password"]})})]}),(0,U.jsxs)("h5",{children:[(0,U.jsx)(Oe.A,{placement:"top",overlay:(0,U.jsx)(ze.A,{id:"tooltipPoints",children:"Solved challenges"}),children:(0,U.jsxs)(_e.A,{bg:"primary",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.s6x})," ",u.correctSubmissions]})})," ",(0,U.jsx)(Oe.A,{placement:"top",overlay:(0,U.jsx)(ze.A,{id:"tooltipPoints",children:"Total score"}),children:(0,U.jsxs)(_e.A,{bg:"danger",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.iHh})," ",u.score]})})]})]})}),e.logged&&"ADMIN"===e.group&&(0,U.jsx)(Le.A,{className:"justify-content-center mt-3",children:(0,U.jsx)(Re.A,{xs:12,lg:8,children:(0,U.jsx)(l.N_,{to:"/admin/users/".concat(n.id),children:(0,U.jsxs)(_.A,{variant:"secondary",className:"text-nowrap",children:[(0,U.jsx)(X.g,{icon:$.MT7})," Edit user"]})})})})]})}),u.gamePause.paused&&"before-start"===u.gamePause.reason?(0,U.jsx)(Me.A,{className:"py-5 text-center",children:(0,U.jsx)(Pe.A,{variant:"warning",className:"mb-0",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.APi})," The competition hasn't started yet"," ",(0,U.jsx)(X.g,{icon:$.APi})]})})}):(0,U.jsxs)(U.Fragment,{children:[u.categories&&Q&&B&&(0,U.jsx)("div",{className:"py-5 bg-body text-center",children:(0,U.jsxs)(Me.A,{children:[(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsx)(Re.A,{xs:12,lg:8,children:(0,U.jsxs)("h3",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.W1p})," Statistics by category"]})})}),(0,U.jsxs)(Le.A,{className:"justify-content-center align-items-center",children:[(0,U.jsx)(Re.A,{xs:12,lg:6,className:"mt-3",children:(0,U.jsx)(jn.nu,{data:Q.data,options:Q.options,className:"p-5 m-auto"})}),(0,U.jsx)(Re.A,{xs:12,lg:6,className:"mt-3",children:(0,U.jsx)(jn.yP,{data:B.data,options:B.options})})]})]})}),u.extended&&(0,U.jsxs)("div",{className:"py-5 bg-body",children:[(0,U.jsx)(Me.A,{children:(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsx)(Re.A,{xs:12,lg:10,children:(0,U.jsxs)("h3",{className:"text-center",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.wM0})," Statistics by event"]})})})}),(0,U.jsx)(Me.A,{children:(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsxs)(Re.A,{xs:12,lg:10,children:[(0,U.jsx)("h5",{className:"text-center mt-3",children:"Score over time"}),(0,U.jsx)(jn.N1,{data:V,options:{elements:{point:{radius:0}},scales:{x:{stacked:!0,type:"time",title:{display:!0},grid:{lineWidth:2},time:{unit:"day",stepSize:1,displayFormats:{millisecond:"DD/MM/YYYY",second:"DD/MM/YYYY",minute:"DD/MM/YYYY",hour:"DD/MM/YYYY",day:"DD/MM/YYYY",week:"DD/MM/YYYY",month:"DD/MM/YYYY",quarter:"DD/MM/YYYY",year:"DD/MM/YYYY"}}},y:{stacked:!0}}}})]})})}),u.events&&(0,U.jsx)(Me.A,{children:(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsxs)(Re.A,{xs:12,lg:10,children:[(0,U.jsx)("h5",{className:"text-center mt-3",children:"Solves percentages"}),u.events.map((function(e,n){return(0,U.jsxs)(fn.A,{className:"mt-3",children:[(0,U.jsxs)(pn.A,{className:"bg-blue-light text-white cursor-pointer",onClick:function(){return F(n===R?-1:n)},children:[(0,U.jsxs)("h5",{className:"m-0",children:[n===R?(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.xbI,className:"mr-2"}):(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.jkA,className:"mr-2"})," ",e.name,(0,U.jsx)("span",{className:"float-end",children:"".concat(e.solves,"/").concat(e.challenges," (").concat((100*e.solves/e.challenges).toFixed(2),"%)")})]}),(0,U.jsx)(gn.A,{className:"font-weight-bold mt-2 w-100",variant:yn(e.solves,e.challenges),now:e.solves/e.challenges*100})]}),R===n&&e.sections.map((function(e,t){return(0,U.jsxs)(pn.A,{children:[(0,U.jsxs)("h6",{className:"m-0",children:[e.name,(0,U.jsx)("span",{className:"float-end",children:"".concat(e.solves,"/").concat(e.challenges," (").concat((100*e.solves/e.challenges).toFixed(2),"%)")})]}),(0,U.jsx)(gn.A,{className:"font-weight-bold mt-2 w-100",variant:yn(e.solves,e.challenges),now:e.solves/e.challenges*100})]},"".concat(n,"-").concat(t))}))]},n)}))]})})})]}),(0,U.jsx)("div",{className:"py-5 bg-body text-center",children:(0,U.jsxs)(Me.A,{children:[(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsx)(Re.A,{xs:12,lg:8,children:(0,U.jsxs)("h3",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.s6x})," Solves"]})})}),(0,U.jsx)(Le.A,{className:"mt-3 table-responsive text-start table-overflow",children:(0,U.jsx)(Re.A,{xs:12,children:(0,U.jsxs)($e.A,{striped:!0,className:"text-nowrap",children:[(0,U.jsx)("thead",{children:(0,U.jsxs)("tr",{children:[(0,U.jsx)("th",{className:"align-middle",children:"Timestamp"}),(0,U.jsx)("th",{className:"align-middle",children:"Challenge"}),(0,U.jsx)("th",{className:"align-middle",children:"Score"})]})}),(0,U.jsx)("tbody",{children:u.solves.map((function(e,n){return(0,U.jsxs)("tr",{children:[(0,U.jsxs)("td",{className:"align-middle",children:[Ge()(e.timestamp).format("YYYY-MM-DD HH:mm:ss"),a(u.gameFreeze,new Date(e.timestamp).getTime())&&(0,U.jsxs)(U.Fragment,{children:[" ",(0,U.jsx)(X.g,{icon:$.Wkq,fixedWidth:!0})]})]}),(0,U.jsx)("td",{className:"align-middle",children:(0,U.jsx)(l.N_,{to:"/challenges#challenge-".concat(e.challengeId),children:e.challengeTitle})}),(0,U.jsx)("td",{className:"align-middle",children:e.score})]},n)}))})]})})})]})}),(0,U.jsx)("div",{className:"py-5 bg-body text-center",children:(0,U.jsxs)(Me.A,{children:[(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsx)(Re.A,{xs:12,lg:8,children:(0,U.jsxs)("h3",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.wRm})," Hints"]})})}),(0,U.jsx)(Le.A,{className:"mt-3 table-responsive text-start table-overflow",children:(0,U.jsx)(Re.A,{xs:12,children:(0,U.jsxs)($e.A,{striped:!0,className:"text-nowrap",children:[(0,U.jsx)("thead",{children:(0,U.jsxs)("tr",{children:[(0,U.jsx)("th",{className:"align-middle",children:"Timestamp"}),(0,U.jsx)("th",{className:"align-middle",children:"Challenge"}),(0,U.jsx)("th",{className:"align-middle",children:"Hint"}),(0,U.jsx)("th",{className:"align-middle",children:"Cost"})]})}),(0,U.jsx)("tbody",{children:u.hints.map((function(e,n){return(0,U.jsxs)("tr",{children:[(0,U.jsxs)("td",{className:"align-middle",children:[Ge()(e.timestamp).format("YYYY-MM-DD HH:mm:ss"),a(u.gameFreeze,new Date(e.timestamp).getTime())&&(0,U.jsxs)(U.Fragment,{children:[" ",(0,U.jsx)(X.g,{icon:$.Wkq,fixedWidth:!0})]})]}),(0,U.jsx)("td",{className:"align-middle",children:(0,U.jsx)(l.N_,{to:"/challenges#challenge-".concat(e.challengeId),children:e.challengeTitle})}),(0,U.jsx)("td",{className:"align-middle",children:e.hintTitle}),(0,U.jsx)("td",{className:"align-middle",children:e.cost})]},n)}))})]})})})]})}),u.extended&&((null==e?void 0:e.logged)&&e.writeupsEnabled||u.writeups.length>0)&&(0,U.jsx)("div",{className:"py-5 bg-body text-center",children:(0,U.jsxs)(Me.A,{children:[(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsx)(Re.A,{xs:12,lg:8,children:(0,U.jsxs)("h3",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.LBj})," Writeups"]})})}),(0,U.jsx)(Le.A,{className:"mt-3 table-responsive text-start table-overflow",children:(0,U.jsx)(Re.A,{xs:12,children:(0,U.jsxs)($e.A,{striped:!0,className:"text-nowrap",children:[(0,U.jsx)("thead",{children:(0,U.jsxs)("tr",{children:[(0,U.jsx)("th",{className:"align-middle",children:"Title"}),(0,U.jsx)("th",{className:"align-middle",children:"Timestamp"}),(0,U.jsx)("th",{className:"align-middle",children:"Challenge"})]})}),(0,U.jsx)("tbody",{children:u.writeups.map((function(e,n){return(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{className:"align-middle",children:(0,U.jsx)(l.N_,{to:"/writeup/".concat(e.id),children:e.title})}),(0,U.jsx)("td",{className:"align-middle",children:Ge()(e.timestamp).format("YYYY-MM-DD HH:mm:ss")}),(0,U.jsx)("td",{className:"align-middle",children:(0,U.jsx)(l.N_,{to:"/challenges#challenge-".concat(e.challengeId),children:e.challengeTitle})})]},n)}))})]})})})]})})]})]})):(0,U.jsx)(U.Fragment,{})};var wn=t(4467),kn=t(1461),Cn=t(1141),Sn=100;const Wn=function(e){var n=e.scoreboard,t=e.searchContent,s=e.onlyStarred,a=e.highlightedId,c=e.searchOptions,o=(0,r.useState)("place"),d=(0,b.A)(o,2),u=d[0],h=d[1],x=(0,r.useState)((function(){return(localStorage.getItem("starredUsers")||"").split(" ")})),m=(0,b.A)(x,2),f=m[0],p=m[1],g=(0,r.useState)(void 0),j=(0,b.A)(g,2),v=j[0],A=j[1],y=(0,r.useMemo)((function(){for(var e=(0,i.A)(n),r=0;r<e.length;r++)e[r].place=r+1;var c=e;t.length>0&&(c=c.filter((function(e){return e.displayedName.toLowerCase().includes(t)}))),s&&(c=c.filter((function(e){return f.includes(e.id.toString())}))),c.sort((function(e,n){var t,s,r,a,i,c,l,o,d=0;switch(u){case"place":d=(null!==(t=e.place)&&void 0!==t?t:0)-(null!==(s=n.place)&&void 0!==s?s:0);break;case"-place":d=-((null!==(r=e.place)&&void 0!==r?r:0)-(null!==(a=n.place)&&void 0!==a?a:0));break;case"score":d=e.score-n.score;break;case"-score":d=-(e.score-n.score);break;case"affiliation":d=(null!==(i=e.affiliationName)&&void 0!==i?i:"")<(null!==(c=n.affiliationName)&&void 0!==c?c:"")?-1:1;break;case"-affiliation":d=-((null!==(l=e.affiliationName)&&void 0!==l?l:"")<(null!==(o=n.affiliationName)&&void 0!==o?o:"")?-1:1);break;case"user":d=e.displayedName<n.displayedName?-1:1;break;case"-user":d=-(e.displayedName<n.displayedName?-1:1)}return d}));var l,o=Math.ceil(c.length/Sn);l=void 0!==v&&v<o?v:0;var d=c.slice(l*Sn,(l+1)*Sn);if(void 0!==a){var h=c.findIndex((function(e){return e.id===a}));-1!==h&&(h<l*Sn?d.unshift(c[h]):h>=(l+1)*Sn&&d.push(c[h]))}return[d,l,o]}),[u,t,n,s,f,a,v]),N=(0,b.A)(y,3),w=N[0],k=N[1],C=N[2];return(0,U.jsx)("div",{className:"py-5 bg-body text-start",children:(0,U.jsxs)(Me.A,{children:[(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsx)(Re.A,{xs:12,className:"table-responsive",children:(0,U.jsxs)($e.A,{striped:!0,bordered:!0,hover:!0,className:"m-0 text-nowrap",children:[(0,U.jsx)("thead",{children:(0,U.jsxs)("tr",{children:[(0,U.jsx)("th",{className:"text-center align-middle",children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.yy,className:s?"text-gold":"text-silver"})}),(0,U.jsxs)("th",{className:"align-middle cursor-pointer",onClick:function(){h("place"===u?"-place":"place")},children:["Place"," ",(0,U.jsx)(X.g,{fixedWidth:!0,className:u.includes("place")?"text-primary":"",icon:u.includes("place")?u.includes("-")?$.Dvs:$.Ync:$.OM7})]}),(0,U.jsxs)("th",{className:"align-middle cursor-pointer",onClick:function(){h("score"===u?"-score":"score")},children:["Score"," ",(0,U.jsx)(X.g,{fixedWidth:!0,className:u.includes("score")?"text-primary":"",icon:u.includes("score")?u.includes("-")?$.Dvs:$.Ync:$.OM7})]}),(0,U.jsxs)("th",{className:"align-middle cursor-pointer",onClick:function(){h("user"===u?"-user":"user")},children:["User"," ",(0,U.jsx)(X.g,{fixedWidth:!0,className:u.includes("user")?"text-primary":"",icon:u.includes("user")?u.includes("-")?$.Dvs:$.Ync:$.OM7})]}),n.length>0&&n[0].affiliationName&&(0,U.jsxs)("th",{className:"align-middle cursor-pointer",onClick:function(){h("affiliation"===u?"-affiliation":"affiliation")},children:["Affiliation"," ",(0,U.jsx)(X.g,{fixedWidth:!0,className:u.includes("affiliation")?"text-primary":"",icon:u.includes("affiliation")?u.includes("-")?$.Dvs:$.Ync:$.OM7})]}),Object.keys(c.customFields).map((function(e){return(0,U.jsx)("th",{className:"align-middle",children:e},"custom_"+e)}))]})}),(0,U.jsx)("tbody",{children:w.map((function(e){return(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{className:"align-middle text-center cursor-pointer"+(e.id===a?" bg-primary-subtle":""),onClick:function(){var n=e.id.toString(),t=f.includes(n),s=(0,i.A)(f);t?s=s.filter((function(e){return e!==n})):s.push(n),localStorage.setItem("starredUsers",s.join(" ")),p(s)},children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.yy,className:f.includes(e.id.toString())?"text-gold":"text-silver"})}),(0,U.jsx)("td",{className:"align-middle"+(e.id===a?" bg-primary-subtle":""),children:e.place}),(0,U.jsx)("td",{className:"align-middle"+(e.id===a?" bg-primary-subtle":""),children:e.score}),(0,U.jsxs)("td",{className:"align-middle"+(e.id===a?" bg-primary-subtle":""),children:[(0,U.jsx)(l.N_,{to:"/player/".concat(e.id),children:e.displayedName})," ",e.guest&&(0,U.jsx)(Oe.A,{placement:"top",overlay:(0,U.jsx)(ze.A,{children:"Guest"}),children:(0,U.jsx)(X.g,{icon:$.Rwe,fixedWidth:!0})})]}),e.affiliationName&&(0,U.jsx)("td",{className:"align-middle"+(e.id===a?" bg-primary-subtle":""),children:e.affiliationName}),Object.keys(c.customFields).map((function(n){return(0,U.jsx)("td",{className:"align-middle"+(e.id===a?" bg-primary-subtle":""),children:e.customFields[n]},"custom_"+n)}))]},e.id)}))})]})})}),(0,U.jsxs)(Le.A,{className:"justify-content-center",children:[(0,U.jsx)(Re.A,{xs:6,md:2,className:"mt-3",children:(0,U.jsxs)(_.A,{className:"w-100",onClick:function(){return A(0)},children:[(0,U.jsx)(X.g,{icon:$.v2M})," First"]})}),(0,U.jsx)(Re.A,{xs:6,md:2,className:"mt-3",children:(0,U.jsxs)(_.A,{className:"w-100",onClick:function(){return A(Math.max(0,k-1))},children:[(0,U.jsx)(X.g,{icon:$.L4I})," Previous"]})}),(0,U.jsx)(Re.A,{xs:12,md:2,className:"mt-3",children:(0,U.jsx)(Z.A.Select,{className:"text-center",value:k,onChange:function(e){return A(parseInt(e.target.value))},children:Array.from({length:C},(function(e,n){return n})).map((function(e){return(0,U.jsx)("option",{value:e,children:e+1},e)}))})}),(0,U.jsx)(Re.A,{xs:6,md:2,className:"mt-3",children:(0,U.jsxs)(_.A,{className:"w-100",onClick:function(){return A(Math.min(C-1,k+1))},children:["Next ",(0,U.jsx)(X.g,{icon:$.BxI})]})}),(0,U.jsx)(Re.A,{xs:6,md:2,className:"mt-3",children:(0,U.jsxs)(_.A,{className:"w-100",onClick:function(){return A(C-1)},children:["Last ",(0,U.jsx)(X.g,{icon:$.byU})]})})]})]})})};var In=100,En=function(e){var n,t=e.solve;return t?(n=t.firstBlood?(0,U.jsx)("svg",{className:"svg-inline--fa fa-w-18 text-danger",children:(0,U.jsx)("use",{xlinkHref:"#icon-flag"})}):(0,U.jsx)("svg",{className:"svg-inline--fa fa-w-18",children:(0,U.jsx)("use",{xlinkHref:"#icon-flag"})}),(0,U.jsx)(Oe.A,{placement:"bottom",overlay:(0,U.jsxs)(ze.A,{children:[t.score," points",(0,U.jsx)("br",{}),Ge()(t.timestamp).format("YYYY-MM-DD HH:mm:ss")]}),children:n})):(0,U.jsx)("svg",{className:"svg-inline--fa fa-w-18 text-black opacity-20",children:(0,U.jsx)("use",{xlinkHref:"#icon-flag"})})};const Mn=function(e){var n=e.scoreboard,t=e.searchContent,s=e.onlyStarred,a=e.highlightedId,o=e.searchOptions,d=(0,c.zy)(),u=(0,r.useState)("place"),h=(0,b.A)(u,2),x=h[0],m=h[1],f=(0,r.useState)((function(){return(localStorage.getItem("starredUsers")||"").split(" ")})),p=(0,b.A)(f,2),g=p[0],j=p[1],v=(0,r.useState)(void 0),y=(0,b.A)(v,2),w=y[0],k=y[1],C=(0,r.useState)([]),S=(0,b.A)(C,2),W=S[0],I=S[1];Ie((0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=I,e.next=3,P.getChallengeScoreboard();case 3:if(e.t1=e.sent.events,e.t1){e.next=6;break}e.t1=[];case 6:e.t2=e.t1,(0,e.t0)(e.t2);case 8:case"end":return e.stop()}}),e)}))),[]);var E=(0,r.useMemo)((function(){if(!W)return[];var e=new URLSearchParams(d.search).get("event")||"-1",n=new URLSearchParams(d.search).get("section")||"-1";return W.filter((function(n){return"-1"===e||parseInt(e)===n.id})).flatMap((function(e){return e.sections})).filter((function(e){return"-1"===n||parseInt(n)===e.id})).filter((function(e){return e.challenges.length>0}))}),[W,d.search]),M=(0,r.useMemo)((function(){for(var e=(0,i.A)(n),r=0;r<e.length;r++)e[r].place=r+1;var c=e;t.length>0&&(c=c.filter((function(e){return e.displayedName.toLowerCase().includes(t)}))),s&&(c=c.filter((function(e){return g.includes(e.id.toString())}))),c.sort((function(e,n){var t,s,r,a,i,c,l,o,d=0;switch(x){case"place":d=(null!==(t=e.place)&&void 0!==t?t:0)-(null!==(s=n.place)&&void 0!==s?s:0);break;case"-place":d=-((null!==(r=e.place)&&void 0!==r?r:0)-(null!==(a=n.place)&&void 0!==a?a:0));break;case"score":d=e.score-n.score;break;case"-score":d=-(e.score-n.score);break;case"affiliation":d=(null!==(i=e.affiliationName)&&void 0!==i?i:"")<(null!==(c=n.affiliationName)&&void 0!==c?c:"")?-1:1;break;case"-affiliation":d=-((null!==(l=e.affiliationName)&&void 0!==l?l:"")<(null!==(o=n.affiliationName)&&void 0!==o?o:"")?-1:1);break;case"user":d=e.displayedName<n.displayedName?-1:1;break;case"-user":d=-(e.displayedName<n.displayedName?-1:1)}return d}));var l,o=Math.ceil(c.length/In);l=void 0!==w&&w<o?w:0;var d=c.slice(l*In,(l+1)*In);if(void 0!==a){var u=c.findIndex((function(e){return e.id===a}));-1!==u&&(u<l*In?d.unshift(c[u]):u>=(l+1)*In&&d.push(c[u]))}return[d,l,o]}),[x,t,n,s,g,a,w]),L=(0,b.A)(M,3),R=L[0],F=L[1],T=L[2];return(0,U.jsxs)("div",{className:"py-5 px-lg-5 bg-body text-start",children:[(0,U.jsx)(X.g,{icon:$.yy,symbol:"icon-star"}),(0,U.jsx)(X.g,{icon:$.s6x,symbol:"icon-flag"}),(0,U.jsxs)(Me.A,{fluid:!0,children:[(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsx)(Re.A,{xs:12,children:(0,U.jsxs)($e.A,{striped:!0,hover:!0,responsive:!0,className:"m-0 text-nowrap",children:[(0,U.jsxs)("thead",{children:[(0,U.jsxs)("tr",{children:[(0,U.jsx)("th",{rowSpan:2,children:(0,U.jsx)("div",{className:"text-center",children:(0,U.jsx)("svg",{className:"svg-inline--fa fa-w-18 fa-fw ".concat(s?"text-gold":"text-silver"),children:(0,U.jsx)("use",{xlinkHref:"#icon-star"})})})}),(0,U.jsx)("th",{rowSpan:2,children:(0,U.jsxs)("div",{className:"cursor-pointer",onClick:function(){m("place"===x?"-place":"place")},children:["Place"," ",(0,U.jsx)(X.g,{fixedWidth:!0,className:x.includes("place")?"text-primary":"",icon:x.includes("place")?x.includes("-")?$.Dvs:$.Ync:$.OM7})]})}),(0,U.jsx)("th",{rowSpan:2,children:(0,U.jsxs)("div",{className:"cursor-pointer",onClick:function(){m("score"===x?"-score":"score")},children:["Score"," ",(0,U.jsx)(X.g,{fixedWidth:!0,className:x.includes("score")?"text-primary":"",icon:x.includes("score")?x.includes("-")?$.Dvs:$.Ync:$.OM7})]})}),(0,U.jsx)("th",{rowSpan:2,children:(0,U.jsxs)("div",{className:"cursor-pointer",onClick:function(){m("user"===x?"-user":"user")},children:["User"," ",(0,U.jsx)(X.g,{fixedWidth:!0,className:x.includes("user")?"text-primary":"",icon:x.includes("user")?x.includes("-")?$.Dvs:$.Ync:$.OM7})]})}),n.length>0&&n[0].affiliationName&&(0,U.jsx)("th",{rowSpan:2,children:(0,U.jsxs)("div",{className:"cursor-pointer",onClick:function(){m("affiliation"===x?"-affiliation":"affiliation")},children:["Affiliation"," ",(0,U.jsx)(X.g,{fixedWidth:!0,className:x.includes("affiliation")?"text-primary":"",icon:x.includes("affiliation")?x.includes("-")?$.Dvs:$.Ync:$.OM7})]})}),Object.keys(o.customFields).map((function(e){return(0,U.jsx)("th",{rowSpan:2,children:e},"custom_"+e)})),E.flatMap((function(e){return e.challenges})).map((function(e){return(0,U.jsx)("th",{rowSpan:1,children:(0,U.jsx)("div",{style:{transform:"translate(16px, 0) rotate(-45deg)",transformOrigin:"bottom left"},children:(0,U.jsx)("span",{style:{writingMode:"vertical-rl"},children:e.title})})},e.id)}))]}),(0,U.jsx)("tr",{children:E.map((function(e,n,t){return(0,U.jsx)("th",{colSpan:e.challenges.length,className:"text-center"+(n===t.length-1?"":" border-end"),children:e.name},e.id)}))})]}),(0,U.jsx)("tbody",{children:R.map((function(e){return(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{className:"align-middle text-center cursor-pointer"+(e.id===a?" bg-primary-subtle":""),onClick:function(){var n=e.id.toString(),t=g.includes(n),s=(0,i.A)(g);t?s=s.filter((function(e){return e!==n})):s.push(n),localStorage.setItem("starredUsers",s.join(" ")),j(s)},children:(0,U.jsx)("svg",{className:"svg-inline--fa fa-w-18 fa-fw ".concat(g.includes(e.id.toString())?"text-gold":"text-silver"),children:(0,U.jsx)("use",{xlinkHref:"#icon-star"})})}),(0,U.jsx)("td",{className:"align-middle"+(e.id===a?" bg-primary-subtle":""),children:e.place}),(0,U.jsx)("td",{className:"align-middle"+(e.id===a?" bg-primary-subtle":""),children:e.score}),(0,U.jsxs)("td",{className:"align-middle"+(e.id===a?" bg-primary-subtle":""),children:[(0,U.jsx)(l.N_,{to:"/player/".concat(e.id),children:e.displayedName})," ",e.guest&&(0,U.jsx)(Oe.A,{placement:"top",overlay:(0,U.jsx)(ze.A,{children:"Guest"}),children:(0,U.jsx)(X.g,{icon:$.Rwe,fixedWidth:!0})})]}),e.affiliationName&&(0,U.jsx)("td",{className:"align-middle"+(e.id===a?" bg-primary-subtle":""),children:e.affiliationName}),Object.keys(o.customFields).map((function(n){return(0,U.jsx)("td",{className:"align-middle"+(e.id===a?" bg-primary-subtle":""),children:e.customFields[n]},"custom_"+n)})),E.map((function(n,t,s){var r=t===s.length-1;return n.challenges.map((function(n,t,s){var i=t===s.length-1;return(0,U.jsx)("td",{className:"text-center"+(i&&!r?" border-end":"")+(e.id===a?" bg-primary-subtle":""),children:(0,U.jsx)(En,{solve:e.solves[n.id]})},n.id)}))}))]},e.id)}))})]})})}),(0,U.jsxs)(Le.A,{className:"justify-content-center",children:[(0,U.jsx)(Re.A,{xs:6,md:2,className:"mt-3",children:(0,U.jsxs)(_.A,{className:"w-100",onClick:function(){return k(0)},children:[(0,U.jsx)(X.g,{icon:$.v2M})," First"]})}),(0,U.jsx)(Re.A,{xs:6,md:2,className:"mt-3",children:(0,U.jsxs)(_.A,{className:"w-100",onClick:function(){return k(Math.max(0,F-1))},children:[(0,U.jsx)(X.g,{icon:$.L4I})," Previous"]})}),(0,U.jsx)(Re.A,{xs:12,md:2,className:"mt-3",children:(0,U.jsx)(Z.A.Select,{className:"text-center",value:F,onChange:function(e){return k(parseInt(e.target.value))},children:Array.from({length:T},(function(e,n){return n})).map((function(e){return(0,U.jsx)("option",{value:e,children:e+1},e)}))})}),(0,U.jsx)(Re.A,{xs:6,md:2,className:"mt-3",children:(0,U.jsxs)(_.A,{className:"w-100",onClick:function(){return k(Math.min(T-1,F+1))},children:["Next ",(0,U.jsx)(X.g,{icon:$.BxI})]})}),(0,U.jsx)(Re.A,{xs:6,md:2,className:"mt-3",children:(0,U.jsxs)(_.A,{className:"w-100",onClick:function(){return k(T-1)},children:["Last ",(0,U.jsx)(X.g,{icon:$.byU})]})})]})]})]})};var Ln=t(1960);const Rn=function(){var e=sn().noFreeze,n=(0,r.useState)(),t=(0,b.A)(n,2),s=t[0],a=t[1];Ie((0,A.A)(N().mark((function n(){return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=a,n.next=3,P.getScoreboardChart(e);case 3:n.t1=n.sent,(0,n.t0)(n.t1);case 5:case"end":return n.stop()}}),n)}))),[e]);var i=(0,r.useMemo)((function(){var e={datasets:[]};if(!s||0===s.time.length)return e;for(var n=0,t=Object.entries(s.players);n<t.length;n++){var r=(0,b.A)(t[n],2)[1];e.datasets.push({label:r.displayedName,data:r.scores.map((function(e,n){return{x:s.time[n],y:e}}))})}for(var a=(0,Ln.A)({count:e.datasets.length,lightMin:60}),i=0;i<e.datasets.length;i++)e.datasets[i].borderColor=a[i].css();return e}),[s]),c="dark"===te();return 0===i.datasets.length?(0,U.jsx)(U.Fragment,{}):(0,U.jsx)("div",{className:"py-3 text-center",children:(0,U.jsx)(Me.A,{children:(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsx)(Re.A,{xs:12,lg:10,children:(0,U.jsx)(jn.N1,{data:i,options:{aspectRatio:2.5,color:c?"#fff":"#666",borderColor:c?"#fff":"#666",backgroundColor:"rgba(0, 0, 0, 0)",plugins:{legend:{labels:{usePointStyle:!0,pointStyle:"line"}}},elements:{point:{radius:0}},datasets:{line:{cubicInterpolationMode:"monotone",borderWidth:2,fill:!1}},scales:{x:{type:"time",title:{display:!0},grid:{color:c?"rgba(255, 255, 255, .1)":"rgba(0, 0, 0, .1)"},ticks:{color:c?"rgba(255, 255, 255, .3)":"rgba(0, 0, 0, .5)"}},y:{grid:{color:c?"rgba(255, 255, 255, .1)":"rgba(0, 0, 0, .1)"},ticks:{color:c?"rgba(255, 255, 255, .3)":"rgba(0, 0, 0, .5)"}}}}})})})})})},Fn=function(){var e,n=(0,r.useContext)(q).user,t=(0,c.Zp)(),s=(0,c.zy)(),a=sn(),i=a.noFreeze,l=a.setNoFreeze,o=a.appearFrozen,d=(0,r.useState)(),u=(0,b.A)(d,2),h=u[0],x=u[1],m=(0,r.useState)({affiliations:[],events:[],customFields:{}}),f=(0,b.A)(m,2),p=f[0],j=f[1],v=(0,r.useState)(""),y=(0,b.A)(v,2),w=y[0],k=y[1],C=(0,r.useState)("-1"),S=(0,b.A)(C,2),E=S[0],M=S[1],L=(0,r.useState)("-1"),R=(0,b.A)(L,2),F=R[0],T=R[1],Y=(0,r.useState)("-1"),D=(0,b.A)(Y,2),O=D[0],z=D[1],G=(0,r.useState)({}),H=(0,b.A)(G,2),B=H[0],V=H[1],Q=(0,r.useState)((function(){return"1"===localStorage.getItem("onlyStarred")})),K=(0,b.A)(Q,2),J=K[0],ee=K[1],ne=(0,r.useState)(),te=(0,b.A)(ne,2),se=te[0],re=te[1],ae=(0,r.useState)(),ie=(0,b.A)(ae,2),ce=ie[0],le=ie[1],oe=(0,r.useState)((function(){return"1"===localStorage.getItem("scoreboardTable")})),de=(0,b.A)(oe,2),ue=de[0],he=de[1],xe=We((0,A.A)(N().mark((function e(){var t,r,a,c,l,o,d,u,h,m,f,p;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={noFreeze:i},r=new URLSearchParams(s.search),a=r.get("venue")||"-1",c=r.get("event")||"-1",l=r.get("section")||"-1","-1"!==a&&(t.affiliation=Number.parseInt(a)),"-1"!==l?t.section=Number.parseInt(l):"-1"!==c&&(t.event=Number.parseInt(c)),o=0,d=Array.from(r);case 5:if(!(o<d.length)){e.next=13;break}if(u=(0,b.A)(d[o],2),h=u[0],m=u[1],h.startsWith("custom_")&&m){e.next=9;break}return e.abrupt("continue",10);case 9:t[h]=m;case 10:o++,e.next=5;break;case 13:if(!ue||null==n||!n.tableScoreboard){e.next=21;break}return e.next=16,P.getScoreboardTable(t);case 16:f=e.sent,le(f),x(f.gameFreeze),e.next=26;break;case 21:return e.next=23,P.getScoreboard(t);case 23:p=e.sent,re(p),x(p.gameFreeze);case 26:case"end":return e.stop()}}),e)}))),[s.search,ue,n,i]),me=(0,r.useCallback)((function(e){var t=new URLSearchParams({format:e,token:P.token||"",download:""}),r=new URLSearchParams(s.search),a=r.get("venue")||"-1",i=r.get("event")||"-1",c=r.get("section")||"-1";"-1"!==a&&t.set("affiliation",a),"-1"!==i&&t.set("event",i),"-1"!==c&&t.set("section",c);for(var l=0,o=Array.from(r);l<o.length;l++){var d=(0,b.A)(o[l],2),u=d[0],h=d[1];u.startsWith("custom_")&&h&&t.set(u,h)}var x=document.createElement("a");ue&&null!=n&&n.tableScoreboard?x.href="/api/scoreboard/table/export?"+t.toString():x.href="/api/scoreboard/export?"+t.toString(),document.body.appendChild(x),x.click(),document.body.removeChild(x)}),[s.search,ue,n]),fe=(0,r.useCallback)((function(){var e="/scoreboard?";"-1"!==E&&(e+="venue=".concat(Number.parseInt(E),"&")),"-1"!==F&&(e+="event=".concat(Number.parseInt(F),"&")),"-1"!==O&&(e+="section=".concat(Number.parseInt(O),"&"));for(var n=0,r=Object.entries(B);n<r.length;n++){var a=(0,b.A)(r[n],2),i=a[0],c=a[1];c&&(e+="custom_".concat(encodeURIComponent(i),"=").concat(encodeURIComponent(c),"&"))}s.pathname+s.search!==e.slice(0,-1)&&t(e.slice(0,-1),{replace:!0})}),[F,O,E,B,s.pathname,s.search,t]);if(Ie((0,A.A)(N().mark((function e(){var t,r,a,i,c,l,o,d,u,h;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=n&&n.publicScoreboard||null!=n&&n.logged){e.next=2;break}return e.abrupt("return");case 2:return e.t0=j,e.next=5,P.getScoreboardSearchParams();case 5:e.t1=e.sent,(0,e.t0)(e.t1),i=new URLSearchParams(s.search),M(null!==(t=i.get("venue"))&&void 0!==t?t:"-1"),T(null!==(r=i.get("event"))&&void 0!==r?r:"-1"),z(null!==(a=i.get("section"))&&void 0!==a?a:"-1"),c={},l=0,o=Array.from(i);case 13:if(!(l<o.length)){e.next=21;break}if(d=(0,b.A)(o[l],2),u=d[0],h=d[1],u.startsWith("custom_")&&h){e.next=17;break}return e.abrupt("continue",18);case 17:c[u.slice(7)]=h;case 18:l++,e.next=13;break;case 21:V(c),xe();case 23:case"end":return e.stop()}}),e)}))),[s.search,n,xe]),!(null!=n&&n.publicScoreboard||null!=n&&n.logged))return t("/login?redirect=/scoreboard"),(0,U.jsx)(U.Fragment,{});if("-1"!==F){var pe,ge=p.events.find((function(e){return e.id===Number.parseInt(F)}));e=null!==(pe=null==ge?void 0:ge.sections.map((function(e){return(0,W.A)((0,W.A)({},e),{},{event:ge.name})})))&&void 0!==pe?pe:[]}else{e=[];var je,ve=(0,I.A)(p.events);try{for(ve.s();!(je=ve.n()).done;){var Ae,be=je.value,ye=(0,I.A)(be.sections);try{for(ye.s();!(Ae=ye.n()).done;){var Ne=Ae.value;e.push((0,W.A)((0,W.A)({},Ne),{},{event:be.name}))}}catch(e){ye.e(e)}finally{ye.f()}}}catch(e){ve.e(e)}finally{ve.f()}}return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Ye,{children:(0,U.jsxs)("title",{children:["Scoreboard - ",g]})}),(0,U.jsx)("div",{className:"py-5 bg-blue-light text-center text-white",children:(0,U.jsx)(Me.A,{children:(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsx)(Re.A,{xs:12,lg:8,children:(0,U.jsxs)("h1",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.Tsj})," Scoreboard"]})})})})}),(0,U.jsx)("div",{className:"py-3 bg-body text-center",children:(0,U.jsx)(Me.A,{children:(0,U.jsxs)(Le.A,{className:"justify-content-center gap-3 mt-3 mt-lg-0",children:[p.affiliations.length>0&&(0,U.jsx)(Re.A,{xs:12,lg:3,children:(0,U.jsx)(Z.A.Group,{className:"m-0",children:(0,U.jsxs)(Z.A.Select,{value:E,onChange:function(e){return M(e.target.value)},children:[(0,U.jsx)("option",{value:"-1",children:"All affiliations"}),p.affiliations.map((function(e){return(0,U.jsx)("option",{value:e.id,children:e.name},e.id)}))]})})}),(0,U.jsx)(Re.A,{xs:12,lg:3,children:(0,U.jsx)(Z.A.Group,{className:"m-0",children:(0,U.jsxs)(Z.A.Select,{value:F,onChange:function(e){return function(e){if("-1"===e)return T(e);var n=p.events.find((function(n){return n.id===Number.parseInt(e)})),t=n.sections.find((function(e){return e.id===Number.parseInt(O)}));t||z("-1"),T(e)}(e.target.value)},children:[(0,U.jsx)("option",{value:"-1",children:"All events"}),p.events.map((function(e){return(0,U.jsx)("option",{value:e.id,children:e.name},e.id)}))]})})}),(0,U.jsx)(Re.A,{xs:12,lg:3,children:(0,U.jsx)(Z.A.Group,{className:"m-0",children:(0,U.jsxs)(Z.A.Select,{value:O,onChange:function(e){return z(e.target.value)},children:[(0,U.jsx)("option",{value:"-1",children:"All sections"}),e.map((function(e){return(0,U.jsxs)("option",{value:e.id,children:[e.event," - ",e.name]},e.id)}))]})})}),Object.entries(p.customFields).map((function(e){var n=(0,b.A)(e,2),t=n[0],s=n[1];return(0,U.jsx)(Re.A,{xs:12,lg:3,children:(0,U.jsx)(Z.A.Group,{className:"m-0",children:(0,U.jsxs)(Z.A.Select,{value:B[t],onChange:function(e){return V((0,W.A)((0,W.A)({},B),{},(0,wn.A)({},t,e.target.value)))},children:[(0,U.jsxs)("option",{value:"",children:["All ",t.toLowerCase()]}),s.map((function(e){return(0,U.jsx)("option",{value:e,children:e},e)}))]})})},"custom_"+t)})),(0,U.jsx)(Re.A,{xs:12,lg:3,children:(0,U.jsxs)(_.A,{variant:"success",className:"w-100",onClick:function(){return fe()},children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.mRM})," Filter"]})})]})})}),(0,U.jsx)("div",{className:"py-3 bg-body",children:(0,U.jsx)(Me.A,{children:(0,U.jsxs)(Le.A,{className:"justify-content-center align-items-center",children:[(0,U.jsx)(Re.A,{xs:12,lg:5,children:(0,U.jsx)(Z.A.Control,{type:"text",placeholder:"Search users",onChange:function(e){k(e.target.value.toLowerCase())}})}),(0,U.jsx)(Re.A,{xs:12,lg:5,className:"mt-3 mt-lg-0",children:(0,U.jsx)(Z.A.Check,{id:"onlyStarred",type:"checkbox",label:"Show only starred users",checked:J,onChange:function(e){localStorage.setItem("onlyStarred",e.target.checked?"1":"0"),ee(e.target.checked)}})}),(null==n?void 0:n.logged)&&"ADMIN"===(null==n?void 0:n.group)&&(0,U.jsx)(Re.A,{xs:12,lg:2,className:"mt-3 mt-lg-0 text-end",children:(0,U.jsxs)(kn.A,{title:"Export",children:[(0,U.jsx)(Cn.A.Item,{onClick:function(){return me("json")},children:"Export JSON"}),(0,U.jsx)(Cn.A.Item,{onClick:function(){return me("csv")},children:"Export CSV"}),(0,U.jsx)(Cn.A.Item,{onClick:function(){return me("ctftime")},children:"Export CTFTime"})]})})]})})}),h&&o(h)&&(0,U.jsx)("div",{className:"py-3 text-center",children:(0,U.jsx)(Me.A,{children:(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsx)(Re.A,{xs:12,lg:8,children:(0,U.jsxs)(Pe.A,{variant:"info",className:"mb-0",children:[(0,U.jsxs)("h5",{className:"m-0 py-2",children:[(0,U.jsx)(X.g,{icon:$.Wkq})," The scoreboard is frozen"," ",(0,U.jsx)(X.g,{icon:$.Wkq})]}),(null==n?void 0:n.logged)&&("ADMIN"===(null==n?void 0:n.group)||"SUPERVISOR"===(null==n?void 0:n.group))&&(0,U.jsx)("div",{className:"d-flex justify-content-center",children:(0,U.jsx)("h6",{className:"m-0",children:(0,U.jsx)(Z.A.Check,{id:"showFreezeCheckbox",type:"checkbox",label:"Show freeze",checked:!i,onChange:function(e){return l(!e.target.checked)}})})})]})})})})}),(0,U.jsx)(Rn,{}),(null==n?void 0:n.tableScoreboard)&&(0,U.jsx)("div",{className:"py-3 bg-body",children:(0,U.jsx)(Me.A,{children:(0,U.jsx)(Le.A,{className:"justify-content-center align-items-center",children:(0,U.jsx)(Re.A,{xs:12,lg:5,className:"text-center",children:(0,U.jsx)(_.A,{className:"w-100",onClick:function(){ue?(localStorage.setItem("scoreboardTable","0"),he(!1)):(localStorage.setItem("scoreboardTable","1"),he(!0))},children:"Toggle scoreboard view"})})})})}),null!=n&&n.publicScoreboard||null!=n&&n.logged?ue&&null!=n&&n.tableScoreboard&&ce?(0,U.jsx)(Mn,{scoreboard:ce.scoreboard,searchContent:w,onlyStarred:J,searchOptions:p,highlightedId:null!=n&&n.logged?n.id:void 0}):se?(0,U.jsx)(Wn,{scoreboard:se.scoreboard,searchContent:w,onlyStarred:J,searchOptions:p,highlightedId:null!=n&&n.logged?n.id:void 0}):(0,U.jsx)(U.Fragment,{}):(0,U.jsx)(U.Fragment,{})]})};var Tn=t(239),Yn=t.n(Tn);const Dn=function(e){var n=e.events,t=e.locks,s=e.onChange,a=(0,r.useState)(-1),c=(0,b.A)(a,2),l=c[0],o=c[1],d=(0,r.useState)([]),u=(0,b.A)(d,2),h=u[0],x=u[1],m=(0,r.useState)([]),f=(0,b.A)(m,2),p=f[0],g=f[1],j=(0,r.useCallback)((function(e,n){var t,s=[],r=[],a=(0,I.A)(e);try{for(a.s();!(t=a.n()).done;){var i,c=t.value,l=0,o=(0,I.A)(c.sections);try{for(o.s();!(i=o.n()).done;){var d,u=i.value,h=0,m=(0,I.A)(u.challenges);try{for(m.s();!(d=m.n()).done;){var f=d.value;n.includes(f.id)||h++}}catch(e){m.e(e)}finally{m.f()}h===u.challenges.length&&(r[u.id]=!0,l++)}}catch(e){o.e(e)}finally{o.f()}l===c.sections.length&&(s[c.id]=!0)}}catch(e){a.e(e)}finally{a.f()}x(s),g(r)}),[]),v=(0,r.useCallback)((function(e,r){r||t.includes(e)?r&&t.includes(e)&&(t.splice(t.indexOf(e),1),s((0,i.A)(t))):(t.push(e),s((0,i.A)(t))),j(n,t)}),[n,t,j,s]),A=(0,r.useCallback)((function(e,t,s){var r,a=(0,I.A)(n.find((function(n){return n.id===e})).sections.find((function(e){return e.id===t})).challenges);try{for(a.s();!(r=a.n()).done;){var i=r.value;v(i.id,s)}}catch(e){a.e(e)}finally{a.f()}}),[n,v]),y=(0,r.useCallback)((function(e,t){var s,r=(0,I.A)(n.find((function(n){return n.id===e})).sections);try{for(r.s();!(s=r.n()).done;){var a=s.value;A(e,a.id,t)}}catch(e){r.e(e)}finally{r.f()}}),[n,A]);return(0,r.useEffect)((function(){var e=t.filter((function(e){return n.find((function(n){return!!n.sections.find((function(n){return!!n.challenges.find((function(n){return n.id===e}))}))}))}));t.length!==e.length&&s((0,i.A)(e)),j(n,e)}),[n,t,j,s]),(0,U.jsx)(U.Fragment,{children:n.map((function(e){var n;return(0,U.jsxs)(fn.A,{className:"text-start mb-2",children:[(0,U.jsx)(fn.A.Item,{variant:"primary",children:(0,U.jsxs)("h5",{className:"m-0",children:[e.name,(0,U.jsx)(Z.A.Check,{className:"float-end",type:"checkbox",checked:null!==(n=h[e.id])&&void 0!==n&&n,onChange:function(n){return y(e.id,n.target.checked)}})]})}),e.sections.map((function(n){var s;return(0,U.jsxs)(r.Fragment,{children:[(0,U.jsx)(fn.A.Item,{variant:"warning",children:(0,U.jsxs)("div",{className:"d-flex",children:[(0,U.jsxs)("h6",{className:"m-0 cursor-pointer",onClick:function(){return o(n.id===l?-1:n.id)},children:[n.id===l?(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.xbI,className:"mr-2"}):(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.jkA,className:"mr-2"}),n.name," (",n.challenges.reduce((function(e,n){return e+(t.includes(n.id)?0:1)}),0),"/",n.challenges.length," challenges)"]}),(0,U.jsx)(Z.A.Check,{type:"checkbox",className:"ms-auto",checked:null!==(s=p[n.id])&&void 0!==s&&s,onChange:function(t){return A(e.id,n.id,t.target.checked)}})]})}),n.id===l&&n.challenges.map((function(e){return(0,U.jsx)(r.Fragment,{children:(0,U.jsx)(fn.A.Item,{children:(0,U.jsxs)("span",{className:"pl-2",children:[e.title,(0,U.jsx)(Z.A.Check,{className:"float-end",type:"checkbox",checked:!t.includes(e.id),onChange:function(n){return v(e.id,n.target.checked)}})]})})},e.id)}))]},n.id)}))]},e.id)}))})};var Pn=function(){var e=(0,r.useState)(""),n=(0,b.A)(e,2),t=n[0],s=n[1],a=(0,r.useState)(""),i=(0,b.A)(a,2),c=i[0],l=i[1],o=(0,r.useState)(""),d=(0,b.A)(o,2),u=d[0],h=d[1],x=(0,r.useState)(""),m=(0,b.A)(x,2),f=m[0],p=m[1],g=We((0,A.A)(N().mark((function e(){var n;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.generateAffiliationEnrollmentToken({fields:{name:c||void 0,surname:u||void 0,email:f||void 0}});case 2:n=e.sent,s(n.token);case 4:case"end":return e.stop()}}),e)}))),[c,u,f]);return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(Me.A,{children:[(0,U.jsxs)(Le.A,{children:[(0,U.jsx)(Re.A,{children:(0,U.jsxs)(Z.A.Group,{className:"mt-3",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.oMV,fixedWidth:!0})," Name"]})}),(0,U.jsx)(Z.A.Control,{type:"text",placeholder:"Name",value:c,onChange:function(e){return l(e.target.value)}})]})}),(0,U.jsx)(Re.A,{children:(0,U.jsxs)(Z.A.Group,{className:"mt-3",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.Lmx,fixedWidth:!0})," Surname"]})}),(0,U.jsx)(Z.A.Control,{type:"text",placeholder:"Surname",value:u,onChange:function(e){return h(e.target.value)}})]})})]}),(0,U.jsx)(Le.A,{children:(0,U.jsxs)(Z.A.Group,{className:"mt-3",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.Hzw,fixedWidth:!0})," Email"]})}),(0,U.jsx)(Z.A.Control,{type:"email",placeholder:"Email",value:f,onChange:function(e){return p(e.target.value)}})]})})]}),(0,U.jsx)("div",{className:"mt-2",children:(0,U.jsxs)("aside",{children:["All fields that should not be included in the token should be left empty. The token is always bound to this affiliation."," ",(0,U.jsx)("b",{children:"Be careful when distributing tokens as they cannot be revoked and do not expire."})]})}),(0,U.jsxs)(_.A,{onClick:g,className:"mt-2",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.OtC})," Generate new token"]}),t&&(0,U.jsxs)(Pe.A,{variant:"success",className:"mt-3",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.e68})," A new token has been created, it can be used for signup of a new user or enrollment of a registered user:"," ",(0,U.jsx)("code",{children:"".concat(window.location.origin,"/enroll?token=")+encodeURIComponent(t)})]})]})};const On=function(){var e=(0,r.useContext)(q).user,n=(0,r.useRef)(),t=(0,r.useState)(""),s=(0,b.A)(t,2),a=s[0],i=s[1],c=(0,r.useState)(),l=(0,b.A)(c,2),o=l[0],d=l[1],u=(0,r.useState)([]),h=(0,b.A)(u,2),x=h[0],m=h[1];Ie((0,A.A)(N().mark((function e(){var n,t,s,r;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([P.getAffiliation(),P.getAffiliationEvents()]);case 2:n=e.sent,t=(0,b.A)(n,2),s=t[0],r=t[1],d(s.customization),i(s.name),m(r);case 9:case"end":return e.stop()}}),e)}))),[]);var f=We((0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,P.updateAffiliation(o);case 4:case"end":return e.stop()}}),e)}))),[o],{title:"Customization",successMessage:"Customization saved successfully!"});return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Ye,{children:(0,U.jsxs)("title",{children:["Venue Management - ",g]})}),(0,U.jsx)("iframe",{ref:n,className:"d-none",title:"Download IFRAME"}),(0,U.jsx)("div",{className:"py-5 bg-blue-light text-center text-white",children:(0,U.jsx)(Me.A,{children:(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsxs)(Re.A,{xs:12,lg:8,children:[(0,U.jsxs)("h1",{children:[(0,U.jsx)(X.g,{icon:$.QnR})," Venue Management"]}),(0,U.jsx)("h3",{className:"mt-3",children:(0,U.jsxs)(_.A,{variant:"info",className:"text-white",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.QnR})," ",a]})})]})})})}),o&&(0,U.jsx)("div",{className:"py-4 text-center",children:(0,U.jsxs)(Me.A,{children:[(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsx)(Re.A,{xs:12,lg:8,children:(0,U.jsxs)("h2",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.h6r})," Venue settings"]})})}),(0,U.jsx)(Le.A,{className:"justify-content-center mt-3",children:(0,U.jsx)(Re.A,{xs:12,lg:6,children:(0,U.jsxs)(fn.A,{className:"text-start",children:[!(null!=e&&e.publicScoreboard)&&(0,U.jsxs)(fn.A.Item,{variant:"primary",className:"d-table",children:[(0,U.jsx)("span",{className:"d-table-cell align-middle float-none",children:"Scoreboard visible"}),(0,U.jsx)(Yn(),{checked:o.scoreboardVisible,onlabel:"Yes",onstyle:"success",offlabel:"No",offstyle:"danger",style:"mx-3 float-end",onChange:function(e){return d((0,W.A)((0,W.A)({},o),{},{scoreboardVisible:e}))}})]}),(null==e?void 0:e.enrollmentEnabled)&&(0,U.jsxs)(fn.A.Item,{variant:"primary",className:"d-table",children:[(0,U.jsx)("span",{className:"d-table-cell align-middle float-none",children:"Enrollment enabled"}),(0,U.jsx)(Yn(),{checked:o.enrollmentEnabled,onlabel:"Yes",onstyle:"success",offlabel:"No",offstyle:"danger",style:"mx-3 float-end",onChange:function(e){return d((0,W.A)((0,W.A)({},o),{},{enrollmentEnabled:e}))}})]})]})})})]})}),(null==e?void 0:e.enrollmentEnabled)&&(null==o?void 0:o.enrollmentEnabled)&&(0,U.jsx)("div",{className:"py-4 text-center",children:(0,U.jsxs)(Me.A,{children:[(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsx)(Re.A,{xs:12,lg:8,children:(0,U.jsxs)("h4",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.pCJ})," Enrollment management"]})})}),(0,U.jsx)(Le.A,{className:"justify-content-center mt-3 text-center",children:(0,U.jsx)(Re.A,{xs:12,lg:6,children:(0,U.jsx)(Pn,{})})})]})}),e&&(0,U.jsx)("div",{className:"py-4 text-center",children:(0,U.jsxs)(Me.A,{children:[(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsx)(Re.A,{xs:12,lg:8,children:(0,U.jsxs)("h4",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.cbP})," Venue export"]})})}),(0,U.jsxs)(Le.A,{className:"justify-content-center mt-3 text-center",children:[(0,U.jsx)(Re.A,{xs:6,lg:3,children:(0,U.jsxs)(_.A,{variant:"success",onClick:function(){n.current.src="/api/supervisor/scoreboard.csv?auth="+(!0===(null==e?void 0:e.logged)&&(null==e?void 0:e.filesToken)||"")},children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.cbP})," Export scoreboard"]})}),(0,U.jsx)(Re.A,{xs:6,lg:3,children:(0,U.jsxs)(_.A,{variant:"success",onClick:function(){n.current.src="/api/supervisor/submissions.csv?auth="+(!0===(null==e?void 0:e.logged)&&(null==e?void 0:e.filesToken)||"")},children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.cbP})," Export submissions"]})})]})]})}),x.length>0&&(0,U.jsx)("div",{className:"py-4 text-center",children:(0,U.jsxs)(Me.A,{children:[(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsx)(Re.A,{xs:12,lg:8,children:(0,U.jsxs)("h4",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.pS3})," Challenges visibility"]})})}),(0,U.jsx)(Le.A,{className:"justify-content-center mt-3",children:(0,U.jsx)(Re.A,{xs:12,lg:6,children:(0,U.jsx)(Dn,{events:x,locks:o.locks,onChange:function(e){return d((0,W.A)((0,W.A)({},o),{},{locks:e}))}})})})]})}),(0,U.jsx)("div",{className:"py-4 text-center",children:(0,U.jsxs)(_.A,{variant:"success",onClick:f,children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.hSh})," Save"]})})]})},zn=function(e){var n=e.onConfirm,t=e.confirmText,s=e.confirmVariant,r=e.onClose,a=e.show,i=e.children;return(0,U.jsxs)(z.A,{show:a,onHide:r,centered:!0,children:[(0,U.jsx)(z.A.Body,{className:"overflow-wrap-anywhere",children:i}),(0,U.jsxs)(z.A.Footer,{children:[(0,U.jsx)(_.A,{variant:s,onClick:n,children:t}),(0,U.jsx)(_.A,{variant:"secondary",onClick:r,children:"Close"})]})]})},_n=function(){var e=(0,r.useState)([]),n=(0,b.A)(e,2),t=n[0],s=n[1],a=(0,r.useState)([]),c=(0,b.A)(a,2),o=c[0],d=c[1],u=(0,r.useState)(-1),h=(0,b.A)(u,2),x=h[0],m=h[1],f=(0,r.useState)(""),p=(0,b.A)(f,2),g=p[0],j=p[1],v=(0,r.useState)(""),y=(0,b.A)(v,2),w=y[0],k=y[1],C=(0,r.useState)("name"),S=(0,b.A)(C,2),W=S[0],I=S[1],E=(0,r.useState)(!1),M=(0,b.A)(E,2),L=M[0],R=M[1],F=(0,r.useState)([]),T=(0,b.A)(F,2),Y=T[0],D=T[1];Ie((0,A.A)(N().mark((function e(){var n,t,r,a,i;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([P.getAdminChallenges(),P.getAdminVisibilityLocks()]);case 2:n=e.sent,t=(0,b.A)(n,2),r=t[0],a=t[1],i=r.reduce((function(e,n){var t=e.find((function(e){return e.id===n.eventId}));t||(t={id:n.eventId,name:n.event,sections:[]},e.push(t));var s=t.sections.find((function(e){return e.id===n.sectionId}));return s||(s={id:n.sectionId,name:n.section,challenges:[]},t.sections.push(s)),s.challenges.push(n),e}),[]),s(r),D(a),d(i);case 10:case"end":return e.stop()}}),e)}))),[]);var O=We((0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.deleteChallenge(x);case 2:return e.t0=s,e.next=5,P.getAdminChallenges();case 5:e.t1=e.sent,(0,e.t0)(e.t1);case 7:case"end":return e.stop()}}),e)}))),[x],{finally:function(){return m(-1)},title:"Challenge",successMessage:"Challenge deleted successfully!"}),z=We((0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.setAdminVisibilityLocks(Y);case 2:return e.t0=D,e.next=5,P.getAdminVisibilityLocks();case 5:e.t1=e.sent,(0,e.t0)(e.t1);case 7:case"end":return e.stop()}}),e)}))),[Y],{title:"Challenges visibility",successMessage:"Challenges visibility updated successfully!"}),G=(0,r.useMemo)((function(){return(0,i.A)(t).filter((function(e){return 0===w.length||e.event.toLowerCase().includes(w)||e.section.toLowerCase().includes(w)||e.title.toLowerCase().includes(w)})).sort((function(e,n){var t=0;switch(W){case"name":t=e.title.toLowerCase()<n.title.toLowerCase()?-1:1;break;case"-name":t=-(e.title.toLowerCase()<n.title.toLowerCase()?-1:1);break;case"section":t=e.section.toLowerCase()<n.section.toLowerCase()?-1:1;break;case"-section":t=-(e.section.toLowerCase()<n.section.toLowerCase()?-1:1);break;case"event":t=e.event.toLowerCase()<n.event.toLowerCase()?-1:1;break;case"-event":t=-(e.event.toLowerCase()<n.event.toLowerCase()?-1:1);break;case"score":t=e.score-n.score;break;case"-score":t=-(e.score-n.score)}return t}))}),[t,w,W]);return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)("h3",{children:["Challenges (",G.length,"/",t.length,")"," ",(0,U.jsx)(l.N_,{to:"/admin/challenges/new",style:{color:"inherit"},children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.OQW})})," ",(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.pS3,onClick:function(){return R(!L)},className:"cursor-pointer"})]}),L&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("div",{className:"mt-3 w-50 m-auto",children:(0,U.jsx)(Dn,{events:o,locks:Y,onChange:D})}),(0,U.jsxs)(_.A,{variant:"success",className:"mt-3",onClick:z,children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.hSh})," Save"]})]}),(0,U.jsx)("div",{className:"mt-3 w-50 m-auto",children:(0,U.jsx)(Z.A.Control,{type:"text",placeholder:"Search challenges",onChange:function(e){k(e.target.value.toLowerCase())}})}),(0,U.jsx)("div",{className:"table-responsive",children:(0,U.jsxs)($e.A,{striped:!0,bordered:!0,hover:!0,className:"mt-3 text-nowrap text-start",children:[(0,U.jsx)("thead",{children:(0,U.jsxs)("tr",{children:[(0,U.jsx)("th",{className:"align-middle text-center",children:"View"}),(0,U.jsx)("th",{className:"align-middle text-center",children:"Edit"}),(0,U.jsxs)("th",{className:"align-middle cursor-pointer",onClick:function(){I("name"===W?"-name":"name")},children:["Name"," ",(0,U.jsx)(X.g,{fixedWidth:!0,className:W.includes("name")?"text-primary":"",icon:W.includes("name")?W.includes("-")?$.Dvs:$.Ync:$.OM7})]}),(0,U.jsxs)("th",{className:"align-middle cursor-pointer",onClick:function(){I("section"===W?"-section":"section")},children:["Section"," ",(0,U.jsx)(X.g,{fixedWidth:!0,className:W.includes("section")?"text-primary":"",icon:W.includes("section")?W.includes("-")?$.Dvs:$.Ync:$.OM7})]}),(0,U.jsxs)("th",{className:"align-middle cursor-pointer",onClick:function(){I("event"===W?"-event":"event")},children:["Event"," ",(0,U.jsx)(X.g,{fixedWidth:!0,className:W.includes("event")?"text-primary":"",icon:W.includes("event")?W.includes("-")?$.Dvs:$.Ync:$.OM7})]}),(0,U.jsxs)("th",{className:"align-middle cursor-pointer text-center",onClick:function(){I("score"===W?"-score":"score")},children:["Score"," ",(0,U.jsx)(X.g,{fixedWidth:!0,className:W.includes("score")?"text-primary":"",icon:W.includes("score")?W.includes("-")?$.Dvs:$.Ync:$.OM7})]}),(0,U.jsx)("th",{className:"align-middle text-center",children:"Scoring"}),(0,U.jsx)("th",{className:"align-middle text-center",children:"Delete"})]})}),(0,U.jsx)("tbody",{children:G.map((function(e){return(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{className:"align-middle text-center",children:(0,U.jsx)(l.N_,{to:"/challenges#challenge-".concat(e.id),children:(0,U.jsx)(_.A,{size:"sm",variant:"primary",children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.pS3})})})}),(0,U.jsx)("td",{className:"align-middle text-center",children:(0,U.jsx)(l.N_,{to:"/admin/challenges/".concat(e.id),children:(0,U.jsx)(_.A,{size:"sm",variant:"primary",children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.MT7})})})}),(0,U.jsx)("td",{className:"align-middle",children:e.title}),(0,U.jsx)("td",{className:"align-middle",children:e.section}),(0,U.jsx)("td",{className:"align-middle",children:e.event}),(0,U.jsx)("td",{className:"align-middle text-center",children:e.score}),(0,U.jsx)("td",{className:"align-middle text-center",children:e.scoring}),(0,U.jsx)("td",{className:"align-middle text-center",children:(0,U.jsx)(_.A,{size:"sm",variant:"danger",onClick:function(){j(e.title),m(e.id)},children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.yLS})})})]},e.id)}))})]})}),(0,U.jsxs)(zn,{show:-1!==x,onClose:function(){return m(-1)},confirmText:"Delete",confirmVariant:"danger",onConfirm:O,children:["Are you sure you want to delete ",(0,U.jsx)("b",{children:g})," ?"]})]})};var Un=t(5026),Gn=t(1533),Hn={};Hn.styleTagTransform=je(),Hn.setAttributes=me(),Hn.insert=he().bind(null,"head"),Hn.domAPI=de(),Hn.insertStyleElement=pe(),le()(Gn.A,Hn),Gn.A&&Gn.A.locals&&Gn.A.locals;var Bn=function(e,n,t){var s=0,a=function(e){var n,t={},s=(0,I.A)(e);try{for(s.s();!(n=s.n()).done;){var r=n.value;t[r.event.id]||(t[r.event.id]={name:r.event.name,sections:[]}),t[r.event.id].sections.push({id:r.id,name:r.name,event:{id:r.event.id,name:r.event.name}})}}catch(e){s.e(e)}finally{s.f()}return t}(e),i=[];for(var c in a){var l=a[c];i.push((0,U.jsxs)(r.Fragment,{children:[0!==s&&(0,U.jsx)(Un.W1.Divider,{}),(0,U.jsx)(Un.W1.Header,{children:l.name}),l.sections.map((function(e){var n=(0,U.jsx)(Un.Dr,{option:e,position:s,children:(0,U.jsx)(Un.MD,{search:t.text,children:e.name})},s);return s+=1,n}))]},c))}return(0,U.jsx)(Un.W1,(0,W.A)((0,W.A)({},n),{},{children:i}))};const qn=function(e){var n=e.sections,t=e.selected,s=e.onSelection;return(0,U.jsx)(Un.iF,{id:"sectionSelector",renderMenu:Bn,labelKey:function(e){return"".concat(e.event.name," - ").concat(e.name)},options:n,filterBy:function(e,n){return e.name.toLowerCase().includes(n.text.toLowerCase())},placeholder:"Choose a section...",selected:void 0!==t?[t]:[],onChange:function(e){return s(e[0])}})};var Vn=function(e,n,t){return(0,U.jsx)(Un.W1,(0,W.A)((0,W.A)({},n),{},{children:e.map((function(e,n){return(0,U.jsx)(Un.Dr,{option:e,position:n,children:(0,U.jsx)(Un.MD,{search:t.text,children:e.title})},n)}))}))};const Qn=function(e){var n=e.challenges,t=e.selected,s=e.excludeId,r=e.onSelection;return(0,U.jsx)(Un.iF,{id:"requiredChallengesSelector",renderMenu:Vn,multiple:!0,labelKey:function(e){return e.title},options:n,filterBy:function(e,n){return e.title.toLowerCase().includes(n.text.toLowerCase())&&e.id!==s&&-1===t.indexOf(e.id)},placeholder:"Choose challenges...",selected:t.map((function(e){var t=n.find((function(n){return n.id===e}));return t?{id:e,title:t.title}:{id:e,title:"???"}})),onChange:function(e){return r(e.map((function(e){return e.id})))}})};var Kn=t(5497),Zn=t(1710),$n=t.n(Zn),Xn=function(){var e=(0,A.A)(N().mark((function e(n){var t,s,r,a,i,c,l,o,d,u,h,x,m;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$n().loadAsync(n);case 2:t=e.sent,s=Object.keys(t.files).filter((function(e){return e.endsWith("challenge.json")})),r=[],a=(0,I.A)(s),e.prev=6,a.s();case 8:if((i=a.n()).done){e.next=44;break}return c=i.value,l=c.substring(0,c.length-14),e.t0=JSON,e.next=14,t.files[c].async("string");case 14:e.t1=e.sent,o=e.t0.parse.call(e.t0,e.t1),d={},u=(0,I.A)(o.files),e.prev=18,u.s();case 20:if((h=u.n()).done){e.next=33;break}if("upload"===(x=h.value).type){e.next=24;break}return e.abrupt("continue",31);case 24:if(!x.dynamic||x.path.endsWith(".zip")){e.next=26;break}throw new Error("Wrong dynamic file format");case 26:return m=decodeURI(new URL("http://example.com/".concat(l).concat(x.path)).pathname.substring(1)),console.log(m,x),e.next=30,t.file(m).async("blob");case 30:d[x.path]=e.sent;case 31:e.next=20;break;case 33:e.next=38;break;case 35:e.prev=35,e.t2=e.catch(18),u.e(e.t2);case 38:return e.prev=38,u.f(),e.finish(38);case 41:r.push({challenge:o,files:d});case 42:e.next=8;break;case 44:e.next=49;break;case 46:e.prev=46,e.t3=e.catch(6),a.e(e.t3);case 49:return e.prev=49,a.f(),e.finish(49);case 52:return e.abrupt("return",r);case 53:case"end":return e.stop()}}),e,null,[[6,46,49,52],[18,35,38,41]])})));return function(n){return e.apply(this,arguments)}}();const Jn=function(){var e=(0,c.Zp)(),n=(0,c.g)(),t=(0,r.useState)([]),s=(0,b.A)(t,2),a=s[0],o=s[1],d=(0,r.useState)([]),u=(0,b.A)(d,2),h=u[0],x=u[1],m=(0,r.useState)(),f=(0,b.A)(m,2),p=f[0],g=f[1],j=(0,r.useState)([]),v=(0,b.A)(j,2),y=v[0],w=v[1],k=(0,r.useState)([]),C=(0,b.A)(k,2),S=C[0],E=C[1],M=(0,r.useState)(""),L=(0,b.A)(M,2),R=L[0],T=L[1],Y=(0,r.useState)(""),D=(0,b.A)(Y,2),O=D[0],G=D[1],H=(0,r.useState)({type:"static",score:void 0}),B=(0,b.A)(H,2),q=B[0],V=B[1],Q=(0,r.useState)([]),K=(0,b.A)(Q,2),J=K[0],ee=K[1],ne=(0,r.useState)([]),te=(0,b.A)(ne,2),se=te[0],re=te[1],ae=(0,r.useState)([]),ie=(0,b.A)(ae,2),ce=ie[0],le=ie[1],oe=(0,r.useState)([]),de=(0,b.A)(oe,2),ue=de[0],he=de[1],xe=(0,r.useState)([]),me=(0,b.A)(xe,2),fe=me[0],pe=me[1],ge=(0,r.useState)([]),je=(0,b.A)(ge,2),ve=je[0],Ae=je[1],be=(0,r.useState)("0"),ye=(0,b.A)(be,2),Ne=ye[0],we=ye[1],ke=(0,r.useState)(!1),Ce=(0,b.A)(ke,2),Se=Ce[0],Ee=Ce[1],Fe=(0,r.useState)(-1),Te=(0,b.A)(Fe,2),Ye=Te[0],De=Te[1],Pe=(0,r.useState)(""),_e=(0,b.A)(Pe,2),Ue=_e[0],He=_e[1],Be=(0,r.useState)(0),qe=(0,b.A)(Be,2),Ve=qe[0],Qe=qe[1],Ke=(0,r.useState)(""),Xe=(0,b.A)(Ke,2),Je=Xe[0],en=Xe[1],nn=(0,r.useState)(""),tn=(0,b.A)(nn,2),sn=tn[0],rn=tn[1],an=(0,r.useState)(!1),cn=(0,b.A)(an,2),ln=cn[0],on=cn[1],dn=(0,r.useState)(!1),un=(0,b.A)(dn,2),hn=un[0],xn=un[1],mn=(0,r.useRef)(null),fn=(0,r.useRef)(null),pn=(0,r.useRef)(null),gn=(0,r.useRef)(null);Ie((0,A.A)(N().mark((function t(){var s,r,a,i,c,l,d,u,h,m,f;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=Number(n.id),!isNaN(s)||"new"===n.id){t.next=4;break}return e("/admin/challenges/new"),t.abrupt("return");case 4:return r=P.getAdminEvents().then((function(e){return e.flatMap((function(e){return e.sections.map((function(n){return{id:n.id,name:n.name,event:{id:e.id,name:e.name}}}))}))})),a=P.getAdminChallenges(),t.next=8,Promise.all([r,a]);case 8:if(i=t.sent,c=(0,b.A)(i,2),l=c[0],d=c[1],"new"!==n.id){t.next=16;break}return x(l),w(d),t.abrupt("return");case 16:return t.next=18,Promise.all([P.getAdminChallengeSolves(s),P.getAdminChallenge(s)]);case 18:u=t.sent,h=(0,b.A)(u,2),m=h[0],f=h[1],x(l),w(d),o(m),T(f.title),G(f.description),V(f.scoring),ee(f.tags.filter((function(e){return e.length>0}))),re(f.hiddenTags.filter((function(e){return e.length>0}))),le(f.flags),he(f.authors),pe(f.files),Ae(f.hints),we(f.order.toString()),rn(f.statusCheckerKey),g(l.find((function(e){return e.id===f.sectionId}))),E(f.requiredChallenges);case 38:case"end":return t.stop()}}),t)}))),[n.id,e]);var jn=function(e,n){e===q.type&&V((0,W.A)((0,W.A)({},q),n))},vn=We((0,A.A)(N().mark((function t(){var s,r;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==p){t.next=2;break}throw new Error("Select the challenge section");case 2:if(s={title:R,description:O,sectionId:p.id,scoring:q,tags:J.filter((function(e){return e.length>0})),hiddenTags:se.filter((function(e){return e.length>0})),flags:ce,authors:ue.filter((function(e){return e.length>0})),hints:ve,files:fe,order:Number.parseInt(Ne,10),statusCheckerKey:sn,requiredChallenges:S},"new"!==n.id){t.next=11;break}return t.next=7,P.upsertAdminChallenge("new",(0,W.A)((0,W.A)({},s),{},{hidden:ln}));case 7:r=t.sent,e("/admin/challenges/"+r.id,{replace:!0}),t.next=13;break;case 11:return t.next=13,P.upsertAdminChallenge(Number.parseInt(n.id,10),(0,W.A)({},s));case 13:case"end":return t.stop()}}),t)}))),[n.id,e,q,p,R,O,J,se,ce,ue,ve,fe,Ne,sn,ln,S],{title:"Challenge",successMessage:"Challenge saved successfully!"}),An=We((0,A.A)(N().mark((function t(){return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("new"!==n.id){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,P.deleteChallenge(Number.parseInt(n.id,10));case 4:e("/admin/challenges");case 5:case"end":return t.stop()}}),t)}))),[n.id,e],{title:"Challenge",successMessage:"Challenge deleted successfully!"}),bn=(0,Kn.VB)({maxFiles:1,onDrop:We(function(){var e=(0,A.A)(N().mark((function e(n){var t,s,r,a,i,c,l,o;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Xn(n[0]);case 4:t=e.sent[0],s=t.challenge,r=t.files,T(s.title),console.log(s),"dynamic"===s.scoring.type?V({type:"dynamic",start:s.scoring.start,stop:s.scoring.stop,decay:parseInt(s.scoring.decay.toString()),decayType:s.scoring.decay.toString().endsWith("%")?"relative":"absolute"}):V(s.scoring),we(s.order.toString()),G(s.description),ee(s.tags),re(s.hiddenTags),he(s.authors.map((function(e){return/^.+ <@(.+)>$/.exec(e)[1]}))),le(s.flags),Ae(s.hints.map((function(e){return{title:e.name,content:e.content,price:e.price}}))),a=[],i=(0,I.A)(s.files),e.prev=19,i.s();case 21:if((c=i.n()).done){e.next=31;break}if("upload"===(l=c.value).type){e.next=25;break}return e.abrupt("continue",29);case 25:return e.next=27,P.uploadFiles(l.dynamic?F.DYNAMIC:F.AUTH,[new File([r[l.path]],l.name)]);case 27:o=e.sent,a.push({name:l.name,url:"/api/file/".concat(o[0],"/").concat(encodeURIComponent(l.name),"?download")});case 29:e.next=21;break;case 31:e.next=36;break;case 33:e.prev=33,e.t0=e.catch(19),i.e(e.t0);case 36:return e.prev=36,i.f(),e.finish(36);case 39:pe(a);case 40:case"end":return e.stop()}}),e,null,[[19,33,36,39]])})));return function(n){return e.apply(this,arguments)}}(),[])}),yn=bn.getRootProps,Nn=bn.getInputProps;return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("h3",{children:"new"===n.id?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.OQW})," Create challenge"]}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.MT7})," Edit challenge"]})}),"new"===n.id&&(0,U.jsxs)(Me.A,{className:"container mt-3 p-3",style:{border:"1px solid #ced4da",borderRadius:"0.5em"},children:[(0,U.jsx)("h4",{children:"Import challenge from zip"}),(0,U.jsxs)("div",(0,W.A)((0,W.A)({},yn({className:"dropzone"})),{},{children:[(0,U.jsx)("input",(0,W.A)({},Nn())),(0,U.jsx)(_.A,{variant:"info",className:"text-white",children:"Drag 'n' drop a file here or click to select"})]}))]}),(0,U.jsxs)(Z.A,{className:"text-start mt-5",children:[(0,U.jsxs)(Le.A,{children:[(0,U.jsxs)(Re.A,{xs:12,md:6,children:[(0,U.jsxs)(Z.A.Group,{className:"mt-3",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.AmE,fixedWidth:!0})," Title"]})}),(0,U.jsx)(Z.A.Control,{type:"text",placeholder:"Enter title",value:R,onChange:function(e){return T(e.target.value)}})]}),(0,U.jsxs)(Z.A.Group,{className:"mt-3",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.Tsj,fixedWidth:!0})," Section"]})}),(0,U.jsx)(qn,{sections:h,selected:p,onSelection:g})]}),(0,U.jsxs)(Z.A.Group,{className:"mt-3",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.pNp,fixedWidth:!0})," Required challenges"]})}),(0,U.jsx)(Qn,{challenges:y,excludeId:"new"===n.id?void 0:parseInt(n.id),selected:S,onSelection:E})]}),(0,U.jsxs)(Z.A.Group,{className:"mt-3",children:[(0,U.jsx)(Z.A.Label,{className:"text-center w-100",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.gK3,fixedWidth:!0})," Scoring type"]})}),(0,U.jsxs)(Z.A.Select,{value:null==q?void 0:q.type,onChange:function(e){var n;"static"===(n=e.target.value)?V({type:"static",score:void 0}):"dynamic"===n&&V({type:"dynamic",start:void 0,stop:void 0,decayType:"absolute",decay:void 0})},children:[(0,U.jsx)("option",{value:"static",children:"Static"}),(0,U.jsx)("option",{value:"dynamic",children:"Dynamic"})]})]}),(0,U.jsx)(Z.A.Label,{className:"text-center w-100 mt-3",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.Ubc,fixedWidth:!0})," Scoring parameters"]})}),q&&("static"===q.type?(0,U.jsx)(Z.A.Group,{children:(0,U.jsx)(Z.A.Control,{type:"number",className:"w-30",placeholder:"value",value:q.score,min:0,onChange:function(e){var n=Number.parseInt(e.target.value);isNaN(n)||jn("static",{score:n})}})}):(0,U.jsxs)(Z.A.Group,{className:"row",children:[(0,U.jsx)(Re.A,{xs:4,children:(0,U.jsx)(Z.A.Control,{type:"number",className:"w-100",placeholder:"min value",value:q.stop,min:0,onChange:function(e){if(0!==e.target.value.length){var n=Number.parseInt(e.target.value);isNaN(n)||jn("dynamic",{stop:n})}else jn("dynamic",{stop:void 0})}})}),(0,U.jsx)(Re.A,{xs:4,children:(0,U.jsx)(Z.A.Control,{type:"number",className:"w-100",placeholder:"max value",value:q.start,min:1,onChange:function(e){if(0!==e.target.value.length){var n=Number.parseInt(e.target.value);isNaN(n)||jn("dynamic",{start:n})}else jn("dynamic",{start:void 0})}})}),(0,U.jsx)(Re.A,{xs:3,children:(0,U.jsx)(Z.A.Control,{type:"text",className:"w-100",placeholder:"decay value",value:"absolute"===q.decayType?q.decay:"".concat(q.decay,"%"),onChange:function(e){if(0===e.target.value.length)jn("dynamic",{decay:void 0});else if(e.target.value.endsWith("%")){var n=Number.parseInt(e.target.value.slice(0,-1));isNaN(n)||jn("dynamic",{decayType:"relative",decay:n})}else{var t=Number.parseInt(e.target.value);isNaN(t)||jn("dynamic",{decayType:"absolute",decay:t})}}})}),(0,U.jsx)(Re.A,{xs:1,className:"d-flex align-items-center ps-0",children:"absolute"===q.decayType?(0,U.jsx)(Oe.A,{placement:"top",overlay:(0,U.jsx)(ze.A,{children:"Absolute decay"}),children:(0,U.jsx)(X.g,{icon:$.Nfw,fixedWidth:!0,size:"lg"})}):(0,U.jsx)(Oe.A,{placement:"top",overlay:(0,U.jsx)(ze.A,{children:"Relative decay"}),children:(0,U.jsx)(X.g,{icon:$.WKo,fixedWidth:!0,size:"lg"})})})]})),(0,U.jsxs)(Z.A.Group,{className:"mt-3",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.OM7,fixedWidth:!0})," Order"]})}),(0,U.jsx)(Z.A.Control,{type:"number",placeholder:"0",value:Ne,onChange:function(e){return we(e.target.value)}})]}),(0,U.jsxs)(Z.A.Group,{className:"mt-3",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.oE6,fixedWidth:!0})," Description"]})}),(0,U.jsx)(Z.A.Control,{as:"textarea",rows:12,value:O,onChange:function(e){return G(e.target.value)}})]})]}),(0,U.jsxs)(Re.A,{xs:12,md:6,children:[(0,U.jsxs)(Z.A.Group,{className:"mt-3",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.jd5,fixedWidth:!0})," Tags"]})}),(0,U.jsx)(Z.A.Control,{type:"text",placeholder:"tag1,tag2",value:J.join(","),onChange:function(e){return n=e.target.value,void ee(n.split(",").map((function(e){return e.trim()})));var n}})]}),(0,U.jsxs)(Z.A.Group,{className:"mt-3",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.DX_,fixedWidth:!0})," Hidden tags"]})}),(0,U.jsx)(Z.A.Control,{type:"text",placeholder:"tag1,tag2",value:se.join(","),onChange:function(e){return n=e.target.value,void re(n.split(",").map((function(e){return e.trim()})));var n}})]}),(0,U.jsxs)(Z.A.Group,{className:"mt-3",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.e68,fixedWidth:!0})," Status checker key"]})}),(0,U.jsx)(Z.A.Control,{type:"text",placeholder:"training-web/web42",value:sn,onChange:function(e){return rn(e.target.value)}})]}),(0,U.jsxs)(Z.A.Group,{className:"mt-3",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.Hzw,fixedWidth:!0})," Authors"]})}),ue.map((function(e,n){return(0,U.jsxs)(Ze.A,{className:"mb-1",children:[(0,U.jsx)(_.A,{size:"sm",variant:"danger",onClick:function(){return e=n,ue.splice(e,1),void he((0,i.A)(ue));var e},children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.GRI})}),(0,U.jsx)(Z.A.Control,{type:"text",disabled:!0,value:e})]},n)})),(0,U.jsxs)(Ze.A,{className:"mb-1",children:[(0,U.jsx)(_.A,{size:"sm",variant:"success",onClick:function(){gn.current&&gn.current.value&&(he([].concat((0,i.A)(ue),[gn.current.value])),gn.current.value="")},children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.QLR})}),(0,U.jsx)(Z.A.Control,{placeholder:"Author",ref:gn})]})]}),(0,U.jsxs)(Z.A.Group,{className:"mt-3",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.A4h,fixedWidth:!0})," Attached files"]})}),fe.map((function(e,n){return(0,U.jsxs)(Ze.A,{className:"mb-1",children:[(0,U.jsx)(_.A,{size:"sm",variant:"danger",onClick:function(){return e=n,fe.splice(e,1),void pe((0,i.A)(fe));var e},children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.GRI})}),(0,U.jsx)(Z.A.Control,{type:"text",disabled:!0,value:e.name+" -> "+e.url})]},n)})),(0,U.jsxs)(Ze.A,{className:"mb-1",children:[(0,U.jsx)(_.A,{size:"sm",variant:"success",onClick:function(){mn.current&&mn.current.value&&fn.current&&fn.current.value&&(pe([].concat((0,i.A)(fe),[{name:mn.current.value,url:fn.current.value}])),mn.current.value="",fn.current.value="")},children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.QLR})}),(0,U.jsx)(Z.A.Control,{placeholder:"Name",ref:mn}),(0,U.jsx)(Z.A.Control,{placeholder:"Url",ref:fn})]})]}),(0,U.jsxs)(Z.A.Group,{className:"mt-3",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.s6x,fixedWidth:!0})," Valid flags"]})}),ce.map((function(e,n){return(0,U.jsxs)(Ze.A,{className:"mb-1",children:[(0,U.jsx)(_.A,{size:"sm",variant:"danger",onClick:function(){return e=n,ce.splice(e,1),void le((0,i.A)(ce));var e},children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.GRI})}),(0,U.jsx)(Z.A.Control,{type:"text",disabled:!0,value:e})]},n)})),(0,U.jsxs)(Ze.A,{className:"mb-1",children:[(0,U.jsx)(_.A,{size:"sm",variant:"success",onClick:function(){pn.current&&pn.current.value&&(le([].concat((0,i.A)(ce),[pn.current.value])),pn.current.value="")},children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.QLR})}),(0,U.jsx)(Z.A.Control,{placeholder:"Flag",ref:pn})]})]}),(0,U.jsxs)(Z.A.Group,{className:"mt-3",children:[(0,U.jsx)(Z.A.Label,{className:"text-center w-100",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.wRm,fixedWidth:!0})," Hints"]})}),ve.map((function(e,n){return(0,U.jsxs)(Ze.A,{className:"mb-1",children:[(0,U.jsx)(_.A,{size:"sm",variant:"primary",onClick:function(){return function(e){De(e),He(ve[e].title),Qe(ve[e].price),en(ve[e].content),Ee(!0)}(n)},children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.MT7})}),(0,U.jsx)(_.A,{size:"sm",variant:"danger",onClick:function(){return e=n,ve.splice(e,1),void Ae((0,i.A)(ve));var e},children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.GRI})}),(0,U.jsxs)(Ze.A.Text,{children:[e.title," (",(0,U.jsx)("b",{children:e.price}),")"]}),(0,U.jsx)(Z.A.Control,{type:"text",disabled:!0,value:e.content})]},n)})),(0,U.jsx)("div",{className:"text-center mt-3",children:(0,U.jsxs)(_.A,{variant:"success",onClick:function(){return De(-1),He(""),Qe(0),en(""),void Ee(!0)},children:[(0,U.jsx)(X.g,{icon:$.QLR,fixedWidth:!0})," Add Hint"]})})]})]})]}),"new"===n.id&&(0,U.jsx)("div",{className:"justify-content-center mt-4 d-flex",children:(0,U.jsx)(Z.A.Check,{id:"initiallyHiddenCheckbox",type:"checkbox",label:"Initially hidden",checked:ln,onChange:function(e){return on(e.target.checked)}})}),(0,U.jsx)(Le.A,{className:"justify-content-center mt-3",children:(0,U.jsxs)(Re.A,{xs:12,md:8,className:"text-center",children:[(0,U.jsxs)(_.A,{variant:"success",onClick:function(){return vn()},children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.hSh}),"new"===n.id?"Create":"Save"]})," ","new"!==n.id&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(l.N_,{to:"/challenges#challenge-".concat(n.id),children:(0,U.jsxs)(_.A,{variant:"primary",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.pS3})," View"]})})," "]})," ","new"!==n.id&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(_.A,{variant:"danger",onClick:function(){return xn(!0)},children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.yLS})," Delete"]})," "]}),(0,U.jsxs)(_.A,{variant:"secondary",onClick:function(){return e(-1)},children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.GRI})," Close"]})]})})]}),(0,U.jsxs)(z.A,{show:Se,onHide:function(){return Ee(!1)},centered:!0,children:[(0,U.jsx)(z.A.Header,{closeButton:!0,children:(0,U.jsx)(z.A.Title,{className:"text-center",children:-1===Ye?"Add Hint":"Edit Hint"})}),(0,U.jsxs)(z.A.Body,{children:[(0,U.jsx)(Z.A.Control,{type:"text",placeholder:"Title",className:"mb-2",value:Ue,onChange:function(e){return He(e.target.value)}}),(0,U.jsx)(Z.A.Control,{type:"text",placeholder:"Price",className:"mb-2",value:Ve,onChange:function(e){var n=Number.parseInt(e.target.value,10);isNaN(n)||Qe(n)}}),(0,U.jsx)(Z.A.Control,{as:"textarea",rows:6,placeholder:"Content",value:Je,onChange:function(e){return en(e.target.value)}})]}),(0,U.jsxs)(z.A.Footer,{children:[(0,U.jsx)(_.A,{variant:"success",onClick:function(){return function(){if(-1!==Ye){var e=(0,i.A)(ve),n=e[Ye];if(!n)return;n.title=Ue,n.price=Ve,n.content=Je,Ae(e)}else Ae([].concat((0,i.A)(ve),[{title:Ue,price:Ve,content:Je}]));Ee(!1)}()},children:-1===Ye?"Add":"Save"}),(0,U.jsx)(_.A,{variant:"secondary",onClick:function(){return Ee(!1)},children:"Close"})]})]}),(0,U.jsx)("div",{className:"py-5 bg-body text-center",children:(0,U.jsxs)(Me.A,{children:[(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsx)(Re.A,{xs:12,lg:8,children:(0,U.jsxs)("h3",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.s6x})," Solves (",a.length,")"]})})}),(0,U.jsx)(Le.A,{className:"mt-3 table-responsive text-start table-overflow",children:(0,U.jsx)(Re.A,{xs:12,children:(0,U.jsxs)($e.A,{striped:!0,className:"text-nowrap",children:[(0,U.jsx)("thead",{children:(0,U.jsxs)("tr",{children:[(0,U.jsx)("th",{className:"align-middle",children:"Timestamp"}),(0,U.jsx)("th",{className:"align-middle",children:"User"}),(0,U.jsx)("th",{className:"align-middle",children:"Affiliation"})]})}),(0,U.jsx)("tbody",{children:a.map((function(e,n){return(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{className:"align-middle",children:Ge()(e.timestamp).format("YYYY-MM-DD HH:mm:ss")}),(0,U.jsx)("td",{className:"align-middle",children:(0,U.jsxs)(l.N_,{to:"/player/"+e.user.id,children:[e.user.name," ",e.user.surname," ",null!==e.user.nickname?"(".concat(e.user.nickname,")"):""]})}),(0,U.jsx)("td",{className:"align-middle",children:e.user.affiliation.name})]},n)}))})]})})})]})}),(0,U.jsxs)(zn,{show:hn,onClose:function(){return xn(!1)},confirmText:"Delete",confirmVariant:"danger",onConfirm:An,children:["Are you sure you want to delete the challenge: ",(0,U.jsx)("b",{children:R})]})]})},et=function(){var e,n,t,s,a,i,o=(0,c.Zp)(),d=(0,c.zy)(),u=(0,r.useState)({affiliations:[],events:[],customFields:{}}),h=(0,b.A)(u,2),x=h[0],m=h[1],f=(0,r.useState)([]),p=(0,b.A)(f,2),g=p[0],j=p[1],v=(0,r.useState)([]),y=(0,b.A)(v,2),w=y[0],k=y[1],C=(0,r.useState)(0),S=(0,b.A)(C,2),E=S[0],M=S[1],L=(0,r.useState)(1),R=(0,b.A)(L,2),F=R[0],T=R[1],Y=(0,r.useState)(null!==(e=new URLSearchParams(d.search).get("venue"))&&void 0!==e?e:"-1"),D=(0,b.A)(Y,2),O=D[0],z=D[1],G=(0,r.useState)(null!==(n=new URLSearchParams(d.search).get("event"))&&void 0!==n?n:"-1"),H=(0,b.A)(G,2),B=H[0],q=H[1],V=(0,r.useState)(null!==(t=new URLSearchParams(d.search).get("section"))&&void 0!==t?t:"-1"),Q=(0,b.A)(V,2),K=Q[0],J=Q[1],ee=(0,r.useState)(null!==(s=new URLSearchParams(d.search).get("challenge"))&&void 0!==s?s:"-1"),ne=(0,b.A)(ee,2),te=ne[0],se=ne[1],re=We(function(){var e=(0,A.A)(N().mark((function e(n,t){var s;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.getAdminHints(50*n,50,t);case 2:if(s=e.sent,T(Math.ceil(s.total/50)),0!==s.hints.length||0===n){e.next=8;break}return e.next=7,re(n-1,t);case 7:return e.abrupt("return");case 8:k(s.hints),M(n);case 10:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),[]),ae=We(function(){var e=(0,A.A)(N().mark((function e(n){var t,s;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(n),t={},s="/admin/hints?","-1"!==O&&(t.affiliation=Number.parseInt(O),s+="venue=".concat(t.affiliation,"&")),"-1"!==B&&(t.event=Number.parseInt(B),s+="event=".concat(t.event,"&")),"-1"!==K&&(t.section=Number.parseInt(K),s+="section=".concat(t.section,"&")),"-1"!==te&&(t.challenge=Number.parseInt(te),s+="challenge=".concat(t.challenge,"&")),e.next=9,re(n,t);case 9:o(s.slice(0,-1),{replace:!0});case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[O,B,K,te,o,re]);if(Ie((0,A.A)(N().mark((function e(){var n,t,s,r;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([P.getScoreboardSearchParams(),P.getAdminChallenges()]);case 2:return n=e.sent,t=(0,b.A)(n,2),s=t[0],r=t[1],e.next=8,ae(0);case 8:m(s),j(r);case 10:case"end":return e.stop()}}),e)}))),[]),"-1"!==B){var ie,ce=x.events.find((function(e){return e.id===Number.parseInt(B)}));a=null!==(ie=null==ce?void 0:ce.sections.map((function(e){return(0,W.A)((0,W.A)({},e),{},{event:ce.name})})))&&void 0!==ie?ie:[]}else{a=[];var le,oe=(0,I.A)(x.events);try{for(oe.s();!(le=oe.n()).done;){var de,ue=le.value,he=(0,I.A)(ue.sections);try{for(he.s();!(de=he.n()).done;){var xe=de.value;a.push((0,W.A)((0,W.A)({},xe),{},{event:ue.name}))}}catch(e){he.e(e)}finally{he.f()}}}catch(e){oe.e(e)}finally{oe.f()}}i="-1"!==K?g.filter((function(e){return e.sectionId===Number.parseInt(K)})):g.filter((function(e){return-1!==a.findIndex((function(n){return n.id===e.sectionId}))}));var me=(0,r.useCallback)((function(){var e=new URLSearchParams({token:P.token||"",download:""}),n=document.createElement("a");n.href="/api/admin/hints/export?"+e.toString(),document.body.appendChild(n),n.click(),document.body.removeChild(n)}),[]);return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)("h3",{className:"position-relative",children:["Unlocked hints",(0,U.jsxs)(_.A,{className:"ms-auto position-absolute end-0",variant:"primary",onClick:me,children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.o1d})," Export CSV"]})]}),(0,U.jsxs)(Le.A,{className:"justify-content-center",children:[(0,U.jsx)(Re.A,{xs:12,lg:3,className:"mt-3",children:(0,U.jsx)(Z.A.Group,{className:"m-0",children:(0,U.jsxs)(Z.A.Select,{value:O,onChange:function(e){return z(e.target.value)},children:[(0,U.jsx)("option",{value:"-1",children:"All affiliations"}),x.affiliations.map((function(e){return(0,U.jsx)("option",{value:e.id,children:e.name},e.id)}))]})})}),(0,U.jsx)(Re.A,{xs:12,lg:2,className:"mt-3",children:(0,U.jsx)(Z.A.Group,{className:"m-0",children:(0,U.jsxs)(Z.A.Select,{value:B,onChange:function(e){return function(e){if("-1"!==e){var n=x.events.find((function(n){return n.id===Number.parseInt(e)})),t=n.sections.find((function(e){return e.id===Number.parseInt(K)}));t||J("-1"),q(e);var s=g.find((function(e){return e.id===Number.parseInt(te)}));s&&s.eventId!==Number.parseInt(e)&&se("-1")}else q(e)}(e.target.value)},children:[(0,U.jsx)("option",{value:"-1",children:"All events"}),x.events.map((function(e){return(0,U.jsx)("option",{value:e.id,children:e.name},e.id)}))]})})}),(0,U.jsx)(Re.A,{xs:12,lg:2,className:"mt-3",children:(0,U.jsx)(Z.A.Group,{className:"m-0",children:(0,U.jsxs)(Z.A.Select,{value:K,onChange:function(e){return function(e){if("-1"===e)return J(e);J(e);var n=g.find((function(e){return e.id===Number.parseInt(te)}));n&&n.sectionId!==Number.parseInt(e)&&se("-1")}(e.target.value)},children:[(0,U.jsx)("option",{value:"-1",children:"All sections"}),a.map((function(e){return(0,U.jsxs)("option",{value:e.id,children:[e.event," - ",e.name]},e.id)}))]})})}),(0,U.jsx)(Re.A,{xs:12,lg:3,className:"mt-3",children:(0,U.jsx)(Z.A.Group,{className:"m-0",children:(0,U.jsxs)(Z.A.Select,{value:te,onChange:function(e){return se(e.target.value)},children:[(0,U.jsx)("option",{value:"-1",children:"All challenges"}),i.map((function(e){return(0,U.jsx)("option",{value:e.id,children:e.title},e.id)}))]})})}),(0,U.jsx)(Re.A,{xs:12,lg:3,className:"mt-3",children:(0,U.jsxs)(_.A,{variant:"success",className:"w-100",onClick:function(){return ae(0)},children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.mRM})," Filter hints"]})})]}),(0,U.jsxs)(Le.A,{className:"justify-content-center",children:[(0,U.jsx)(Re.A,{xs:6,md:2,className:"mt-3",children:(0,U.jsxs)(_.A,{className:"w-100",onClick:function(){return ae(0)},children:[(0,U.jsx)(X.g,{icon:$.v2M})," First"]})}),(0,U.jsx)(Re.A,{xs:6,md:2,className:"mt-3",children:(0,U.jsxs)(_.A,{className:"w-100",onClick:function(){return ae(Math.max(0,E-1))},children:[(0,U.jsx)(X.g,{icon:$.L4I})," Previous"]})}),(0,U.jsx)(Re.A,{xs:12,md:2,className:"mt-3",children:(0,U.jsx)(Z.A.Select,{className:"text-center",value:E,onChange:function(e){return ae(parseInt(e.target.value))},children:Array.from({length:F},(function(e,n){return n})).map((function(e){return(0,U.jsx)("option",{value:e,children:e+1},e)}))})}),(0,U.jsx)(Re.A,{xs:6,md:2,className:"mt-3",children:(0,U.jsxs)(_.A,{className:"w-100",onClick:function(){return ae(Math.min(F-1,E+1))},children:["Next ",(0,U.jsx)(X.g,{icon:$.BxI})]})}),(0,U.jsx)(Re.A,{xs:6,md:2,className:"mt-3",children:(0,U.jsxs)(_.A,{className:"w-100",onClick:function(){return ae(F-1)},children:["Last ",(0,U.jsx)(X.g,{icon:$.byU})]})})]}),(0,U.jsx)("div",{className:"table-responsive",children:(0,U.jsxs)($e.A,{striped:!0,bordered:!0,hover:!0,className:"mt-5 text-nowrap text-start",children:[(0,U.jsx)("thead",{children:(0,U.jsxs)("tr",{children:[(0,U.jsx)("th",{className:"align-middle",children:"Timestamp"}),(0,U.jsx)("th",{className:"align-middle",children:"Hint"}),(0,U.jsx)("th",{className:"align-middle",children:"Price"}),(0,U.jsx)("th",{className:"align-middle",children:"Challenge"}),(0,U.jsx)("th",{className:"align-middle",children:"User"}),(0,U.jsx)("th",{className:"align-middle",children:"Affiliation"})]})}),(0,U.jsx)("tbody",{children:w.map((function(e,n){return(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{className:"align-middle",children:Ge()(e.timestamp).format("YYYY-MM-DD HH:mm:ss")}),(0,U.jsx)("td",{className:"align-middle",children:e.hint.title}),(0,U.jsx)("td",{className:"align-middle",children:e.hint.price}),(0,U.jsx)("td",{className:"align-middle",children:(0,U.jsx)(l.N_,{to:"/challenges#challenge-".concat(e.challenge.id),children:e.challenge.title})}),(0,U.jsx)("td",{className:"align-middle",children:(0,U.jsxs)(l.N_,{to:"/player/".concat(e.user.id),children:[e.user.name," ",e.user.surname," ",e.user.nickname&&"(".concat(e.user.nickname,")")]})}),(0,U.jsx)("td",{className:"align-middle",children:(0,U.jsx)(l.N_,{to:"/scoreboard?venue=".concat(e.user.affiliation.id),children:e.user.affiliation.name})})]},n)}))})]})})]})};var nt=t(4809),tt=t.n(nt),st=function(e){var n=e.name,t=e.keys,s=e.required,a=e.onChange,i=(0,r.useState)((function(){var e=t.map((function(e){return e.toLowerCase()})),r=e.indexOf(n.toLowerCase());return-1===r&&(r=e.findIndex((function(e){return e.includes(n.toLowerCase())}))),-1!==r?t[r]:s?t[0]:""})),c=(0,b.A)(i,2),l=c[0],o=c[1];return(0,r.useEffect)((function(){a(l)}),[a,l]),(0,U.jsx)(Re.A,{children:(0,U.jsxs)(Z.A.Group,{children:[(0,U.jsx)(Z.A.Label,{className:"text-center w-100",children:(0,U.jsxs)("h5",{children:[n,!s&&" (optional)"]})}),(0,U.jsxs)(Z.A.Select,{value:l,onChange:function(e){return o(e.target.value)},children:[!s&&(0,U.jsx)("option",{value:"",children:"none"}),t.map((function(e){return(0,U.jsx)("option",{value:e,children:e},e)}))]})]})})},rt=function(e){var n=e.onDone,t=H(),s=(0,r.useState)([]),a=(0,b.A)(s,2),i=a[0],c=a[1],l=(0,r.useState)([]),o=(0,b.A)(l,2),d=o[0],u=o[1],h=(0,r.useState)(!1),x=(0,b.A)(h,2),m=x[0],f=x[1],p=(0,r.useRef)(void 0),g=(0,r.useRef)(void 0),j=(0,r.useRef)(void 0),v=(0,r.useRef)(void 0),y=(0,r.useRef)(void 0),w=(0,r.useRef)(void 0),k=(0,r.useRef)(void 0),C=(0,r.useState)([]),S=(0,b.A)(C,2),E=S[0],M=S[1],L=(0,r.useRef)({}),R=(0,Kn.VB)({maxFiles:1,onDrop:function(e){0!==e.length?e[0].text().then((function(e){return new Promise((function(n,t){return tt().parse(e.trim(),{worker:!1,header:!0,complete:function(e){if(e.errors.length>0){var s="Failed reading the file:";return e.errors.forEach((function(e){return s+="\n- "+e.message})),t(new Error(s))}n(e.data)}})}))})).then((function(e){return c(e)})).catch((function(e){c([]),t(e.toString(),!0)})):c([])}}),F=R.getRootProps,T=R.getInputProps,Y=(0,r.useMemo)((function(){return 0===i.length?[]:Object.keys(i[0])}),[i]),D=(0,r.useCallback)((function(){var e,n=[],t=(0,I.A)(i);try{var s=function(){var t=e.value[k.current];-1!==n.indexOf(t)||d.find((function(e){return e.name===t}))||n.push(t)};for(t.s();!(e=t.n()).done;)s()}catch(e){t.e(e)}finally{t.f()}return n}),[i,d,k]),O=We((0,A.A)(N().mark((function e(){var t,s,r,a,l,o,d,h,x,m,f,A,b,C;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,I.A)(D()),e.prev=1,t.s();case 3:if((s=t.n()).done){e.next=9;break}return r=s.value,e.next=7,P.upsertAdminAffiliation("new",{name:r,privacyPolicy:null});case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:return e.next=19,P.getAdminAffiliations();case 19:a=e.sent,u(a),l=[],o=(0,I.A)(i),e.prev=23,h=N().mark((function e(){var n,t,s,r,i,c,o,u,h,x,m;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.value,s=t[p.current],r=t[g.current],i=j&&t[j.current]||null,c=t[v.current],o=t[y.current],u=t[w.current],h=t[k.current],x={},s&&"string"==typeof s){e.next=7;break}throw new Error("Missing name");case 7:if(r&&"string"==typeof r){e.next=11;break}throw new Error("Missing surname");case 11:if(c&&"string"==typeof c){e.next=15;break}throw new Error("Missing email");case 15:if(o&&"string"==typeof o){e.next=19;break}throw new Error("Missing password");case 19:if(o.startsWith("plaint$")||o.startsWith("bcrypt$")){e.next=23;break}throw new Error("Invalid password: ".concat(o));case 23:if(u&&"string"==typeof u&&("PLAYER"===u||"SUPERVISOR"===u)){e.next=25;break}throw new Error("Invalid group: ".concat(u));case 25:if(void 0!==(m=null===(n=a.find((function(e){return e.name===h})))||void 0===n?void 0:n.id)){e.next=28;break}throw new Error("Invalid affiliation: ".concat(h));case 28:E.forEach((function(e){if(e.required&&!L.current[e.name])throw new Error("Missing custom field ".concat(e.name));if(L.current[e.name]){var n=t[L.current[e.name]];if(!n||"string"!=typeof n)throw new Error("Invalid value for custom field ".concat(e.name,": ").concat(n));if("choice"===e.type&&!e.choices.includes(n))throw new Error("Invalid value for custom field ".concat(e.name,": ").concat(n));if("text"===e.type&&e.regex&&!new RegExp(e.regex).exec(n))throw new Error("Invalid value for custom field ".concat(e.name,": ").concat(n));x[e.name]=n}})),l.push({name:s.trim(),surname:r.trim(),nickname:(null==i?void 0:i.trim())||null,group:u,guest:!1,email:c.trim(),password:o.startsWith("plaint$")?o.substring(7):void 0,hashedPassword:o.startsWith("bcrypt$")?o.substring(7):void 0,affiliationId:m,customFields:x});case 30:case"end":return e.stop()}}),e)})),o.s();case 26:if((d=o.n()).done){e.next=30;break}return e.delegateYield(h(),"t1",28);case 28:e.next=26;break;case 30:e.next=35;break;case 32:e.prev=32,e.t2=e.catch(23),o.e(e.t2);case 35:return e.prev=35,o.f(),e.finish(35);case 38:x=[],m=0,f=l;case 40:if(!(m<f.length)){e.next=50;break}return A=f[m],e.next=44,P.upsertAdminUser("new",A);case 44:b=e.sent,C=b.id,x.push((0,W.A)((0,W.A)({},A),{},{id:C}));case 47:m++,e.next=40;break;case 50:n(x),c([]);case 52:case"end":return e.stop()}}),e,null,[[1,11,14,17],[23,32,35,38]])}))),[i,D,p,g,j,v,y,w,k,L,E,n],{title:"User",successMessage:"Users imported successfully!"});return Ie((0,A.A)(N().mark((function e(){var n,t,s,r;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([P.getAdminConfigs(),P.getAdminAffiliations()]);case 2:n=e.sent,t=(0,b.A)(n,2),s=t[0],r=t[1],M(s.customFields.map((function(e){return(0,W.A)((0,W.A)({},e),{},{value:""})}))),u(r);case 8:case"end":return e.stop()}}),e)}))),[]),(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(Me.A,{className:"container mt-3 p-3",style:{border:"1px solid #ced4da",borderRadius:"0.5em"},children:[(0,U.jsx)("h4",{children:"Import users"}),(0,U.jsxs)("div",(0,W.A)((0,W.A)({},F({className:"dropzone"})),{},{children:[(0,U.jsx)("input",(0,W.A)({},T())),(0,U.jsx)(_.A,{variant:"info",className:"text-white",children:"Drag 'n' drop a file here or click to select"})]})),i.length>0&&Y.length>0&&(0,U.jsxs)("div",{children:[(0,U.jsxs)("h5",{className:"mt-3",children:["Total users to import: ",i.length]}),(0,U.jsxs)(Le.A,{className:"align-items-end",children:[(0,U.jsx)(st,{name:"Name",required:!0,keys:Y,onChange:function(e){return p.current=e}}),(0,U.jsx)(st,{name:"Surname",required:!0,keys:Y,onChange:function(e){return g.current=e}}),(0,U.jsx)(st,{name:"Nickname",required:!1,keys:Y,onChange:function(e){return j.current=e}}),(0,U.jsx)(st,{name:"Email",required:!0,keys:Y,onChange:function(e){return v.current=e}}),(0,U.jsx)(st,{name:"Password",required:!0,keys:Y,onChange:function(e){return y.current=e}}),(0,U.jsx)(st,{name:"Group",required:!0,keys:Y,onChange:function(e){return w.current=e}}),(0,U.jsx)(st,{name:"Affiliation",required:!0,keys:Y,onChange:function(e){return k.current=e}})]}),Array.from(Array(Math.ceil(E.length/7))).map((function(e,n){return(0,U.jsx)(Le.A,{className:"align-items-end mt-4",children:E.slice(7*n,n+7).map((function(e){return(0,U.jsx)(st,{name:e.name,required:e.required,keys:Y,onChange:function(n){return L.current=(0,W.A)((0,W.A)({},L.current),{},(0,wn.A)({},e.name,n))}},e.name)}))},n)})),(0,U.jsxs)(_.A,{variant:"success",className:"mt-3",onClick:function(){return f(!0)},children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.N72})," Import"]})]})]}),(0,U.jsxs)(zn,{show:m,onClose:function(){return f(!1)},confirmText:"Import",confirmVariant:"success",onConfirm:function(){f(!1),O()},children:["Are you sure you want to import ",i.length," users and create"," ",D().length," affiliations?"]})]})};const at=function(){var e,n,t,s=(0,c.Zp)(),a=(0,c.zy)(),i=(0,r.useState)([]),o=(0,b.A)(i,2),d=o[0],u=o[1],h=(0,r.useState)([]),x=(0,b.A)(h,2),m=x[0],f=x[1],p=(0,r.useState)(0),g=(0,b.A)(p,2),j=g[0],v=g[1],y=(0,r.useState)(1),w=(0,b.A)(y,2),k=w[0],C=w[1],S=(0,r.useState)(-1),W=(0,b.A)(S,2),I=W[0],E=W[1],M=(0,r.useState)(""),L=(0,b.A)(M,2),R=L[0],F=L[1],T=(0,r.useState)(null!==(e=new URLSearchParams(a.search).get("search"))&&void 0!==e?e:""),Y=(0,b.A)(T,2),D=Y[0],O=Y[1],z=(0,r.useState)(null!==(n=new URLSearchParams(a.search).get("venue"))&&void 0!==n?n:"-1"),G=(0,b.A)(z,2),H=G[0],B=G[1],q=(0,r.useState)(null!==(t=new URLSearchParams(a.search).get("group"))&&void 0!==t?t:""),V=(0,b.A)(q,2),Q=V[0],K=V[1],J=(0,r.useState)(!1),ee=(0,b.A)(J,2),ne=ee[0],te=ee[1],se=We(function(){var e=(0,A.A)(N().mark((function e(n,t){var s;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.getAdminUsers(50*n,50,t);case 2:if(s=e.sent,C(Math.ceil(s.total/50)),0!==s.users.length||0===n){e.next=8;break}return e.next=7,se(n-1,t);case 7:return e.abrupt("return");case 8:f(s.users),v(n);case 10:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),[]),re=We(function(){var e=(0,A.A)(N().mark((function e(n){var t,r;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(n),t={},r="/admin/users?","-1"!==H&&(t.affiliation=Number.parseInt(H),r+="venue=".concat(t.affiliation,"&")),Q&&(t.group=Q,r+="group=".concat(t.group,"&")),D&&(t.search=D,r+="search=".concat(t.search,"&")),e.next=8,se(n,t);case 8:s(r.slice(0,-1),{replace:!0});case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[D,H,Q,s,se]);Ie((0,A.A)(N().mark((function e(){var n;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.getAdminAffiliations();case 2:return n=e.sent,e.next=5,re(0);case 5:u(n);case 6:case"end":return e.stop()}}),e)}))),[]);var ae=We((0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.deleteUser(I);case 2:return e.next=4,se(j);case 4:case"end":return e.stop()}}),e)}))),[j,se,I],{finally:function(){return E(-1)},title:"User",successMessage:"User deleted successfully!"}),ie=(0,r.useCallback)((function(){var e=new URLSearchParams({token:P.token||"",download:""}),n=document.createElement("a");n.href="/api/admin/users/export?"+e.toString(),document.body.appendChild(n),n.click(),document.body.removeChild(n)}),[]);return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)("h3",{className:"position-relative",children:["Users"," ",(0,U.jsx)(l.N_,{to:"/admin/users/new",style:{color:"inherit"},children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.OQW})})," ",(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.$MS,onClick:function(){return te(!ne)},className:"cursor-pointer"}),(0,U.jsxs)(_.A,{className:"ms-auto position-absolute end-0",variant:"primary",onClick:ie,children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.o1d})," Export CSV"]})]}),ne&&(0,U.jsx)(rt,{onDone:function(e){var n=tt().unparse(e,{header:!0}),t=document.createElement("a");t.setAttribute("href","data:text/csv;charset=utf-8,"+encodeURIComponent(n)),t.setAttribute("download","users_".concat(Date.now(),".csv")),document.body.appendChild(t),t.click(),document.body.removeChild(t),re(j)}}),(0,U.jsxs)(Le.A,{className:"justify-content-center",children:[(0,U.jsx)(Re.A,{xs:12,lg:4,className:"mt-3",children:(0,U.jsx)(Z.A.Control,{type:"text",placeholder:"Search users",value:D,onChange:function(e){return O(e.target.value)}})}),(0,U.jsx)(Re.A,{xs:12,lg:3,className:"mt-3",children:(0,U.jsx)(Z.A.Group,{children:(0,U.jsxs)(Z.A.Select,{value:H,onChange:function(e){return B(e.target.value)},children:[(0,U.jsx)("option",{value:"-1",children:"All affiliations"}),d.map((function(e){return(0,U.jsx)("option",{value:e.id,children:e.name},e.id)}))]})})}),(0,U.jsx)(Re.A,{xs:12,lg:2,className:"mt-3",children:(0,U.jsx)(Z.A.Group,{children:(0,U.jsxs)(Z.A.Select,{value:Q,onChange:function(e){return K(e.target.value)},children:[(0,U.jsx)("option",{value:"",children:"All types"}),(0,U.jsx)("option",{value:"PLAYER",children:"PLAYER"}),(0,U.jsx)("option",{value:"SUPERVISOR",children:"SUPERVISOR"}),(0,U.jsx)("option",{value:"ADMIN",children:"ADMIN"})]})})}),(0,U.jsx)(Re.A,{xs:12,lg:3,className:"mt-3",children:(0,U.jsxs)(_.A,{variant:"success",className:"w-100",onClick:function(){return re(0)},children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.mRM})," Filter users"]})})]}),(0,U.jsxs)(Le.A,{className:"justify-content-center",children:[(0,U.jsx)(Re.A,{xs:6,md:2,className:"mt-3",children:(0,U.jsxs)(_.A,{className:"w-100",onClick:function(){return re(0)},children:[(0,U.jsx)(X.g,{icon:$.v2M})," First"]})}),(0,U.jsx)(Re.A,{xs:6,md:2,className:"mt-3",children:(0,U.jsxs)(_.A,{className:"w-100",onClick:function(){return re(Math.max(0,j-1))},children:[(0,U.jsx)(X.g,{icon:$.L4I})," Previous"]})}),(0,U.jsx)(Re.A,{xs:12,md:2,className:"mt-3",children:(0,U.jsx)(Z.A.Control,{as:"select",className:"text-center",value:j,onChange:function(e){return re(parseInt(e.target.value))},children:Array.from({length:k},(function(e,n){return n})).map((function(e){return(0,U.jsx)("option",{value:e,children:e+1},e)}))})}),(0,U.jsx)(Re.A,{xs:6,md:2,className:"mt-3",children:(0,U.jsxs)(_.A,{className:"w-100",onClick:function(){return re(Math.min(k-1,j+1))},children:["Next ",(0,U.jsx)(X.g,{icon:$.BxI})]})}),(0,U.jsx)(Re.A,{xs:6,md:2,className:"mt-3",children:(0,U.jsxs)(_.A,{className:"w-100",onClick:function(){return re(k-1)},children:["Last ",(0,U.jsx)(X.g,{icon:$.byU})]})})]}),(0,U.jsx)("div",{className:"table-responsive",children:(0,U.jsxs)($e.A,{striped:!0,bordered:!0,hover:!0,className:"mt-5 text-nowrap text-start",children:[(0,U.jsx)("thead",{children:(0,U.jsxs)("tr",{children:[(0,U.jsx)("th",{className:"align-middle text-center",children:"View"}),(0,U.jsx)("th",{className:"align-middle text-center",children:"Edit"}),(0,U.jsx)("th",{className:"align-middle",children:"Name"}),(0,U.jsx)("th",{className:"align-middle",children:"Surname"}),(0,U.jsx)("th",{className:"align-middle",children:"Nickname"}),(0,U.jsx)("th",{className:"align-middle",children:"Affiliation"}),(0,U.jsx)("th",{className:"align-middle text-center",children:"Type"}),(0,U.jsx)("th",{className:"align-middle text-center",children:"Delete"})]})}),(0,U.jsx)("tbody",{children:m.map((function(e){return(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{className:"align-middle text-center",children:"PLAYER"===e.group?(0,U.jsx)(l.N_,{to:"/player/".concat(e.id),children:(0,U.jsx)(_.A,{size:"sm",variant:"primary",children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.pS3})})}):(0,U.jsx)(U.Fragment,{})}),(0,U.jsx)("td",{className:"align-middle text-center",children:(0,U.jsx)(l.N_,{to:"/admin/users/".concat(e.id),children:(0,U.jsx)(_.A,{size:"sm",variant:"primary",children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.MT7})})})}),(0,U.jsx)("td",{className:"align-middle",children:e.name}),(0,U.jsx)("td",{className:"align-middle",children:e.surname}),(0,U.jsx)("td",{className:"align-middle",children:e.nickname}),(0,U.jsx)("td",{className:"align-middle",children:e.affiliation.name}),(0,U.jsxs)("td",{className:"align-middle text-center",children:[e.group,e.guest&&(0,U.jsxs)(U.Fragment,{children:[" ",(0,U.jsx)(X.g,{icon:$.Rwe,fixedWidth:!0})]})]}),(0,U.jsx)("td",{className:"align-middle text-center",children:(0,U.jsx)(_.A,{size:"sm",variant:"danger",onClick:function(){F("".concat(e.name," ").concat(e.surname)),E(e.id)},children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.yLS})})})]},e.id)}))})]})}),(0,U.jsxs)(zn,{show:-1!==I,onClose:function(){return E(-1)},confirmText:"Delete",confirmVariant:"danger",onConfirm:ae,children:["Are you sure you want to delete ",(0,U.jsx)("b",{children:R})," ?"]})]})},it=function(){var e=(0,c.Zp)(),n=(0,c.g)(),t=(0,r.useState)([]),s=(0,b.A)(t,2),a=s[0],o=s[1],d=(0,r.useState)(""),u=(0,b.A)(d,2),h=u[0],x=u[1],m=(0,r.useState)(""),f=(0,b.A)(m,2),p=f[0],g=f[1],j=(0,r.useState)(""),v=(0,b.A)(j,2),y=v[0],w=v[1],k=(0,r.useState)(null),C=(0,b.A)(k,2),S=C[0],I=C[1],E=(0,r.useState)(""),M=(0,b.A)(E,2),L=M[0],R=M[1],F=(0,r.useState)(""),T=(0,b.A)(F,2),Y=T[0],D=T[1],O=(0,r.useState)("PLAYER"),z=(0,b.A)(O,2),G=z[0],H=z[1],B=(0,r.useState)(!1),q=(0,b.A)(B,2),V=q[0],Q=q[1],K=(0,r.useState)([]),J=(0,b.A)(K,2),ee=J[0],ne=J[1],te=(0,r.useState)(!1),se=(0,b.A)(te,2),re=se[0],ae=se[1],ie="new"===n.id;Ie((0,A.A)(N().mark((function t(){var s,r,a,i;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=Number(n.id),!isNaN(s)||"new"===n.id){t.next=4;break}return e("/admin/users/new"),t.abrupt("return");case 4:return t.next=6,P.getAdminAffiliations();case 6:if(r=t.sent,"new"!==n.id){t.next=20;break}return t.next=10,P.getAdminConfigs();case 10:return a=t.sent,o(r),x(""),g(""),w(""),R(""),D(""),H("PLAYER"),ne(a.customFields.map((function(e){return(0,W.A)((0,W.A)({},e),{},{value:""})}))),t.abrupt("return");case 20:return t.next=22,P.getAdminUser(s);case 22:i=t.sent,o(r),x(i.name),g(i.surname),w(null===i.nickname?"":i.nickname),H(i.group),Q(i.guest),R(i.email),D(""),I(i.affiliation.id),ne(i.customFields);case 33:case"end":return t.stop()}}),t)}))),[n.id,e]);var ce=We((0,A.A)(N().mark((function t(){var s,r;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.upsertAdminUser("new"===n.id?"new":Number(n.id),{name:h,surname:p,email:L,password:Y,group:G,guest:"PLAYER"===G&&V,nickname:""===y?null:y,affiliationId:S,hashedPassword:void 0,customFields:ee.reduce((function(e,n){var t=n.value||"";return!t&&n.required&&"choice"===n.type&&(t=n.choices[0]),e[n.name]=t,e}),{})});case 2:s=t.sent,r=s.id,"new"===n.id&&e("/admin/users/".concat(r),{replace:!0});case 5:case"end":return t.stop()}}),t)}))),[n.id,e,h,p,y,S,L,Y,G,V,ee],{title:"User",successMessage:"User updated successfully!"}),le=We((0,A.A)(N().mark((function t(){return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.deleteUser(Number(n.id));case 2:e("/admin/users");case 3:case"end":return t.stop()}}),t)}))),[n.id,e],{title:"User",successMessage:"User deleted successfully!"});return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("h3",{children:"new"===n.id?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.OQW})," Create user"]}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.MT7})," Edit user"]})}),(0,U.jsxs)(Z.A,{className:"text-start mt-5",children:[(0,U.jsxs)(Le.A,{children:[(0,U.jsxs)(Re.A,{xs:12,lg:6,children:[(0,U.jsxs)(Z.A.Group,{className:"mt-3",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.oMV,fixedWidth:!0})," Name"]})}),(0,U.jsx)(Z.A.Control,{type:"text",placeholder:"first name",value:h,onChange:function(e){return x(e.target.value)}})]}),(0,U.jsxs)(Z.A.Group,{className:"mt-3",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.Lmx,fixedWidth:!0})," Surname"]})}),(0,U.jsx)(Z.A.Control,{type:"text",placeholder:"last name",value:p,onChange:function(e){return g(e.target.value)}})]}),(0,U.jsxs)(Z.A.Group,{className:"mt-3",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.Hzw,fixedWidth:!0})," Email"]})}),(0,U.jsx)(Z.A.Control,{type:"email",placeholder:"name@mail.com",value:L,onChange:function(e){return R(e.target.value)}})]}),(0,U.jsxs)(Z.A.Group,{className:"mt-3",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.bMg,fixedWidth:!0})," Password"]})}),(0,U.jsx)(Z.A.Control,{type:"password",placeholder:"password",value:Y,onChange:function(e){return D(e.target.value)}})]}),(0,U.jsxs)(Z.A.Group,{className:"mt-3",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.jd5,fixedWidth:!0})," Type"]})}),(0,U.jsxs)("div",{className:"d-flex align-items-center",children:[(0,U.jsxs)(Z.A.Select,{value:G,onChange:function(e){return H(e.target.value)},children:[(0,U.jsx)("option",{value:"ADMIN",children:"Admin"}),(0,U.jsx)("option",{value:"SUPERVISOR",children:"Supervisor"}),(0,U.jsx)("option",{value:"PLAYER",children:"Player"})]}),"PLAYER"===G&&(0,U.jsx)(Z.A.Check,{id:"guestCheckbox",type:"checkbox",label:"Guest",checked:V,onChange:function(e){return Q(e.target.checked)},className:"ms-4 me-1"})]})]})]}),(0,U.jsxs)(Re.A,{xs:12,lg:6,children:[(0,U.jsxs)(Z.A.Group,{className:"mt-3",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.X46,fixedWidth:!0})," Nickname"]})}),(0,U.jsx)(Z.A.Control,{type:"text",placeholder:"nickname",value:null!=y?y:"",onChange:function(e){return w(e.target.value)}})]}),(0,U.jsxs)(Z.A.Group,{className:"mt-3",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.QnR,fixedWidth:!0})," Affiliation"]})}),(0,U.jsxs)(Z.A.Select,{value:null!=S?S:-1,onChange:function(e){return function(e){if("-1"===e)return I(null);I(Number(e))}(e.target.value)},children:[(0,U.jsx)("option",{value:-1,children:"No affiliation"},-1),a.map((function(e){return(0,U.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]}),"ADMIN"!==G&&"SUPERVISOR"!==G&&(0,U.jsxs)(Z.A.Group,{className:"mt-3",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.McB,fixedWidth:!0})," Custom fields"]})}),ee.map((function(e,n){return(0,U.jsxs)(Ze.A,{className:"mb-3",children:[(0,U.jsx)(Ze.A.Text,{className:"w-25",children:e.name}),"text"===e.type?(0,U.jsx)(Z.A.Control,{type:"text",placeholder:e.name,value:e.value||"",onChange:function(t){ee.splice(n,1,(0,W.A)((0,W.A)({},e),{},{value:t.target.value})),ne((0,i.A)(ee))}}):"choice"===e.type?(0,U.jsxs)(Z.A.Select,{value:e.value||(e.required?e.choices[0]:""),onChange:function(t){ee.splice(n,1,(0,W.A)((0,W.A)({},e),{},{value:t.target.value})),ne((0,i.A)(ee))},children:[!e.required&&(0,U.jsx)("option",{value:"",children:"Select an option"},"__EMPTY__"),e.choices.map((function(e){return(0,U.jsx)("option",{value:e,children:e},e)}))]}):(0,U.jsx)(U.Fragment,{})]},e.name)}))]})]})]}),(0,U.jsx)(Le.A,{className:"justify-content-center mt-3",children:(0,U.jsxs)(Re.A,{xs:12,md:8,className:"text-center",children:[(0,U.jsx)(_.A,{variant:"success",onClick:ce,children:ie?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.hSh})," Create"]}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.hSh})," Save"]})})," ",!ie&&"PLAYER"===G&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(l.N_,{to:"/player/".concat(n.id),target:"_blank",children:(0,U.jsxs)(_.A,{variant:"primary",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.pS3})," View"]})})," "]})," ",!ie&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(_.A,{variant:"danger",onClick:function(){return ae(!0)},children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.yLS})," Delete"]})," "]}),(0,U.jsxs)(_.A,{variant:"secondary",onClick:function(){return e(-1)},children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.GRI})," Close"]})]})})]}),(0,U.jsxs)(zn,{show:re,onClose:function(){return ae(!1)},confirmText:"Delete",confirmVariant:"danger",onConfirm:le,children:["Are you sure you want to delete the user:"," ",(0,U.jsxs)("b",{children:[h," ",p]})]})]})},ct=function(){var e=(0,r.useState)([]),n=(0,b.A)(e,2),t=n[0],s=n[1],a=(0,r.useState)([]),i=(0,b.A)(a,2),c=i[0],o=i[1],d=(0,r.useState)(-1),u=(0,b.A)(d,2),h=u[0],x=u[1],m=(0,r.useState)(""),f=(0,b.A)(m,2),p=f[0],g=f[1];Ie((0,A.A)(N().mark((function e(){var n,t,r,a;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([P.getAdminAffiliations(),P.getPages()]);case 2:n=e.sent,t=(0,b.A)(n,2),r=t[0],a=t[1],s(r),o(a);case 8:case"end":return e.stop()}}),e)}))),[]);var j=We((0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.deletePage(h);case 2:return e.t0=o,e.next=5,P.getPages();case 5:e.t1=e.sent,(0,e.t0)(e.t1);case 7:case"end":return e.stop()}}),e)}))),[h],{finally:function(){return x(-1)},title:"Page",successMessage:"Page deleted successfully!"});return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)("h3",{children:["Pages"," ",(0,U.jsx)(l.N_,{to:"/admin/pages/new",style:{color:"inherit"},children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.OQW})})]}),(0,U.jsx)("div",{className:"table-responsive",children:(0,U.jsxs)($e.A,{striped:!0,bordered:!0,hover:!0,className:"mt-5 text-nowrap",children:[(0,U.jsx)("thead",{children:(0,U.jsxs)("tr",{children:[(0,U.jsx)("th",{className:"align-middle",children:"Url"}),(0,U.jsx)("th",{className:"align-middle",children:"Hidden"}),(0,U.jsx)("th",{className:"align-middle",children:"Login Only"}),(0,U.jsx)("th",{className:"align-middle",children:"Supervisor Only"}),(0,U.jsx)("th",{className:"align-middle",children:"Affiliations Only"}),(0,U.jsx)("th",{className:"align-middle",children:"Edit"}),(0,U.jsx)("th",{className:"align-middle",children:"Delete"})]})}),(0,U.jsx)("tbody",{children:c.map((function(e){return(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{className:"align-middle",children:(0,U.jsx)("a",{href:e.permalink,target:"_blank",rel:"noopener noreferrer",children:e.permalink})}),(0,U.jsx)("td",{className:"align-middle",children:e.hidden?(0,U.jsx)(_.A,{size:"sm",variant:"success",className:"pe-none",children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.e68})}):(0,U.jsx)(_.A,{size:"sm",variant:"danger",className:"pe-none",children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.GRI})})}),(0,U.jsx)("td",{className:"align-middle",children:e.loginOnly?(0,U.jsx)(_.A,{size:"sm",variant:"success",className:"pe-none",children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.e68})}):(0,U.jsx)(_.A,{size:"sm",variant:"danger",className:"pe-none",children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.GRI})})}),(0,U.jsx)("td",{className:"align-middle",children:e.supervisorOnly?(0,U.jsx)(_.A,{size:"sm",variant:"success",className:"pe-none",children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.e68})}):(0,U.jsx)(_.A,{size:"sm",variant:"danger",className:"pe-none",children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.GRI})})}),(0,U.jsx)("td",{className:"align-middle",children:e.affiliationsOnly.map((function(e){return t.find((function(n){return n.id===e}))})).map((function(e){return(null==e?void 0:e.name)||e.id})).join(", ")||(0,U.jsx)("i",{children:"any"})}),(0,U.jsx)("td",{className:"align-middle",children:(0,U.jsx)(l.N_,{to:"/admin/pages/".concat(e.id),children:(0,U.jsx)(_.A,{size:"sm",variant:"primary",children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.MT7})})})}),(0,U.jsx)("td",{className:"align-middle",children:(0,U.jsx)(_.A,{size:"sm",variant:"danger",onClick:function(){g(e.permalink),x(e.id)},children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.yLS})})})]},e.id)}))})]})}),(0,U.jsxs)(zn,{show:-1!==h,onClose:function(){return x(-1)},confirmText:"Delete",confirmVariant:"danger",onConfirm:j,children:["Are you sure you want to delete the page: ",(0,U.jsx)("b",{children:p})]})]})},lt=function(e){var n=e.affiliations,t=e.selected,s=e.onSelection;return(0,U.jsx)(Un.iF,{id:"affiliationsSelector",renderMenu:function(e,n,t){return(0,U.jsx)(Un.W1,(0,W.A)((0,W.A)({},n),{},{children:e.map((function(e,n){return(0,U.jsx)(Un.Dr,{option:e,position:n,children:(0,U.jsx)(Un.MD,{search:t.text,children:e.name})},n)}))}))},multiple:!0,labelKey:function(e){return e.name},options:n,filterBy:function(e,n){return e.name.toLowerCase().includes(n.text.toLowerCase())},placeholder:"Choose affiliations...",selected:t,onChange:function(e){return s(e)}})};var ot=t(8807);const dt=function(){var e=(0,c.Zp)(),n=(0,c.g)(),t=(0,r.useState)([]),s=(0,b.A)(t,2),a=s[0],i=s[1],o=(0,r.useState)(""),d=(0,b.A)(o,2),u=d[0],h=d[1],x=(0,r.useState)(!1),m=(0,b.A)(x,2),f=m[0],p=m[1],g=(0,r.useState)(!0),j=(0,b.A)(g,2),v=j[0],y=j[1],w=(0,r.useState)(!1),k=(0,b.A)(w,2),C=k[0],S=k[1],W=(0,r.useState)([]),I=(0,b.A)(W,2),E=I[0],M=I[1],L=(0,r.useState)(""),R=(0,b.A)(L,2),F=R[0],T=R[1],Y=(0,r.useState)(!1),D=(0,b.A)(Y,2),O=D[0],z=D[1];Ie((0,A.A)(N().mark((function t(){var s,r,a;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=Number(n.id),!isNaN(s)||"new"===n.id){t.next=4;break}return e("/admin/pages/new"),t.abrupt("return");case 4:return t.next=6,P.getAdminAffiliations();case 6:if(r=t.sent,"new"!==n.id){t.next=16;break}return i(r),h(""),p(!1),y(!0),S(!1),M([]),T(""),t.abrupt("return");case 16:return t.next=18,P.getAdminPage(s);case 18:a=t.sent,i(r),h(a.permalink),p(a.hidden),y(a.loginOnly),S(a.supervisorOnly),M(a.affiliationsOnly),T(a.body);case 26:case"end":return t.stop()}}),t)}))),[n.id,e]);var G=We((0,A.A)(N().mark((function t(){var s,r;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.updatePage("new"===n.id?"new":Number.parseInt(n.id,10),{permalink:u,body:F,hidden:f,loginOnly:v,supervisorOnly:C,affiliationsOnly:E});case 2:s=t.sent,r=s.id,"new"===n.id&&e("/admin/pages/".concat(r),{replace:!0});case 5:case"end":return t.stop()}}),t)}))),[e,n.id,u,F,f,v,C,E],{title:"Page",successMessage:"Page updated successfully!"}),H=We((0,A.A)(N().mark((function t(){return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.deletePage(Number.parseInt(n.id));case 2:e("/admin/pages");case 3:case"end":return t.stop()}}),t)}))),[n.id,e],{title:"Page",successMessage:"Page deleted successfully!"});return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("h3",{children:"new"===n.id?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.OQW})," Create page"]}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.MT7})," Edit page"]})}),(0,U.jsxs)(Z.A,{className:"text-start mt-3",children:[(0,U.jsxs)(Z.A.Group,{children:[(0,U.jsx)(Z.A.Label,{children:"Permalink"}),(0,U.jsx)(Z.A.Control,{type:"text",placeholder:"Enter url",value:u,onChange:function(e){return h(e.target.value)}})]}),(0,U.jsxs)("div",{className:"d-flex gap-3 my-2",children:[(0,U.jsx)(Z.A.Group,{children:(0,U.jsx)(Z.A.Check,{id:"hidePageCheckbox",type:"checkbox",label:"Hide page",checked:f,onChange:function(e){return p(e.target.checked)}})}),(0,U.jsx)(Z.A.Group,{children:(0,U.jsx)(Z.A.Check,{id:"loginOnlyCheckbox",type:"checkbox",label:"Login only",checked:v,onChange:function(e){return y(e.target.checked)}})}),(0,U.jsx)(Z.A.Group,{children:(0,U.jsx)(Z.A.Check,{id:"supervisorOnlyCheckbox",type:"checkbox",label:"Supervisor only",checked:C,onChange:function(e){return S(e.target.checked)}})})]}),(0,U.jsxs)(Z.A.Group,{children:[(0,U.jsx)(Z.A.Label,{children:"Affiliations only (empty for all)"}),(0,U.jsx)(lt,{affiliations:a,selected:a.filter((function(e){return E.includes(e.id)})),onSelection:function(e){return M(e.map((function(e){return e.id})))}})]}),(0,U.jsxs)(Z.A.Group,{className:"text-start mt-3",children:[(0,U.jsx)(Z.A.Label,{children:"Page content"}),(0,U.jsx)(ot.KE,{language:"html",wrapperProps:{style:{display:"flex",position:"relative",textAlign:"initial",width:"100%",height:"70vh",overflow:"hidden",border:"var(--bs-border-width) solid var(--bs-border-color)",borderRadius:"var(--bs-border-radius)"}},theme:"dark"===te()?"vs-dark":"light",value:F,onChange:function(e){return T(e)}})]}),(0,U.jsxs)("div",{className:"text-center mt-3",children:[(0,U.jsx)(_.A,{variant:"success",onClick:G,children:"new"===n.id?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.hSh})," Create"]}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.hSh})," Save"]})})," ","new"!==n.id&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(l.N_,{to:u,target:"_blank",children:(0,U.jsxs)(_.A,{variant:"primary",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.pS3})," View"]})})," "]})," ","new"!==n.id&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(_.A,{variant:"danger",onClick:function(){return z(!0)},children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.yLS})," Delete"]})," "]}),(0,U.jsxs)(_.A,{variant:"secondary",onClick:function(){return e(-1)},children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.GRI})," Close"]})]})]}),(0,U.jsx)(zn,{show:O,onClose:function(){return z(!1)},confirmText:"Delete",confirmVariant:"danger",onConfirm:H,children:"Are you sure you want to delete the page?"})]})};var ut=function(e){switch(e){case F.NORMAL:return"Normal";case F.AUTH:return"Authenticated";case F.DYNAMIC:return"Dynamic"}},ht=function(e){if(0===e)return"0 Byte";var n=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,n)).toFixed(2)+" "+["Bytes","KB","MB","GB","TB"][n]},xt=function(e,n){if(e.length<=n)return e;var t=n-3,s=Math.ceil(t/2),r=Math.floor(t/2);return e.slice(0,s)+"..."+e.slice(e.length-r)};const mt=function(){var e=(0,r.useState)([]),n=(0,b.A)(e,2),t=n[0],s=n[1],a=(0,r.useState)([]),c=(0,b.A)(a,2),l=c[0],o=c[1],d=(0,r.useState)(F.NORMAL),u=(0,b.A)(d,2),h=u[0],x=u[1],m=(0,r.useState)(""),f=(0,b.A)(m,2),p=f[0],g=f[1],j=(0,r.useState)(""),v=(0,b.A)(j,2),y=v[0],w=v[1],k=(0,r.useState)(""),C=(0,b.A)(k,2),S=C[0],I=C[1],E=(0,r.useState)("-timestamp"),M=(0,b.A)(E,2),L=M[0],R=M[1];Ie((0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,P.getFiles();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)}))),[]);var T=We((0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.deleteFile(p);case 2:return e.t0=s,e.next=5,P.getFiles();case 5:e.t1=e.sent,(0,e.t0)(e.t1);case 7:case"end":return e.stop()}}),e)}))),[p],{finally:function(){return g("")},title:"File",successMessage:"File deleted successfully!"}),Y=(0,Kn.VB)({onDrop:function(e){o([].concat((0,i.A)(l),(0,i.A)(e)))}}),D=Y.getRootProps,O=Y.getInputProps,z=We(function(){var e=(0,A.A)(N().mark((function e(n,t){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.changeFileType(n,t);case 2:return e.t0=s,e.next=5,P.getFiles();case 5:e.t1=e.sent,(0,e.t0)(e.t1);case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),[],{title:"File",successMessage:"File type changed successfully!"}),G=We((0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==l.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,P.uploadFiles(h,l);case 4:return e.t0=s,e.next=7,P.getFiles();case 7:e.t1=e.sent,(0,e.t0)(e.t1),o([]);case 10:case"end":return e.stop()}}),e)}))),[h,l],{title:"File",successMessage:"Files uploaded successfully!"}),H=(0,r.useMemo)((function(){return(0,i.A)(t).filter((function(e){return 0===S.length||e.name.toLowerCase().includes(S)})).sort((function(e,n){var t=0;switch(L){case"timestamp":t=e.timestamp<n.timestamp?-1:1;break;case"size":t=e.size-n.size;break;case"name":t=e.name.toLowerCase()<n.name.toLowerCase()?-1:1;break;case"url":t=e.url.toLowerCase()<n.url.toLowerCase()?-1:1;break;case"-timestamp":t=-(e.timestamp<n.timestamp?-1:1);break;case"-size":t=-(e.size-n.size);break;case"-name":t=-(e.name.toLowerCase()<n.name.toLowerCase()?-1:1);break;case"-url":t=-(e.url.toLowerCase()<n.url.toLowerCase()?-1:1)}return t}))}),[t,S,L]),B=We(function(){var e=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(n.url);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[],{title:"File",successMessage:"File URL copied successfully!"});return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)("h3",{children:["Files (",H.length,"/",t.length,")"," ",(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.OQW})]}),(0,U.jsx)(Me.A,{className:"container mt-3",children:(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsx)(Re.A,{xs:12,lg:8,children:(0,U.jsxs)("section",{children:[(0,U.jsxs)("div",(0,W.A)((0,W.A)({},D({className:"dropzone"})),{},{children:[(0,U.jsx)("input",(0,W.A)({},O())),(0,U.jsx)(_.A,{variant:"info",className:"text-white",children:"Drag 'n' drop some files here, or click to select files"})]})),(0,U.jsxs)("aside",{children:[(0,U.jsx)("h4",{className:"mt-3",children:"Files to upload:"}),(0,U.jsx)("ul",{className:"list-group text-start",children:l.map((function(e){return(0,U.jsxs)("li",{className:"list-group-item",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.A4h,className:"ml-3"})," ",e.name," (",e.size," bytes)"]},e.name)}))}),(0,U.jsxs)(Z.A.Group,{className:"mt-3 justify-content-center",children:[(0,U.jsx)(Z.A.Label,{children:"File type:"}),(0,U.jsx)(Z.A.Select,{className:"w-30 m-auto",value:h,onChange:function(e){return x(e.target.value)},children:Object.values(F).map((function(e){return(0,U.jsx)("option",{value:e,children:ut(e)},e)}))})]}),(0,U.jsxs)(_.A,{variant:"success",className:"mt-3",onClick:G,children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.N72})," Upload file(s)"]})]})]})})})}),(0,U.jsx)("div",{className:"mt-5 w-50 m-auto",children:(0,U.jsx)(Z.A.Control,{type:"text",placeholder:"Search files",onChange:function(e){I(e.target.value.toLowerCase())}})}),(0,U.jsx)("div",{className:"table-responsive",children:(0,U.jsxs)($e.A,{striped:!0,bordered:!0,hover:!0,className:"mt-5 text-nowrap",children:[(0,U.jsx)("thead",{children:(0,U.jsxs)("tr",{children:[(0,U.jsxs)("th",{className:"align-middle cursor-pointer",onClick:function(){R("timestamp"===L?"-timestamp":"timestamp")},children:["Date"," ",(0,U.jsx)(X.g,{fixedWidth:!0,className:L.includes("timestamp")?"text-primary":"",icon:L.includes("timestamp")?L.includes("-")?$.Dvs:$.Ync:$.OM7})]}),(0,U.jsxs)("th",{className:"align-middle cursor-pointer",onClick:function(){R("name"===L?"-name":"name")},children:["Name"," ",(0,U.jsx)(X.g,{fixedWidth:!0,className:L.includes("name")?"text-primary":"",icon:L.includes("name")?L.includes("-")?$.Dvs:$.Ync:$.OM7})]}),(0,U.jsx)("th",{className:"align-middle",children:"Type"}),(0,U.jsxs)("th",{className:"align-middle cursor-pointer",onClick:function(){R("url"===L?"-url":"url")},children:["Url"," ",(0,U.jsx)(X.g,{fixedWidth:!0,className:L.includes("url")?"text-primary":"",icon:L.includes("url")?L.includes("-")?$.Dvs:$.Ync:$.OM7})]}),(0,U.jsxs)("th",{className:"align-middle cursor-pointer",onClick:function(){R("size"===L?"-size":"size")},children:["Size"," ",(0,U.jsx)(X.g,{fixedWidth:!0,className:L.includes("size")?"text-primary":"",icon:L.includes("size")?L.includes("-")?$.Dvs:$.Ync:$.OM7})]}),(0,U.jsx)("th",{className:"align-middle",children:"Copy"}),(0,U.jsx)("th",{className:"align-middle",children:"Delete"})]})}),(0,U.jsxs)("tbody",{children:[(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{colSpan:2,className:"align-middle font-weight-bold"}),(0,U.jsx)("td",{}),(0,U.jsx)("td",{colSpan:1,className:"align-middle font-weight-bold",children:"Total"}),(0,U.jsx)("td",{colSpan:1,className:"align-middle font-weight-bold",children:ht(t.reduce((function(e,n){return e+n.size}),0))}),(0,U.jsx)("td",{colSpan:1,className:"align-middle font-weight-bold"}),(0,U.jsx)("td",{colSpan:1,className:"align-middle font-weight-bold"})]}),H.map((function(e,n){return(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{className:"align-middle",children:Ge()(e.timestamp).format("YYYY-MM-DD HH:mm:ss")}),(0,U.jsx)("td",{className:"align-middle",children:xt(e.name,40)}),(0,U.jsx)("td",{className:"align-middle",children:e.type===F.DYNAMIC?(0,U.jsx)(U.Fragment,{children:"Dynamic"}):(0,U.jsx)(Z.A.Select,{value:e.type,onChange:function(n){return z(e.id,n.target.value)},children:Object.values(F).map((function(e){return(0,U.jsx)("option",{value:e,children:ut(e)},e)}))})}),(0,U.jsx)("td",{className:"align-middle",children:(0,U.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:xt(e.url,30)})}),(0,U.jsx)("td",{className:"align-middle",children:ht(e.size)}),(0,U.jsx)("td",{className:"align-midlde",children:(0,U.jsx)(_.A,{size:"sm",onClick:function(){return B(e)},children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.jPR})})}),(0,U.jsx)("td",{className:"align-middle",children:(0,U.jsx)(_.A,{size:"sm",variant:"danger",onClick:function(){w(e.name),g(e.id)},children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.yLS})})})]},n)}))]})]})}),(0,U.jsxs)(zn,{show:!!p,onClose:function(){return g("")},confirmText:"Delete",confirmVariant:"danger",onConfirm:T,children:["Are you sure you want to delete ",(0,U.jsx)("b",{children:y})," ?"]})]})},ft=function(){var e,n,t,s,a,i=(0,c.Zp)(),o=(0,c.zy)(),d=(0,r.useState)({affiliations:[],events:[],customFields:{}}),u=(0,b.A)(d,2),h=u[0],x=u[1],m=(0,r.useState)([]),f=(0,b.A)(m,2),p=f[0],g=f[1],j=(0,r.useState)([]),v=(0,b.A)(j,2),y=v[0],w=v[1],k=(0,r.useState)(0),C=(0,b.A)(k,2),S=C[0],E=C[1],M=(0,r.useState)(1),L=(0,b.A)(M,2),R=L[0],F=L[1],T=(0,r.useState)(null!==(e=new URLSearchParams(o.search).get("venue"))&&void 0!==e?e:"-1"),Y=(0,b.A)(T,2),D=Y[0],O=Y[1],z=(0,r.useState)(null!==(n=new URLSearchParams(o.search).get("event"))&&void 0!==n?n:"-1"),G=(0,b.A)(z,2),H=G[0],B=G[1],q=(0,r.useState)(null!==(t=new URLSearchParams(o.search).get("section"))&&void 0!==t?t:"-1"),V=(0,b.A)(q,2),Q=V[0],K=V[1],J=(0,r.useState)(null!==(s=new URLSearchParams(o.search).get("challenge"))&&void 0!==s?s:"-1"),ee=(0,b.A)(J,2),ne=ee[0],te=ee[1],se=(0,r.useState)(null!==(a=new URLSearchParams(o.search).get("valid"))&&void 0!==a?a:""),re=(0,b.A)(se,2),ae=re[0],ie=re[1],ce=We(function(){var e=(0,A.A)(N().mark((function e(n,t){var s;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.getAdminSubmissions(50*n,50,t);case 2:if(s=e.sent,F(Math.ceil(s.total/50)),0!==s.submissions.length||0===n){e.next=8;break}return e.next=7,ce(n-1,t);case 7:return e.abrupt("return");case 8:w(s.submissions),E(n);case 10:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),[]),le=We(function(){var e=(0,A.A)(N().mark((function e(n){var t,s;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(n),t={},s="/admin/submissions?","-1"!==D&&(t.affiliation=Number.parseInt(D),s+="venue=".concat(t.affiliation,"&")),"-1"!==H&&(t.event=Number.parseInt(H),s+="event=".concat(t.event,"&")),"-1"!==Q&&(t.section=Number.parseInt(Q),s+="section=".concat(t.section,"&")),"-1"!==ne&&(t.challenge=Number.parseInt(ne),s+="challenge=".concat(t.challenge,"&")),""!==ae&&(t.valid="true"===ae,s+="valid=".concat(t.valid,"&")),e.next=10,ce(n,t);case 10:i(s.slice(0,-1),{replace:!0});case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[D,ae,H,Q,ne,i,ce]);Ie((0,A.A)(N().mark((function e(){var n,t,s,r;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([P.getScoreboardSearchParams(),P.getAdminChallenges()]);case 2:return n=e.sent,t=(0,b.A)(n,2),s=t[0],r=t[1],e.next=8,le(0);case 8:x(s),g(r);case 10:case"end":return e.stop()}}),e)}))),[]);var oe,de,ue=(0,r.useCallback)((function(){var e=new URLSearchParams({token:P.token||"",download:""}),n=new URLSearchParams(o.search),t=n.get("venue")||"-1",s=n.get("event")||"-1",r=n.get("section")||"-1",a=n.get("challenge")||"-1",i=n.get("valid")||"";"-1"!==t&&e.set("affiliation",t),"-1"!==s&&e.set("event",s),"-1"!==r&&e.set("section",r),"-1"!==a&&e.set("challenge",a),""!==i&&e.set("valid",i);var c=document.createElement("a");c.href="/api/admin/submissions/export?"+e.toString(),document.body.appendChild(c),c.click(),document.body.removeChild(c)}),[o.search]);if("-1"!==H){var he,xe=h.events.find((function(e){return e.id===Number.parseInt(H)}));oe=null!==(he=null==xe?void 0:xe.sections.map((function(e){return(0,W.A)((0,W.A)({},e),{},{event:xe.name})})))&&void 0!==he?he:[]}else{oe=[];var me,fe=(0,I.A)(h.events);try{for(fe.s();!(me=fe.n()).done;){var pe,ge=me.value,je=(0,I.A)(ge.sections);try{for(je.s();!(pe=je.n()).done;){var ve=pe.value;oe.push((0,W.A)((0,W.A)({},ve),{},{event:ge.name}))}}catch(e){je.e(e)}finally{je.f()}}}catch(e){fe.e(e)}finally{fe.f()}}return de="-1"!==Q?p.filter((function(e){return e.sectionId===Number.parseInt(Q)})):p.filter((function(e){return-1!==oe.findIndex((function(n){return n.id===e.sectionId}))})),(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("h3",{children:"Submissions"}),(0,U.jsxs)(Le.A,{className:"justify-content-center",children:[(0,U.jsx)(Re.A,{xs:12,lg:3,className:"mt-3",children:(0,U.jsx)(Z.A.Group,{children:(0,U.jsxs)(Z.A.Select,{value:D,onChange:function(e){return O(e.target.value)},children:[(0,U.jsx)("option",{value:"-1",children:"All affiliations"}),h.affiliations.map((function(e){return(0,U.jsx)("option",{value:e.id,children:e.name},e.id)}))]})})}),(0,U.jsx)(Re.A,{xs:12,lg:2,className:"mt-3",children:(0,U.jsx)(Z.A.Group,{className:"m-0",children:(0,U.jsxs)(Z.A.Select,{value:H,onChange:function(e){return function(e){if("-1"===e)return B(e);var n=h.events.find((function(n){return n.id===Number.parseInt(e)})),t=n.sections.find((function(e){return e.id===Number.parseInt(Q)}));t||K("-1"),B(e);var s=p.find((function(e){return e.id===Number.parseInt(ne)}));s&&s.eventId!==Number.parseInt(e)&&te("-1")}(e.target.value)},children:[(0,U.jsx)("option",{value:"-1",children:"All events"}),h.events.map((function(e){return(0,U.jsx)("option",{value:e.id,children:e.name},e.id)}))]})})}),(0,U.jsx)(Re.A,{xs:12,lg:2,className:"mt-3",children:(0,U.jsx)(Z.A.Group,{className:"m-0",children:(0,U.jsxs)(Z.A.Select,{value:Q,onChange:function(e){return function(e){if("-1"===e)return K(e);K(e);var n=p.find((function(e){return e.id===Number.parseInt(ne)}));n&&n.sectionId!==Number.parseInt(e)&&te("-1")}(e.target.value)},children:[(0,U.jsx)("option",{value:"-1",children:"All sections"}),oe.map((function(e){return(0,U.jsxs)("option",{value:e.id,children:[e.event," - ",e.name]},e.id)}))]})})}),(0,U.jsx)(Re.A,{xs:12,lg:3,className:"mt-3",children:(0,U.jsx)(Z.A.Group,{className:"m-0",children:(0,U.jsxs)(Z.A.Select,{value:ne,onChange:function(e){return te(e.target.value)},children:[(0,U.jsx)("option",{value:"-1",children:"All challenges"}),de.map((function(e){return(0,U.jsx)("option",{value:e.id,children:e.title},e.id)}))]})})}),(0,U.jsx)(Re.A,{xs:12,lg:2,className:"mt-3",children:(0,U.jsx)(Z.A.Group,{children:(0,U.jsxs)(Z.A.Select,{value:ae,onChange:function(e){return ie(e.target.value)},children:[(0,U.jsx)("option",{value:"",children:"All types"}),(0,U.jsx)("option",{value:"true",children:"valid"}),(0,U.jsx)("option",{value:"false",children:"invalid"})]})})}),(0,U.jsx)(Re.A,{xs:8,lg:3,className:"mt-3",children:(0,U.jsxs)(_.A,{variant:"success",className:"w-100",onClick:function(){return le(0)},children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.mRM})," Filter submissions"]})}),(0,U.jsx)(Re.A,{xs:4,lg:1,className:"mt-3",children:(0,U.jsx)(_.A,{className:"w-100",onClick:function(){return ue()},children:"Export"})})]}),(0,U.jsxs)(Le.A,{className:"justify-content-center",children:[(0,U.jsx)(Re.A,{xs:6,md:2,className:"mt-3",children:(0,U.jsxs)(_.A,{className:"w-100",onClick:function(){return le(0)},children:[(0,U.jsx)(X.g,{icon:$.v2M})," First"]})}),(0,U.jsx)(Re.A,{xs:6,md:2,className:"mt-3",children:(0,U.jsxs)(_.A,{className:"w-100",onClick:function(){return le(Math.max(0,S-1))},children:[(0,U.jsx)(X.g,{icon:$.L4I})," Previous"]})}),(0,U.jsx)(Re.A,{xs:12,md:2,className:"mt-3",children:(0,U.jsx)(Z.A.Select,{className:"text-center",value:S,onChange:function(e){return le(parseInt(e.target.value))},children:Array.from({length:R},(function(e,n){return n})).map((function(e){return(0,U.jsx)("option",{value:e,children:e+1},e)}))})}),(0,U.jsx)(Re.A,{xs:6,md:2,className:"mt-3",children:(0,U.jsxs)(_.A,{className:"w-100",onClick:function(){return le(Math.min(R-1,S+1))},children:["Next ",(0,U.jsx)(X.g,{icon:$.BxI})]})}),(0,U.jsx)(Re.A,{xs:6,md:2,className:"mt-3",children:(0,U.jsxs)(_.A,{className:"w-100",onClick:function(){return le(R-1)},children:["Last ",(0,U.jsx)(X.g,{icon:$.byU})]})})]}),(0,U.jsx)("div",{className:"table-responsive",children:(0,U.jsxs)($e.A,{striped:!0,bordered:!0,hover:!0,className:"mt-5 text-nowrap text-start",children:[(0,U.jsx)("thead",{children:(0,U.jsxs)("tr",{children:[(0,U.jsx)("th",{className:"align-middle",children:"Correct"}),(0,U.jsx)("th",{className:"align-middle",children:"Date"}),(0,U.jsx)("th",{className:"align-middle",children:"User"}),(0,U.jsx)("th",{className:"align-middle",children:"Affiliation"}),(0,U.jsx)("th",{className:"align-middle",children:"Challenge"}),(0,U.jsx)("th",{className:"align-middle",children:"Flag"})]})}),(0,U.jsx)("tbody",{children:y.map((function(e,n){return(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{className:"align-middle",children:e.valid?"true":"false"}),(0,U.jsx)("td",{className:"align-middle",children:Ge()(e.timestamp).format("YYYY-MM-DD HH:mm:ss")}),(0,U.jsx)("td",{className:"align-middle",children:(0,U.jsxs)(l.N_,{to:"/player/"+e.user.id,children:[e.user.name," ",e.user.surname," ",null!==e.user.nickname?"(".concat(e.user.nickname,")"):""]})}),(0,U.jsx)("td",{className:"align-middle",children:(0,U.jsx)(l.N_,{to:"/scoreboard?venue=".concat(e.user.affiliation.id),children:e.user.affiliation.name})}),(0,U.jsx)("td",{className:"align-middle",children:(0,U.jsx)(l.N_,{to:"/challenges#challenge-".concat(e.challenge.id),children:e.challenge.title})}),(0,U.jsx)("td",{className:"align-middle text-monospace",title:e.flag,children:e.flag})]},n)}))})]})})]})};var pt=function(e){var n,t,s=e.spec,r=e.onChange,a=e.onDelete;return(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{className:"align-middle",children:(0,U.jsx)(Z.A.Control,{type:"text",value:s.name,placeholder:"Name",onChange:function(e){return r((0,W.A)((0,W.A)({},s),{},{name:e.target.value}))}})}),(0,U.jsxs)("td",{className:"align-middle",children:[(0,U.jsxs)(Z.A.Select,{value:s.type,onChange:function(e){"text"===e.target.value?r({type:"text",name:s.name,required:s.required,editable:s.editable,hidden:s.hidden,regex:void 0}):"choice"===e.target.value&&r({type:"choice",name:s.name,required:s.required,editable:s.editable,hidden:s.hidden,choices:[]})},children:[(0,U.jsx)("option",{value:"text",children:"Text"}),(0,U.jsx)("option",{value:"choice",children:"Choice"})]}),"text"===s.type?(0,U.jsxs)("div",{className:"mt-1",children:[(0,U.jsx)("small",{children:"Regex"}),(0,U.jsx)(Z.A.Control,{type:"text",value:s.regex,placeholder:"^...$",onChange:function(e){return r((0,W.A)((0,W.A)({},s),{},{regex:e.target.value||void 0}))}})]}):"choice"===s.type?(0,U.jsxs)("div",{className:"mt-1",children:[(0,U.jsxs)("small",{children:["Choices (",(null===(n=s.choices)||void 0===n?void 0:n.filter((function(e){return!!e})).length)||0,")"]}),(0,U.jsx)(Z.A.Control,{type:"text",value:(null===(t=s.choices)||void 0===t?void 0:t.join(","))||"",placeholder:"Comma separated list",onChange:function(e){return r((0,W.A)((0,W.A)({},s),{},{choices:e.target.value.split(",").map((function(e){return e.trim()}))}))}})]}):(0,U.jsx)(U.Fragment,{})]}),(0,U.jsx)("td",{className:"align-middle",children:(0,U.jsx)(Z.A.Control,{as:"textarea",rows:3,value:s.description,placeholder:"Description",onChange:function(e){return r((0,W.A)((0,W.A)({},s),{},{description:e.target.value}))}})}),(0,U.jsx)("td",{className:"align-middle text-center",children:s.required?(0,U.jsx)(_.A,{size:"sm",variant:"success",onClick:function(){return r((0,W.A)((0,W.A)({},s),{},{required:!1}))},children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.e68})}):(0,U.jsx)(_.A,{size:"sm",variant:"danger",onClick:function(){return r((0,W.A)((0,W.A)({},s),{},{required:!0}))},children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.GRI})})}),(0,U.jsx)("td",{className:"align-middle text-center",children:s.editable?(0,U.jsx)(_.A,{size:"sm",variant:"success",onClick:function(){return r((0,W.A)((0,W.A)({},s),{},{editable:!1}))},children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.e68})}):(0,U.jsx)(_.A,{size:"sm",variant:"danger",onClick:function(){return r((0,W.A)((0,W.A)({},s),{},{editable:!0}))},children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.GRI})})}),(0,U.jsx)("td",{className:"align-middle text-center",children:s.hidden?(0,U.jsx)(_.A,{size:"sm",variant:"success",onClick:function(){return r((0,W.A)((0,W.A)({},s),{},{hidden:!1}))},children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.e68})}):(0,U.jsx)(_.A,{size:"sm",variant:"danger",onClick:function(){return r((0,W.A)((0,W.A)({},s),{},{hidden:!0}))},children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.GRI})})}),(0,U.jsx)("td",{className:"align-middle text-center",children:(0,U.jsx)(_.A,{size:"sm",variant:"danger",onClick:function(){return a()},children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.yLS})})})]})};const gt=function(){var e=(0,r.useState)([]),n=(0,b.A)(e,2),t=n[0],s=n[1],a=(0,r.useState)(!1),c=(0,b.A)(a,2),l=c[0],o=c[1],d=(0,r.useState)(),u=(0,b.A)(d,2),h=u[0],x=u[1],m=(0,r.useState)(),f=(0,b.A)(m,2),p=f[0],g=f[1],j=(0,r.useState)(),v=(0,b.A)(j,2),y=v[0],w=v[1],k=(0,r.useState)([]),C=(0,b.A)(k,2),S=C[0],W=C[1],I=(0,r.useState)(!1),E=(0,b.A)(I,2),M=E[0],L=E[1],R=(0,r.useState)(!1),F=(0,b.A)(R,2),T=F[0],Y=F[1],D=(0,r.useState)(!1),O=(0,b.A)(D,2),z=O[0],G=O[1],H=(0,r.useState)(""),B=(0,b.A)(H,2),q=B[0],V=B[1],Q=(0,r.useState)(!1),K=(0,b.A)(Q,2),J=K[0],ee=K[1],ne=(0,r.useState)(!1),te=(0,b.A)(ne,2),se=te[0],re=te[1],ae=(0,r.useState)(!1),ie=(0,b.A)(ae,2),ce=ie[0],le=ie[1],oe=(0,r.useState)(10),de=(0,b.A)(oe,2),ue=de[0],he=de[1],xe=(0,r.useState)([]),me=(0,b.A)(xe,2),fe=me[0],pe=me[1],ge=(0,r.useState)([]),je=(0,b.A)(ge,2),ve=je[0],Ae=je[1],be=(0,r.useState)(!1),ye=(0,b.A)(be,2),Ne=ye[0],we=ye[1],ke=(0,r.useState)(!1),Ce=(0,b.A)(ke,2),Se=Ce[0],Ee=Ce[1],Fe=(0,r.useState)(!1),Te=(0,b.A)(Fe,2),Ye=Te[0],De=Te[1],Pe=(0,r.useState)(!1),Oe=(0,b.A)(Pe,2),ze=Oe[0],_e=Oe[1],Ue=(0,r.useState)(!1),He=(0,b.A)(Ue,2),Be=He[0],qe=He[1],Ve=(0,r.useState)(),Qe=(0,b.A)(Ve,2),Ke=Qe[0],Ze=Qe[1],Xe=(0,r.useState)(10),Je=(0,b.A)(Xe,2),en=Je[0],nn=Je[1],tn=(0,r.useState)([]),sn=(0,b.A)(tn,2),rn=sn[0],an=sn[1],cn=(0,r.useCallback)((0,A.A)(N().mark((function e(){var n,t,r,a;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([P.getAdminAffiliations(),P.getAdminConfigs()]);case 2:n=e.sent,t=(0,b.A)(n,2),r=t[0],a=t[1],s(r),o(a.pauseGame),W(a.categories),L(a.publicScoreboard),Y(a.tableScoreboard),G(a.nicknameChange),V(a.nicknameRegex),ee(a.hideAffiliation),le(a.supervisorLocks),re(a.enrollmentEnabled),he(a.maxSubmissionsPerMinute),pe(a.customFields),Ae(a.unlistedAffiliations),we(a.writeupsEnabled),Ee(a.writeupsEditingEnabled),De(a.writeupsSupervisorsEnabled),_e(a.disableScoreboardSnapshots),qe(a.hideChallengeAuthors),nn(a.overtakeWebhookTopn),an(a.fileUrls),a.gameStart&&x(Ge()(a.gameStart).format("YYYY-MM-DDTHH:mm")),a.gameEnd&&g(Ge()(a.gameEnd).format("YYYY-MM-DDTHH:mm")),a.gameFreeze&&w(Ge()(a.gameFreeze).format("YYYY-MM-DDTHH:mm")),a.overtakeWebhookStart&&Ze(Ge()(a.overtakeWebhookStart).format("YYYY-MM-DDTHH:mm"));case 30:case"end":return e.stop()}}),e)}))),[]);Ie((0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cn();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),[cn]);var ln=We((0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.setAdminConfigs({pauseGame:l,categories:S,publicScoreboard:M,tableScoreboard:T,nicknameChange:z,nicknameRegex:q,hideAffiliation:J,supervisorLocks:ce,enrollmentEnabled:se,maxSubmissionsPerMinute:ue,customFields:fe,unlistedAffiliations:ve,writeupsEnabled:Ne,writeupsEditingEnabled:Se,writeupsSupervisorsEnabled:Ye,disableScoreboardSnapshots:ze,hideChallengeAuthors:Be,overtakeWebhookTopn:en,fileUrls:rn,overtakeWebhookStart:Ke?Ge()(Ke,"YYYY-MM-DDTHH:mm").toISOString():void 0,gameStart:h?Ge()(h,"YYYY-MM-DDTHH:mm").toISOString():void 0,gameEnd:p?Ge()(p,"YYYY-MM-DDTHH:mm").toISOString():void 0,gameFreeze:y?Ge()(y,"YYYY-MM-DDTHH:mm").toISOString():void 0});case 2:return e.next=4,cn();case 4:case"end":return e.stop()}}),e)}))),[cn,l,h,p,y,S,M,T,z,q,J,ce,se,ue,fe,ve,Ne,Se,Ye,ze,Be,Ke,en,rn],{title:"Config",successMessage:"Configs saved successfully!"});return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("h3",{children:"Config"}),(0,U.jsxs)(Me.A,{className:"container mt-3",children:[(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsx)(Re.A,{xs:12,lg:6,children:(0,U.jsxs)(fn.A,{className:"text-start",children:[(0,U.jsxs)(fn.A.Item,{variant:"primary",className:"d-table",children:[(0,U.jsxs)("span",{className:"d-table-cell align-middle float-none",children:[(0,U.jsx)("div",{children:"Pause competition"}),(0,U.jsx)("small",{children:"Stop the competition overriding competition start and end. This is equivalent to the competition not having started yet."})]}),(0,U.jsx)(Yn(),{checked:l,onlabel:"Yes",onstyle:"success",offlabel:"No",offstyle:"danger",style:"mx-3 float-end",onChange:function(e){return o(e)}})]}),(0,U.jsxs)(fn.A.Item,{variant:"primary",className:"d-table",children:[(0,U.jsxs)("span",{className:"d-table-cell align-middle float-none",children:[(0,U.jsx)("div",{children:"Public scoreboard"}),(0,U.jsx)("small",{children:"Whether the scoreboard should be accessible without signin in."})]}),(0,U.jsx)(Yn(),{checked:M,onlabel:"Yes",onstyle:"success",offlabel:"No",offstyle:"danger",style:"mx-3 float-end",onChange:function(e){return L(e)}})]}),(0,U.jsxs)(fn.A.Item,{variant:"primary",className:"d-table",children:[(0,U.jsxs)("span",{className:"d-table-cell align-middle float-none",children:[(0,U.jsx)("div",{children:"Table scoreboard"}),(0,U.jsx)("small",{children:"Whether the scoreboard in table form should be available. It is advised to disable it when many users and/or challenges are present because it is computationally heavy."})]}),(0,U.jsx)(Yn(),{checked:T,onlabel:"Yes",onstyle:"success",offlabel:"No",offstyle:"danger",style:"mx-3 float-end",onChange:function(e){return Y(e)}})]}),(0,U.jsxs)(fn.A.Item,{variant:"primary",className:"d-table",children:[(0,U.jsxs)("span",{className:"d-table-cell align-middle float-none",children:[(0,U.jsx)("div",{children:"Allow nickname change"}),(0,U.jsx)("span",{children:"Whether users should be able to change their nickname. Nicknames are enforced to be unique."})]}),(0,U.jsx)(Yn(),{checked:z,onlabel:"Yes",onstyle:"success",offlabel:"No",offstyle:"danger",style:"mx-3 float-end",onChange:function(e){return G(e)}})]}),(0,U.jsxs)(fn.A.Item,{variant:"primary",className:"d-table",children:[(0,U.jsxs)("span",{className:"d-table-cell align-middle float-none",children:[(0,U.jsx)("div",{children:"Hide affiliation"}),(0,U.jsx)("small",{children:"Whether users should be able to see which affiliation they are part of."})]}),(0,U.jsx)(Yn(),{checked:J,onlabel:"Yes",onstyle:"success",offlabel:"No",offstyle:"danger",style:"mx-3 float-end",onChange:function(e){return ee(e)}})]}),(0,U.jsxs)(fn.A.Item,{variant:"primary",className:"d-table",children:[(0,U.jsxs)("span",{className:"d-table-cell align-middle float-none",children:[(0,U.jsx)("div",{children:"Enable supervisor locks"}),(0,U.jsx)("small",{children:"Whether supervisors should be able to hide challenges and scoreboard. Supervisor locks will not override admin configuration."})]}),(0,U.jsx)(Yn(),{checked:ce,onlabel:"Yes",onstyle:"success",offlabel:"No",offstyle:"danger",style:"mx-3 float-end",onChange:function(e){return le(e)}})]}),(0,U.jsxs)(fn.A.Item,{variant:"primary",className:"d-table",children:[(0,U.jsxs)("span",{className:"d-table-cell align-middle float-none",children:[(0,U.jsx)("div",{children:"Enable affiliation enrollment"}),(0,U.jsx)("small",{children:"Whether affiliation enrollment should be available. Each affiliation must enable enrollment from a supervisor account."})]}),(0,U.jsx)(Yn(),{checked:se,onlabel:"Yes",onstyle:"success",offlabel:"No",offstyle:"danger",style:"mx-3 float-end",onChange:function(e){return re(e)}})]}),(0,U.jsxs)(fn.A.Item,{variant:"primary",className:"d-table",children:[(0,U.jsxs)("span",{className:"d-table-cell align-middle float-none",children:[(0,U.jsx)("div",{children:"Enable writeups"}),(0,U.jsx)("small",{children:"Whether to enable to writeups functionality."})]}),(0,U.jsx)(Yn(),{checked:Ne,onlabel:"Yes",onstyle:"success",offlabel:"No",offstyle:"danger",style:"mx-3 float-end",onChange:function(e){return we(e)}})]}),(0,U.jsxs)(fn.A.Item,{variant:"primary",className:"d-table",children:[(0,U.jsxs)("span",{className:"d-table-cell align-middle float-none",children:[(0,U.jsx)("div",{children:"Enable writeups upload / editing"}),(0,U.jsx)("small",{children:"Allow upload and editing of writeups by players."})]}),(0,U.jsx)(Yn(),{checked:Se,onlabel:"Yes",onstyle:"success",offlabel:"No",offstyle:"danger",style:"mx-3 float-end",onChange:function(e){return Ee(e)}})]}),(0,U.jsxs)(fn.A.Item,{variant:"primary",className:"d-table",children:[(0,U.jsxs)("span",{className:"d-table-cell align-middle float-none",children:[(0,U.jsx)("div",{children:"Allow supervisors view writeups"}),(0,U.jsx)("small",{children:"Whether supervisors should be able to see writeups from players of their affiliation."})]}),(0,U.jsx)(Yn(),{checked:Ye,onlabel:"Yes",onstyle:"success",offlabel:"No",offstyle:"danger",style:"mx-3 float-end",onChange:function(e){return De(e)}})]}),(0,U.jsxs)(fn.A.Item,{variant:"primary",className:"d-table",children:[(0,U.jsxs)("span",{className:"d-table-cell align-middle float-none",children:[(0,U.jsx)("div",{children:"Disable scoreboard snapshots"}),(0,U.jsx)("small",{children:"Whether scoreboard snapshots should be disabled. It is advised to disable them when many users and/or challenges are present. Disabling snapshots will inhibit the possibility to have a scoreboard chart."})]}),(0,U.jsx)(Yn(),{checked:ze,onlabel:"Yes",onstyle:"success",offlabel:"No",offstyle:"danger",style:"mx-3 float-end",onChange:function(e){return _e(e)}})]}),(0,U.jsxs)(fn.A.Item,{variant:"primary",className:"d-table",children:[(0,U.jsxs)("span",{className:"d-table-cell align-middle float-none",children:[(0,U.jsx)("div",{children:"Hide challenge authors"}),(0,U.jsx)("small",{children:"Whether authors should be hidden in the challenges list and details. Authors are hidden from everyone, including admins."})]}),(0,U.jsx)(Yn(),{checked:Be,onlabel:"Yes",onstyle:"success",offlabel:"No",offstyle:"danger",style:"mx-3 float-end",onChange:function(e){return qe(e)}})]})]})})}),(0,U.jsxs)(Le.A,{className:"justify-content-center",children:[(0,U.jsx)(Re.A,{xs:12,className:"mt-5",children:(0,U.jsxs)("h4",{children:[(0,U.jsx)(X.g,{icon:$.a$,fixedWidth:!0})," Competition duration"]})}),(0,U.jsxs)(Re.A,{xs:12,lg:3,className:"mt-2",children:[(0,U.jsx)("h5",{children:"Start date"}),(0,U.jsx)(Z.A.Control,{value:h,type:"datetime-local",onChange:function(e){return x(e.target.value)}})]}),h&&p&&(0,U.jsxs)(Re.A,{lg:2,className:"mt-2 d-none d-lg-block",children:[(0,U.jsx)("h5",{children:"Duration"}),(0,U.jsx)("div",{children:Ge().duration(new Date(p).getTime()-new Date(h).getTime()).humanize()})]}),(0,U.jsxs)(Re.A,{xs:12,lg:3,className:"mt-2",children:[(0,U.jsx)("h5",{children:"End date"}),(0,U.jsx)(Z.A.Control,{value:p,type:"datetime-local",onChange:function(e){return g(e.target.value)}})]})]}),(0,U.jsxs)(Le.A,{className:"justify-content-center",children:[(0,U.jsx)(Re.A,{xs:12,className:"mt-3",children:(0,U.jsxs)("h4",{children:[(0,U.jsx)(X.g,{icon:$.Wkq,fixedWidth:!0})," Scoreboard freeze"]})}),(0,U.jsx)(Re.A,{xs:3,className:"mt-1",children:(0,U.jsx)(Z.A.Control,{value:y,type:"datetime-local",onChange:function(e){return w(e.target.value)}})})]}),(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsxs)(Re.A,{xs:12,lg:6,className:"mt-3",children:[(0,U.jsxs)(Z.A.Group,{className:"mt-3 text-start",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.k6j,fixedWidth:!0})," Unlisted affiliations"]})}),(0,U.jsx)(lt,{affiliations:t,selected:t.filter((function(e){return ve.includes(e.id)})),onSelection:function(e){return Ae(e.map((function(e){return e.id})))}}),(0,U.jsx)("small",{children:"Unlisted affiliations cannot be used to filter the scoreboard."})]}),(0,U.jsxs)(Z.A.Group,{className:"mt-3 text-start",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.Cwk,fixedWidth:!0})," Categories"]})}),(0,U.jsx)(Z.A.Control,{type:"text",placeholder:"Categories",value:S.join(","),onChange:function(e){return W(e.target.value.split(",").map((function(e){return e.trim()})))}})]}),(0,U.jsxs)(Z.A.Group,{className:"mt-3 text-start",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.pCJ,fixedWidth:!0})," Nickname regex"]})}),(0,U.jsx)(Z.A.Control,{type:"text",placeholder:"Nickname regex (remember ^...$)",value:q,onChange:function(e){return V(e.target.value)}})]}),(0,U.jsxs)(Z.A.Group,{className:"mt-3 text-start",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.ld_,fixedWidth:!0})," Max submissions per minute"]})}),(0,U.jsx)(Z.A.Control,{type:"number",min:"0",placeholder:"Max submissions per minute",value:ue,onChange:function(e){return he(parseInt(e.target.value))}})]}),(0,U.jsxs)(Z.A.Group,{className:"mt-3 text-start",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.CQO,fixedWidth:!0})," Authenticated attachment URLs"]})}),(0,U.jsx)(Z.A.Control,{type:"text",placeholder:"URL prefixes (comma separated)",value:rn.join(","),onChange:function(e){return an(e.target.value.split(",").map((function(e){return e.trim()})))}})]})]})}),(0,U.jsxs)(Le.A,{className:"justify-content-center",children:[(0,U.jsx)(Re.A,{xs:12,className:"mt-3",children:(0,U.jsxs)("h4",{children:[(0,U.jsx)(X.g,{icon:$.z$e,fixedWidth:!0})," Webhooks"]})}),(0,U.jsxs)(Re.A,{xs:12,lg:3,className:"mt-2",children:[(0,U.jsx)("h5",{children:"Overtake start date"}),(0,U.jsx)(Z.A.Control,{value:Ke,type:"datetime-local",onChange:function(e){return Ze(e.target.value)}})]}),(0,U.jsxs)(Re.A,{xs:12,lg:3,className:"mt-2",children:[(0,U.jsx)("h5",{children:"Overtake minimum position"}),(0,U.jsx)(Z.A.Control,{value:en,type:"number",min:0,onChange:function(e){return nn(parseInt(e.target.value))}})]})]}),(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsx)(Re.A,{xs:12,lg:8,className:"mt-2",children:(0,U.jsxs)(Z.A.Group,{className:"mt-3 text-start",children:[(0,U.jsxs)(Z.A.Label,{className:"w-100 text-center",children:[(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.McB,fixedWidth:!0})," Custom fields"]}),(0,U.jsxs)("small",{children:["It is advised to setup all custom fields before allowing registration to avoid problems. Renaming or creating new custom fields has an undefined behaviour.",(0,U.jsx)("br",{}),'All fields, unless they are marked as "hidden", are shown in the scoreboard.',(0,U.jsx)("br",{}),"Description is optional and can be used to show a hint text during registration."]})]}),(0,U.jsx)("div",{className:"table-responsive mt-3",children:(0,U.jsxs)($e.A,{striped:!0,bordered:!0,className:"text-nowrap",children:[(0,U.jsx)("thead",{children:(0,U.jsxs)("tr",{children:[(0,U.jsx)("th",{className:"align-middle",children:"Name"}),(0,U.jsx)("th",{className:"align-middle",children:"Type"}),(0,U.jsx)("th",{className:"align-middle",children:"Description"}),(0,U.jsx)("th",{className:"align-middle text-center",children:"Required"}),(0,U.jsx)("th",{className:"align-middle text-center",children:"Editable"}),(0,U.jsx)("th",{className:"align-middle text-center",children:"Hidden"}),(0,U.jsx)("th",{className:"align-middle text-center",children:"Delete"})]})}),(0,U.jsx)("tbody",{children:fe.map((function(e,n){return(0,U.jsx)(pt,{spec:e,onChange:function(e){fe.splice(n,1,e),pe((0,i.A)(fe))},onDelete:function(){fe.splice(n,1),pe((0,i.A)(fe))}},n)}))})]})}),(0,U.jsxs)(_.A,{className:"float-end",variant:"outline-primary",onClick:function(){return pe([].concat((0,i.A)(fe),[{name:"",required:!1,editable:!1,hidden:!1,type:"text"}]))},children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.QLR})," Add"]})]})})})]}),(0,U.jsx)(Me.A,{className:"container mt-5",children:(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsx)(Re.A,{xs:12,lg:6,children:(0,U.jsx)("h3",{children:(0,U.jsxs)(_.A,{variant:"success",onClick:ln,children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.hSh})," Save"]})})})})})]})},jt=function(){var e=(0,r.useState)([]),n=(0,b.A)(e,2),t=n[0],s=n[1],a=(0,r.useState)(""),i=(0,b.A)(a,2),c=i[0],l=i[1],o=(0,r.useState)(0),d=(0,b.A)(o,2),u=d[0],h=d[1],x=(0,r.useState)(-1),m=(0,b.A)(x,2),f=m[0],p=m[1],g=(0,r.useState)({eventId:-1,name:"",order:0}),j=(0,b.A)(g,2),v=j[0],y=j[1],w=(0,r.useState)({eventId:-1,sectionId:-1}),k=(0,b.A)(w,2),C=k[0],S=k[1],I=We((0,A.A)(N().mark((function e(){var n;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.getAdminEvents();case 2:n=e.sent,s(n);case 4:case"end":return e.stop()}}),e)}))),[]);(0,r.useEffect)((function(){I()}),[I]);var E=We((0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.upsertAdminEvent(f>=0?f:"new",c,u);case 2:return e.next=4,I();case 4:l(""),h(0),p(-1);case 7:case"end":return e.stop()}}),e)}))),[c,u,f,I],{title:"Event",successMessage:f>=0?"Event updated successfully!":"New event created successfully!"}),M=We(function(){var e=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.deleteAdminEvent(n);case 2:return e.next=4,I();case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[I],{title:"Event",successMessage:"Event deleted successfully!"}),L=We(function(){var e=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(C.sectionId>=0)){e.next=5;break}return e.next=3,P.updateAdminEventSection(C.sectionId,v.name,v.order);case 3:e.next=7;break;case 5:return e.next=7,P.createAdminEventSection(n,v.name,v.order);case 7:return e.next=9,I();case 9:y({eventId:-1,name:"",order:0}),S({eventId:-1,sectionId:-1});case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[v,C,I],{title:"Event section",successMessage:C.sectionId>=0?"Event section updated successfully!":"New event section created successfully!"}),R=We(function(){var e=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.deleteAdminEventSection(n);case 2:return e.next=4,I();case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[I],{title:"Event section",successMessage:"Event section deleted successfully!"});return(0,U.jsx)(U.Fragment,{children:(0,U.jsxs)("div",{className:"text-start col-12 col-lg-8 mx-auto mt-5",children:[(0,U.jsxs)(fn.A,{className:"w-100 mt-3 mx-auto align-items-stretch",children:[(0,U.jsx)(fn.A.Item,{className:"bg-blue text-white text-center",children:(0,U.jsx)("h5",{className:"m-0",children:"Events"})}),t.map((function(e){return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(fn.A.Item,{className:"bg-blue-light text-white py-3 line-height-1 d-flex",children:[(0,U.jsx)("span",{className:"flex-grow-1",children:e.name}),(0,U.jsxs)(_e.A,{bg:"info",className:"float-end",children:["ID: ",e.id]}),(0,U.jsxs)(_e.A,{bg:"info",className:"float-end ms-2",children:["Order: ",e.order]}),(0,U.jsx)(_e.A,{bg:"secondary",className:"cursor-pointer ms-2",onClick:function(){p(e.id),l(e.name),h(e.order)},children:(0,U.jsx)(X.g,{icon:$.MT7,fixedWidth:!0,size:"sm"})}),0===e.sections.length&&(0,U.jsx)(_e.A,{bg:"danger",className:"cursor-pointer ms-2",onClick:function(){return M(e.id)},children:(0,U.jsx)(X.g,{icon:$.yLS,fixedWidth:!0,size:"sm"})})]},e.id),e.sections.map((function(n){return(0,U.jsxs)(fn.A.Item,{className:"py-2 line-height-1 d-flex",children:[(0,U.jsx)("span",{className:"flex-grow-1",children:n.name}),(0,U.jsxs)(_e.A,{bg:"warning",text:"dark",children:["ID: ",n.id]}),(0,U.jsxs)(_e.A,{bg:"warning",text:"dark",className:"ms-2",children:["Order: ",n.order]}),(0,U.jsx)(_e.A,{bg:"secondary",className:"cursor-pointer ms-2",onClick:function(){S({eventId:e.id,sectionId:n.id}),y({eventId:e.id,name:n.name,order:n.order})},children:(0,U.jsx)(X.g,{icon:$.MT7,fixedWidth:!0,size:"sm"})}),(0,U.jsx)(_e.A,{bg:"danger",className:"cursor-pointer ms-2",onClick:function(){return R(n.id)},children:(0,U.jsx)(X.g,{icon:$.yLS,fixedWidth:!0,size:"sm"})})]},n.id)})),(0,U.jsx)(fn.A.Item,{children:(0,U.jsxs)(Ze.A,{size:"sm",children:[C.eventId===e.id&&C.sectionId>=0&&(0,U.jsxs)(Ze.A.Text,{children:["Edit section #",C.sectionId]}),(0,U.jsx)(Ze.A.Text,{children:"Name"}),(0,U.jsx)(Z.A.Control,{type:"text",placeholder:C.eventId===e.id&&C.sectionId>=0?"Rename event section":"Create new event section",value:v.eventId===e.id?v.name:"",onChange:function(n){return y((0,W.A)((0,W.A)({},v),{},{eventId:e.id,name:n.target.value}))}}),(0,U.jsx)(Ze.A.Text,{children:"Order"}),(0,U.jsx)(Z.A.Control,{style:{flexGrow:.1},type:"number",min:0,value:v.eventId===e.id?v.order:0,onChange:function(n){return y((0,W.A)((0,W.A)({},v),{},{eventId:e.id,order:parseInt(n.target.value)}))}}),C.eventId===e.id&&C.sectionId>=0?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(_.A,{variant:"outline-secondary",onClick:function(){y({eventId:-1,name:"",order:0}),S({eventId:-1,sectionId:-1})},children:[(0,U.jsx)(X.g,{icon:$.GRI,fixedWidth:!0})," Cancel"]}),(0,U.jsxs)(_.A,{variant:"outline-info",onClick:function(){return L(e.id)},disabled:v.eventId!==e.id||!v.name,children:[(0,U.jsx)(X.g,{icon:$.hSh,fixedWidth:!0})," Save"]})]}):(0,U.jsx)(U.Fragment,{children:(0,U.jsxs)(_.A,{variant:"outline-info",onClick:function(){return L(e.id)},disabled:v.eventId!==e.id||!v.name,children:[(0,U.jsx)(X.g,{icon:$.QLR,fixedWidth:!0})," Create"]})})]})},"new")]})}))]}),(0,U.jsxs)(Ze.A,{className:"mt-3",children:[f>=0&&(0,U.jsxs)(Ze.A.Text,{children:["Edit event #",f]}),(0,U.jsx)(Ze.A.Text,{children:"Name"}),(0,U.jsx)(Z.A.Control,{type:"text",placeholder:f>=0?"Rename event":"Create new event",value:c,onChange:function(e){return l(e.target.value)}}),(0,U.jsx)(Ze.A.Text,{children:"Order"}),(0,U.jsx)(Z.A.Control,{type:"number",style:{flexGrow:.1},min:0,value:u,onChange:function(e){return h(parseInt(e.target.value))}}),f>=0?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(_.A,{variant:"outline-secondary",onClick:function(){l(""),h(0),p(-1)},children:[(0,U.jsx)(X.g,{icon:$.GRI,fixedWidth:!0})," Cancel"]}),(0,U.jsxs)(_.A,{variant:"outline-info",onClick:function(){return E()},disabled:!c,children:[(0,U.jsx)(X.g,{icon:$.hSh,fixedWidth:!0})," Save"]})]}):(0,U.jsx)(U.Fragment,{children:(0,U.jsxs)(_.A,{variant:"outline-info",onClick:function(){return E()},disabled:!c,children:[(0,U.jsx)(X.g,{icon:$.QLR,fixedWidth:!0})," Create"]})})]})]})})};vn.t1.register(vn.Bs,vn.UA,vn.kc,vn.FN,vn.No,vn.E8,vn.s$,vn.m_);var vt=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],At=["rgba(31, 119, 180, 0.5)","rgba(255, 127, 14, 0.5)","rgba(44, 160, 44, 0.5)","rgba(214, 39, 40, 0.5)","rgba(148, 103, 189, 0.5)","rgba(140, 86, 75, 0.5)","rgba(227, 119, 194, 0.5)","rgba(127, 127, 127, 0.5)","rgba(188, 189, 34, 0.5)","rgba(23, 190, 207, 0.5)","rgba(221, 240, 255, 0.5)","rgba(113, 143, 148, 0.5)","rgba(255, 180, 0, 0.5)"];const bt=function(){var e=(0,r.useState)(),n=(0,b.A)(e,2),t=n[0],s=n[1];Ie((0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,P.getStatistics();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)}))),[]);var a={data:{datasets:[{data:[],backgroundColor:vt}],labels:[]},options:{title:{display:!1,text:"Users by group"},responsive:!0}},c={data:{datasets:[{data:[],backgroundColor:vt}],labels:[]},options:{title:{display:!1,text:"Flag submissions"},responsive:!0}},l=(0,r.useMemo)((function(){if(t){var e,n={labels:[],datasets:[]},s=t.charts.submissions.valid.map((function(e){return e.day})),r=t.charts.submissions.invalid.map((function(e){return e.day})),a=Array.from(new Set([].concat((0,i.A)(r),(0,i.A)(s)))).sort(),c=["valid","invalid"],l={},o={valid:{},invalid:{}},d=(0,I.A)(a);try{for(d.s();!(e=d.n()).done;){var u=e.value;o.valid[u]=0,o.invalid[u]=0}}catch(e){d.e(e)}finally{d.f()}var h,x=(0,I.A)(t.charts.submissions.valid);try{for(x.s();!(h=x.n()).done;){var m=h.value;o.valid[m.day]=parseInt(m.count,10)}}catch(e){x.e(e)}finally{x.f()}var f,p=(0,I.A)(t.charts.submissions.invalid);try{for(p.s();!(f=p.n()).done;){var g=f.value;o.invalid[g.day]=parseInt(g.count,10)}}catch(e){p.e(e)}finally{p.f()}for(var j=0,v=c;j<v.length;j++){var A=v[j];n.datasets.push({label:A,fill:!0,pointBackgroundColor:vt[c.indexOf(A)],borderColor:vt[c.indexOf(A)],backgroundColor:At[c.indexOf(A)],borderCapStyle:"butt",data:[]}),l[A]=0}var b,y=(0,I.A)(a);try{for(y.s();!(b=y.n()).done;){var N=b.value;n.labels.push(N);var w,k=(0,I.A)(c);try{for(k.s();!(w=k.n()).done;){var C=w.value;l[C]+=o[C][N],n.datasets[c.indexOf(C)].data.push(l[C])}}catch(e){k.e(e)}finally{k.f()}}}catch(e){y.e(e)}finally{y.f()}return n}}),[t]),o=(0,r.useMemo)((function(){if(t){var e,n={labels:[],datasets:[]},s=t.charts.submissions.valid.map((function(e){return e.day})),r=t.charts.submissions.invalid.map((function(e){return e.day})),a=Array.from(new Set([].concat((0,i.A)(r),(0,i.A)(s)))).sort(),c=["valid","invalid"],l={},o={valid:{},invalid:{}},d=(0,I.A)(a);try{for(d.s();!(e=d.n()).done;){var u=e.value;o.valid[u]=0,o.invalid[u]=0}}catch(e){d.e(e)}finally{d.f()}var h,x=(0,I.A)(t.charts.submissions.valid);try{for(x.s();!(h=x.n()).done;){var m=h.value;o.valid[m.day]=parseInt(m.count,10)}}catch(e){x.e(e)}finally{x.f()}var f,p=(0,I.A)(t.charts.submissions.invalid);try{for(p.s();!(f=p.n()).done;){var g=f.value;o.invalid[g.day]=parseInt(g.count,10)}}catch(e){p.e(e)}finally{p.f()}for(var j=0,v=c;j<v.length;j++){var A=v[j];n.datasets.push({label:A,borderColor:vt[c.indexOf(A)],backgroundColor:At[c.indexOf(A)],data:[]}),l[A]=0}var b,y=(0,I.A)(a);try{for(y.s();!(b=y.n()).done;){var N=b.value;n.labels.push(N);var w,k=(0,I.A)(c);try{for(k.s();!(w=k.n()).done;){var C=w.value;l[C]=o[C][N],n.datasets[c.indexOf(C)].data.push(l[C])}}catch(e){k.e(e)}finally{k.f()}}}catch(e){y.e(e)}finally{y.f()}return n}}),[t]);if(void 0!==t){var d,u=(0,I.A)(t.users);try{for(u.s();!(d=u.n()).done;){var h=d.value;a.data.datasets[0].data.push(parseInt(h.count)),a.data.labels.push(h.group)}}catch(e){u.e(e)}finally{u.f()}}if(void 0!==t){var x,m=(0,I.A)(t.submissions);try{for(m.s();!(x=m.n()).done;){var f=x.value;c.data.datasets[0].data.push(parseInt(f.count)),c.data.labels.push(f.valid?"valid":"invalid")}}catch(e){m.e(e)}finally{m.f()}}return l&&o?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("h3",{children:"Platform Statistics"}),(0,U.jsxs)(Le.A,{className:"justify-content-center text-center",children:[(0,U.jsxs)(Re.A,{xs:12,lg:6,className:"mt-3",children:[(0,U.jsx)("h5",{children:"Users by group"}),(0,U.jsx)(jn.nu,{data:a.data,options:a.options,className:"p-5 m-auto"}),(0,U.jsxs)(fn.A,{className:"w-75 text-start mx-auto mt-3",children:[(0,U.jsx)(pn.A,{active:!0,children:(0,U.jsxs)("h5",{className:"m-0 text-center",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.X46})," Users"]})}),(0,U.jsxs)(pn.A,{children:["Total"," ",(0,U.jsx)(_e.A,{bg:"danger",className:"float-end",children:void 0!==t&&t.users.reduce((function(e,n){return e+parseInt(n.count)}),0)})]}),void 0!==t&&t.users.map((function(e,n){return(0,U.jsxs)(pn.A,{children:[e.group," ",(0,U.jsx)(_e.A,{bg:"danger",className:"float-end",children:e.count})]},n)}))]})]}),(0,U.jsxs)(Re.A,{xs:12,lg:6,className:"mt-3",children:[(0,U.jsx)("h5",{children:"Flag submissions"}),(0,U.jsx)(jn.nu,{data:c.data,options:c.options,className:"p-5 m-auto"}),(0,U.jsxs)(fn.A,{className:"w-75 text-start mx-auto mt-3",children:[(0,U.jsx)(pn.A,{active:!0,children:(0,U.jsxs)("h5",{className:"m-0 text-center",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.s6x})," Flags"]})}),(0,U.jsxs)(pn.A,{children:["Total"," ",(0,U.jsx)(_e.A,{bg:"danger",className:"float-end",children:void 0!==t&&t.submissions.reduce((function(e,n){return e+parseInt(n.count)}),0)})]}),void 0!==t&&t.submissions.map((function(e,n){return(0,U.jsxs)(pn.A,{children:[e.valid?"Valid":"Invalid"," ",(0,U.jsx)(_e.A,{bg:"danger",className:"float-end",children:e.count})]},n)}))]})]})]}),(0,U.jsx)(Le.A,{className:"justify-content-center mt-5",children:(0,U.jsx)(Re.A,{xs:12,lg:4,children:(0,U.jsxs)(fn.A,{className:"w-100 text-start",children:[(0,U.jsx)(pn.A,{active:!0,children:(0,U.jsxs)("h5",{className:"m-0 text-center",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.gK3})," General statistics"]})}),(0,U.jsxs)(pn.A,{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.QnR})," Affiliations"," ",(0,U.jsx)(_e.A,{bg:"danger",className:"float-end",children:null==t?void 0:t.affiliations})]}),(0,U.jsxs)(pn.A,{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.A4h})," Pages"," ",(0,U.jsx)(_e.A,{bg:"danger",className:"float-end",children:null==t?void 0:t.pages})]}),(0,U.jsxs)(pn.A,{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.ao0})," Files"," ",(0,U.jsx)(_e.A,{bg:"danger",className:"float-end",children:null==t?void 0:t.files})]}),(0,U.jsxs)(pn.A,{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.s6x})," Challenges"," ",(0,U.jsx)(_e.A,{bg:"danger",className:"float-end",children:null==t?void 0:t.challenges})]}),(0,U.jsxs)(pn.A,{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.wRm})," Unlocked hints"," ",(0,U.jsx)(_e.A,{bg:"danger",className:"float-end",children:null==t?void 0:t.hints})]})]})})}),(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsxs)(Re.A,{xs:12,lg:10,children:[(0,U.jsx)("h5",{className:"text-center mt-3",children:"Cumulative flag submission over time"}),(0,U.jsx)(jn.N1,{data:l,options:{elements:{point:{radius:2}},scales:{x:{type:"time",title:{display:!0},grid:{lineWidth:2},time:{unit:"day",stepSize:1,displayFormats:{millisecond:"DD/MM/YYYY",second:"DD/MM/YYYY",minute:"DD/MM/YYYY",hour:"DD/MM/YYYY",day:"DD/MM/YYYY",week:"DD/MM/YYYY",month:"DD/MM/YYYY",quarter:"DD/MM/YYYY",year:"DD/MM/YYYY"}}},y:{stacked:!0}}}})]})}),(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsxs)(Re.A,{xs:12,lg:10,children:[(0,U.jsx)("h5",{className:"text-center mt-3",children:"Flag submission over time"}),(0,U.jsx)(jn.yP,{data:o,options:{elements:{point:{radius:2}},scales:{x:{type:"time",title:{display:!0},grid:{lineWidth:2},time:{unit:"day",stepSize:1,displayFormats:{millisecond:"DD/MM/YYYY",second:"DD/MM/YYYY",minute:"DD/MM/YYYY",hour:"DD/MM/YYYY",day:"DD/MM/YYYY",week:"DD/MM/YYYY",month:"DD/MM/YYYY",quarter:"DD/MM/YYYY",year:"DD/MM/YYYY"}}},y:{stacked:!0}}}})]})})]}):(0,U.jsx)(U.Fragment,{})};var yt=function(e){switch(e){case T.FIRST_BLOOD:return"First blood";case T.SOLVE:return"Solve";case T.COMPETITION_START:return"Game start";case T.COMPETITION_END:return"Game end";case T.COMPETITION_FREEZE:return"Scoreboard freeze";case T.SECTION_FULL_SOLVE:return"Section full solve";case T.GLOBAL_FULL_SOLVE:return"Global full solve";case T.OVERTAKE:return"Overtake"}},Nt=function(e){switch(e){case T.FIRST_BLOOD:case T.SOLVE:case T.SECTION_FULL_SOLVE:case T.GLOBAL_FULL_SOLVE:return(0,U.jsxs)(U.Fragment,{children:["The following fields are available:"," ",["id","flag","timestamp","challenge.id","challenge.title","challenge.tags","challenge.hiddenTags","challenge.statusCheckerKey","challenge.section.id","challenge.section.name","challenge.section.event.id","challenge.section.event.name","player.id","player.name","player.surname","player.nickname","player.affiliation.id","player.affiliation.name"].flatMap((function(e){return[(0,U.jsx)("code",{children:e},e),(0,U.jsx)(U.Fragment,{children:", "})]})).slice(0,-1)]});case T.OVERTAKE:return(0,U.jsxs)(U.Fragment,{children:["The following fields are available:"," ",["player.id","player.name","player.surname","player.nickname","player.affiliation.id","player.affiliation.name","prevPosition","prevPositionOrdinal","newPosition","newPositionOrdinal","positionDiff"].flatMap((function(e){return[(0,U.jsx)("code",{children:e},e),(0,U.jsx)(U.Fragment,{children:", "})]})).slice(0,-1)]})}},wt=function(e){switch(e){case Y.GENERIC:return"Generic";case Y.DISCORD:return"Discord";case Y.DISCORD_EMBED:return"Discord Embed"}};const kt=function(){var e=(0,r.useState)([]),n=(0,b.A)(e,2),t=n[0],s=n[1];Ie((0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,P.getAdminWebhooks();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)}))),[]);var a=We(function(){var e=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.deleteWebhook(n);case 2:return e.t0=s,e.next=5,P.getAdminWebhooks();case 5:e.t1=e.sent,(0,e.t0)(e.t1);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[],{title:"Webhook",successMessage:"Webhook deleted successfully!"}),i=We(function(){var e=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.testWebhook(n);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[],{title:"Webhook",successMessage:"Webhook test sent successfully!"});return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)("h3",{children:["Webhooks"," ",(0,U.jsx)(l.N_,{to:"/admin/webhooks/new",style:{color:"inherit"},children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.OQW})})]}),(0,U.jsx)("div",{className:"table-responsive",children:(0,U.jsxs)($e.A,{striped:!0,bordered:!0,hover:!0,className:"mt-3 text-nowrap text-start",children:[(0,U.jsx)("thead",{children:(0,U.jsxs)("tr",{children:[(0,U.jsx)("th",{className:"align-middle text-center",children:"Edit"}),(0,U.jsx)("th",{className:"align-middle text-center",children:"Trigger"}),(0,U.jsx)("th",{className:"align-middle text-center",children:"Provider"}),(0,U.jsx)("th",{className:"align-middle",children:"Message"}),(0,U.jsx)("th",{className:"align-middle text-center",children:"Test"}),(0,U.jsx)("th",{className:"align-middle text-center",children:"Delete"})]})}),(0,U.jsx)("tbody",{children:t.map((function(e){return(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{className:"align-middle text-center",children:(0,U.jsx)(l.N_,{to:"/admin/webhooks/".concat(e.id),children:(0,U.jsx)(_.A,{size:"sm",variant:"primary",children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.MT7})})})}),(0,U.jsx)("td",{className:"align-middle text-center",children:yt(e.trigger)}),(0,U.jsx)("td",{className:"align-middle text-center",children:wt(e.provider)}),(0,U.jsx)("td",{className:"align-middle",children:e.messageTemplate}),(0,U.jsx)("td",{className:"align-middle text-center",children:(0,U.jsx)(_.A,{size:"sm",variant:"primary",onClick:function(){return i(e.id)},children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.isI})})}),(0,U.jsx)("td",{className:"align-middle text-center",children:(0,U.jsx)(_.A,{size:"sm",variant:"danger",onClick:function(){return a(e.id)},children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.yLS})})})]},e.id)}))})]})})]})},Ct=function(){var e=(0,c.Zp)(),n=(0,c.g)(),t=(0,r.useState)(T.SOLVE),s=(0,b.A)(t,2),a=s[0],i=s[1],l=(0,r.useState)(Y.DISCORD),o=(0,b.A)(l,2),d=o[0],u=o[1],h=(0,r.useState)(""),x=(0,b.A)(h,2),m=x[0],f=x[1],p=(0,r.useState)(""),g=(0,b.A)(p,2),j=g[0],v=g[1],y=(0,r.useState)(!0),w=(0,b.A)(y,2),k=w[0],C=w[1];Ie((0,A.A)(N().mark((function t(){var s,r;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("new"!==n.id){t.next=2;break}return t.abrupt("return");case 2:if(s=Number.parseInt(n.id),!isNaN(s)){t.next=6;break}return e("/admin/webhooks/new"),t.abrupt("return");case 6:return t.next=8,P.getAdminWebhook(s);case 8:r=t.sent,u(r.provider),i(r.trigger),f(r.url),v(r.messageTemplate),C(r.escapeAll);case 14:case"end":return t.stop()}}),t)}))),[n.id,e]);var S=We((0,A.A)(N().mark((function t(){var s,r,i;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s="new"===n.id,t.next=3,P.upsertAdminWebhook(s?"new":Number.parseInt(n.id,10),{trigger:a,provider:d,url:m,messageTemplate:j,escapeAll:k});case 3:r=t.sent,i=r.id,s&&e("/admin/webhooks/"+i,{replace:!0});case 6:case"end":return t.stop()}}),t)}))),[n.id,a,d,m,j,k,e],{title:"Webhook",successMessage:"Webhook saved successfully!"});return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("h3",{children:"new"===n.id?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.OQW})," Create webhook"]}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.MT7})," Edit webhook"]})}),(0,U.jsxs)(Z.A,{className:"text-start mt-5",children:[(0,U.jsxs)(Le.A,{children:[(0,U.jsxs)(Re.A,{xs:12,md:6,children:[(0,U.jsxs)(Z.A.Group,{className:"mt-3",children:[(0,U.jsx)(Z.A.Label,{className:"text-center w-100",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.zm_,fixedWidth:!0})," Trigger"]})}),(0,U.jsx)(Z.A.Select,{value:a,onChange:function(e){return i(e.target.value)},children:Object.values(T).map((function(e){return(0,U.jsx)("option",{value:e,children:yt(e)},e)}))})]}),(0,U.jsxs)(Z.A.Group,{className:"mt-4",children:[(0,U.jsx)(Z.A.Label,{className:"text-center w-100",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.$8E,fixedWidth:!0})," Provider"]})}),(0,U.jsx)(Z.A.Select,{value:d,onChange:function(e){return u(e.target.value)},children:Object.values(Y).map((function(e){return(0,U.jsx)("option",{value:e,children:wt(e)},e)}))})]}),(0,U.jsxs)(Z.A.Group,{className:"mt-4",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.CQO,fixedWidth:!0})," URL"]})}),(0,U.jsx)(Z.A.Control,{type:"text",placeholder:"Enter webhook URL",value:m,onChange:function(e){return f(e.target.value)}})]}),(0,U.jsx)(fn.A,{className:"text-start mt-4",children:(0,U.jsxs)(fn.A.Item,{variant:"secondary",className:"d-table",children:[(0,U.jsx)("span",{className:"d-table-cell align-middle float-none",children:"Automatically escape special characters"}),(0,U.jsx)(Yn(),{checked:k,onlabel:"Yes",onstyle:"success",offlabel:"No",offstyle:"danger",style:"mx-3 float-end",size:"sm",onChange:function(e){return C(e)}})]})}),k&&j.includes("discord_escape")&&(0,U.jsxs)(Pe.A,{variant:"warning",className:"mt-3",children:[(0,U.jsx)("strong",{children:"Warning"}),": You are manually escaping data while automatic escape is enabled. This will result in double-escaping, and might not produce the result you expect."]})]}),(0,U.jsx)(Re.A,{xs:12,md:6,children:(0,U.jsxs)(Z.A.Group,{className:"mt-3",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.oE6,fixedWidth:!0})," Message"]})}),(0,U.jsx)(Z.A.Control,{as:"textarea",rows:12,value:j,onChange:function(e){return v(e.target.value)}}),(0,U.jsx)("div",{children:Nt(a)}),(0,U.jsxs)("div",{children:["The following helpers are available: ",(0,U.jsx)("code",{children:"discord_escape"})]})]})})]}),(0,U.jsx)(Le.A,{className:"justify-content-center mt-3",children:(0,U.jsxs)(Re.A,{xs:12,md:8,className:"text-center",children:[(0,U.jsxs)(_.A,{variant:"success",onClick:function(){return S()},children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.hSh}),"new"===n.id?"Create":"Save"]})," ","new"!==n.id&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(_.A,{variant:"danger",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.yLS})," Delete"]})," "]}),(0,U.jsxs)(_.A,{variant:"secondary",onClick:function(){return e(-1)},children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.GRI})," Close"]})]})})]})]})};var St=function(e){return decodeURIComponent(atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))},Wt=function(e){if(!e)return null;var n,t=e.split(".");if(3!==t.length)return null;try{n=JSON.parse(St(t[1]))}catch(e){return null}return n.type&&"string"==typeof n.type?n.type:null},It=function(e){var n=e.split(".");return JSON.parse(St(n[1]))},Et=t(1591),Mt=t(3413),Lt=function(e){var n,t=(0,r.useState)(null),s=(0,b.A)(t,2),a=s[0],i=s[1],c=(0,r.useRef)(),l=(0,r.useRef)();return{CaptchaComponent:(0,r.useCallback)((function(){return e&&"NONE"!==e.captchaType?"GOOGLE"===e.captchaType?(0,U.jsx)(Mt.A,{ref:c,sitekey:e.captchaSiteKey,size:"invisible",theme:te(),onChange:i,onExpired:function(){return i(null)},onError:function(){return i(null)}}):"CLOUDFLARE"===e.captchaType?(0,U.jsx)(Et.Xs,{className:"mt-4 text-center",ref:l,siteKey:e.captchaSiteKey,options:{theme:te()},onSuccess:i,onExpire:function(){return i(null)},onError:function(){return i(null)},onTimeout:function(){return i(null)}}):(0,U.jsx)("div",{children:e.captchaType}):(0,U.jsx)(U.Fragment,{})}),[i,e]),resetCaptcha:function(){var n;if(i(null),"GOOGLE"===e.captchaType)null===(n=c.current)||void 0===n||n.reset();else if("CLOUDFLARE"===e.captchaType){var t;null===(t=l.current)||void 0===t||t.reset()}},executeCaptcha:(n=(0,A.A)(N().mark((function n(){var t;return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("NONE"!==e.captchaType){n.next=2;break}return n.abrupt("return",null);case 2:if("GOOGLE"!==e.captchaType){n.next=8;break}return n.next=5,c.current.executeAsync();case 5:return t=n.sent,i(t),n.abrupt("return",t);case 8:if("CLOUDFLARE"!==e.captchaType){n.next=10;break}return n.abrupt("return",a);case 10:case"end":return n.stop()}}),n)}))),function(){return n.apply(this,arguments)})}},Rt=function(e){var n=e.token,t=(0,r.useContext)(q).user,s=(0,r.useState)(),a=(0,b.A)(s,2),i=a[0],c=a[1],o=Lt(i),d=o.CaptchaComponent,u=o.executeCaptcha,h=o.resetCaptcha,x=(0,r.useState)(!1),m=(0,b.A)(x,2),f=m[0],p=m[1],g=(0,r.useState)(""),j=(0,b.A)(g,2),v=j[0],y=j[1],w=(0,r.useState)(!1),k=(0,b.A)(w,2),C=k[0],S=k[1];(0,r.useEffect)((function(){if(!n||null==t||!t.enrollmentEnabled)return p(!1),void y("");var e=It(n);"enroll"===e.type&&e.email&&(p(!0),y(e.email))}),[n,t]),Ie((0,A.A)(N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.getSignupConfig(n);case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)}))),[n]);var W=We((0,A.A)(N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v.trim()){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,u();case 5:return t=e.sent,e.next=8,P.signup(v.trim(),n,t);case 8:e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(2),h(),e.t0;case 14:S(!0);case 15:case"end":return e.stop()}}),e,null,[[2,10]])}))),[v,n,u,h]);return(0,U.jsx)(Me.A,{children:(0,U.jsx)(Le.A,{className:"justify-content-center",children:C?(0,U.jsx)(Re.A,{xs:12,lg:6,children:(0,U.jsxs)(Pe.A,{variant:"success",className:"mt-3",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.Wcv})," Success! Use the link you received by email to complete the registration process, don't forget to check the spam folder."]})}):(0,U.jsxs)(Re.A,{xs:12,lg:6,children:[(0,U.jsxs)("div",{className:"text-center",children:[(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.Hzw})," Email"]}),(0,U.jsx)(Z.A.Control,{type:"email",placeholder:"Email",value:v,disabled:f,onChange:function(e){return y(e.target.value)}})]}),(0,U.jsx)(d,{}),(0,U.jsx)("div",{className:"mt-4 text-center",children:(0,U.jsxs)(_.A,{variant:"success",className:"w-50",onClick:W,children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.nWR})," Sign up"]})}),(null==t?void 0:t.passwordRecoveryAllowed)&&(0,U.jsx)("div",{className:"mt-4 text-center",children:(0,U.jsx)(l.N_,{to:"/password-recovery",children:(0,U.jsxs)(_.A,{variant:"danger",className:"w-50",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.DW4})," Forgot password"]})})}),!n&&(0,U.jsx)("div",{className:"mt-4 text-center",children:(0,U.jsx)(l.N_,{to:"/login",children:(0,U.jsxs)(_.A,{variant:"primary",className:"w-50",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.rhE})," Login"]})})})]})})})},Ft=function(e){var n=e.spec,t=e.onChange,s=function(){return n.hidden&&n.editable?(0,U.jsx)("small",{children:"This field is private and can be changed later."}):!n.hidden&&n.editable?(0,U.jsx)("small",{children:"This field will be shown publicly and can be changed later."}):n.hidden&&!n.editable?(0,U.jsx)("small",{children:"This field is private and cannot be changed later."}):n.hidden||n.editable?(0,U.jsx)(U.Fragment,{}):(0,U.jsx)("small",{children:"This field will be shown publicly and cannot be changed later."})};return(0,U.jsxs)("div",{className:"text-center mt-3",children:[(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.McB})," ",n.name,!n.required&&" (optional)"]}),"text"===n.type?(0,U.jsxs)(U.Fragment,{children:[n.regex&&(0,U.jsxs)("small",{children:["This field must validate ",(0,U.jsx)("code",{children:n.regex}),"."," "]}),s(),(0,U.jsx)(Z.A.Control,{type:"text",placeholder:n.name,onChange:function(e){return t(e.target.value)},className:"mt-1","aria-describedby":n.description&&"".concat(n.name,"Help")})]}):"choice"===n.type?(0,U.jsxs)(U.Fragment,{children:[s(),(0,U.jsxs)(Z.A.Select,{onChange:function(e){return t(e.target.value)},className:"mt-1","aria-describedby":n.description&&"".concat(n.name,"Help"),children:[(0,U.jsx)("option",{value:"",children:"Select an option"},"__EMPTY__"),n.choices.map((function(e){return(0,U.jsx)("option",{value:e,children:e},e)}))]})]}):(0,U.jsx)(U.Fragment,{}),n.description&&(0,U.jsx)("div",{id:"".concat(n.name,"Help"),className:"form-text text-start",children:n.description})]})},Tt=function(e){var n=e.token,t=(0,c.Zp)(),s=(0,r.useState)(),a=(0,b.A)(s,2),i=a[0],l=a[1],o=(0,r.useState)([]),d=(0,b.A)(o,2),u=d[0],h=d[1],x=(0,r.useState)(""),m=(0,b.A)(x,2),f=m[0],p=m[1],g=(0,r.useState)(""),j=(0,b.A)(g,2),v=j[0],y=j[1],w=(0,r.useState)(""),k=(0,b.A)(w,2),C=k[0],S=k[1],E=(0,r.useState)(""),M=(0,b.A)(E,2),L=M[0],R=M[1],F=(0,r.useState)(""),T=(0,b.A)(F,2),Y=T[0],D=T[1],O=(0,r.useState)(""),z=(0,b.A)(O,2),G=z[0],H=z[1],B=(0,r.useState)(void 0),q=(0,b.A)(B,2),V=q[0],Q=q[1],K=(0,r.useState)(!1),J=(0,b.A)(K,2),ee=J[0],ne=J[1],te=(0,r.useState)({}),se=(0,b.A)(te,2),re=se[0],ae=se[1];(0,r.useEffect)((function(){var e=It(n),t=[];e.email&&(p(e.email),t.push("email")),e.name&&(y(e.name),t.push("name")),e.surname&&(S(e.surname),t.push("surname")),e.affiliationId&&(Q(e.affiliationId),t.push("affiliationId")),h(t)}),[n]),Ie((0,A.A)(N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.getSignupConfig(n);case 2:t=e.sent,l(t);case 4:case"end":return e.stop()}}),e)}))),[n]);var ie=We((0,A.A)(N().mark((function e(){var s,r,a;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v){e.next=2;break}throw new Error("Missing name");case 2:if(C){e.next=4;break}throw new Error("Missing surname");case 4:if(L){e.next=6;break}throw new Error("Missing nickname");case 6:if(Y&&G){e.next=8;break}throw new Error("Missing password");case 8:if(!(Y.length<8)){e.next=10;break}throw new Error("Password too short");case 10:if(Y===G){e.next=12;break}throw new Error("Passwords do not match");case 12:s=(0,I.A)(i.customFields),e.prev=13,s.s();case 15:if((r=s.n()).done){e.next=24;break}if(a=r.value,re[a.name]){e.next=22;break}if(!a.required){e.next=21;break}throw new Error("Missing ".concat(a.name.toLowerCase()));case 21:re[a.name]="";case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),s.e(e.t0);case 29:return e.prev=29,s.f(),e.finish(29);case 32:return e.next=34,P.completeSignup({token:n,name:v,surname:C,nickname:L,password:Y,affiliationId:V,customFields:re});case 34:t("/login",{replace:!0});case 35:case"end":return e.stop()}}),e,null,[[13,26,29,32]])}))),[t,i,n,v,C,L,Y,G,V,re],{title:"Signup",successMessage:"Signup successful, you can now login!"});return(0,U.jsx)(Me.A,{children:(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsxs)(Re.A,{xs:12,lg:6,children:[(0,U.jsxs)("div",{className:"text-center",children:[(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.Hzw})," Email"]}),(0,U.jsx)(Z.A.Control,{type:"email",value:f,disabled:!0,readOnly:!0})]}),(0,U.jsxs)("div",{className:"text-center mt-3",children:[(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.oMV})," Name"]}),(0,U.jsx)(Z.A.Control,{type:"text",placeholder:"Name",value:v,disabled:u.includes("name"),onChange:function(e){return y(e.target.value)}})]}),(0,U.jsxs)("div",{className:"text-center mt-3",children:[(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.Lmx})," Surname"]}),(0,U.jsx)(Z.A.Control,{type:"text",placeholder:"Surname",value:C,disabled:u.includes("surname"),onChange:function(e){return S(e.target.value)}})]}),(0,U.jsxs)("div",{className:"text-center mt-3",children:[(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.X46})," Nickname",!(null!=i&&i.registrationNicknameRequired)&&" (optional)"]}),null!=i&&i.registrationNicknameRequired?(0,U.jsx)("small",{children:"Your nickname will be shown on the scoreboard. "}):(0,U.jsxs)("small",{children:["Your nickname, if provided, will be shown on the scoreboard in place of your name and surname."," "]}),(null==i?void 0:i.registrationNicknameRegex)&&(0,U.jsx)(U.Fragment,{children:(0,U.jsxs)("small",{children:["Your nickname must validate ",(0,U.jsx)("code",{children:i.registrationNicknameRegex}),"."]})}),(0,U.jsx)(Z.A.Control,{className:"mt-1",type:"text",placeholder:"Nickname",value:L,disabled:u.includes("nickname"),onChange:function(e){return R(e.target.value)}})]}),(null==i?void 0:i.registrationAffiliations)&&Object.entries(i.registrationAffiliations).length>1&&(0,U.jsxs)("div",{className:"text-center mt-3",children:[(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.QnR})," Affiliation"]}),(0,U.jsxs)(Z.A.Select,{className:"mt-1",value:V,disabled:u.includes("affiliationId"),onChange:function(e){return Q(parseInt(e.target.value))},children:[(0,U.jsx)("option",{children:"Select an affiliation"}),Object.entries(i.registrationAffiliations).map((function(e){var n=(0,b.A)(e,2),t=n[0],s=n[1];return(0,U.jsx)("option",{value:s,children:t},s)}))]})]}),null==i?void 0:i.customFields.map((function(e){return(0,U.jsx)(Ft,{spec:e,onChange:function(n){return ae((0,W.A)((0,W.A)({},re),{},(0,wn.A)({},e.name,n)))}},e.name)})),(0,U.jsxs)("div",{className:"text-center mt-3",children:[(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.bMg})," Password"]}),(0,U.jsx)(Z.A.Control,{type:"password",placeholder:"Password",value:Y,onChange:function(e){return D(e.target.value)}})]}),(0,U.jsxs)("div",{className:"text-center mt-3",children:[(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.bMg})," Confirm password"]}),(0,U.jsx)(Z.A.Control,{type:"password",placeholder:"Confirm password",value:G,onChange:function(e){return H(e.target.value)}})]}),((null==i?void 0:i.privacyPolicy)||(null==i?void 0:i.privacyPolicyAffiliations[V]))&&(0,U.jsxs)("div",{className:"mt-3",children:[(0,U.jsx)("div",{children:(0,hn.Ay)((null==i?void 0:i.privacyPolicy)||"",{trim:!0})}),(0,U.jsx)("div",{children:(0,hn.Ay)((null==i?void 0:i.privacyPolicyAffiliations[V])||"",{trim:!0})}),(0,U.jsx)(Z.A.Check,{className:"mt-2",id:"privacyPolicyCheckbox",type:"checkbox",label:"I have read the above information and give my consent to the processing of my data",checked:ee,onChange:function(e){return ne(e.target.checked)}})]}),(0,U.jsx)("div",{className:"text-center mt-4",children:(0,U.jsxs)(_.A,{variant:"success",className:"w-50",onClick:ie,disabled:((null==i?void 0:i.privacyPolicy)||(null==i?void 0:i.privacyPolicyAffiliations[V]))&&!ee,children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.nWR})," Complete sign up"]})})]})})})};const Yt=function(){var e=new URLSearchParams(location.search).get("token")||void 0,n=Wt(e);return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Ye,{children:(0,U.jsxs)("title",{children:["Signup - ",g]})}),(0,U.jsx)("div",{className:"py-5 bg-blue-light text-center text-white",children:(0,U.jsx)(Me.A,{children:(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsx)(Re.A,{xs:12,lg:8,children:(0,U.jsxs)("h1",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.nWR})," Sign up to the platform"]})})})})}),(0,U.jsx)("div",{className:"py-5 bg-body",children:n&&"enroll"!==n?"signup"===n?(0,U.jsx)(Tt,{token:e}):(0,U.jsx)(U.Fragment,{}):(0,U.jsx)(Rt,{token:e})})]})};var Dt=function(){var e=(0,r.useContext)(q).user,n=(0,r.useState)(),t=(0,b.A)(n,2),s=t[0],a=t[1],i=Lt(s),c=i.CaptchaComponent,l=i.executeCaptcha,o=i.resetCaptcha,d=(0,r.useState)((function(){return null!=e&&e.logged?e.email:""})),u=(0,b.A)(d,2),h=u[0],x=u[1],m=(0,r.useState)(!1),f=(0,b.A)(m,2),p=f[0],g=f[1];Ie((0,A.A)(N().mark((function e(){var n;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.getSignupConfig();case 2:n=e.sent,a(n);case 4:case"end":return e.stop()}}),e)}))),[]);var j=We((0,A.A)(N().mark((function e(){var n;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h.trim()){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,l();case 5:return n=e.sent,e.next=8,P.recoverPassword(h.trim(),n);case 8:e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(2),o(),e.t0;case 14:g(!0);case 15:case"end":return e.stop()}}),e,null,[[2,10]])}))),[h,l,o]);return(0,U.jsx)(Me.A,{children:(0,U.jsx)(Le.A,{className:"justify-content-center",children:p?(0,U.jsx)(Re.A,{xs:12,lg:6,children:(0,U.jsxs)(Pe.A,{variant:"success",className:"mt-3",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.Wcv})," Success! Use the link you received by email to recover your password, don't forget to check the spam folder."]})}):(0,U.jsxs)(Re.A,{xs:12,lg:6,children:[(0,U.jsxs)("div",{className:"text-center",children:[(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.Hzw})," Email"]}),(0,U.jsx)(Z.A.Control,{type:"email",placeholder:"Email",value:h,disabled:null==e?void 0:e.logged,onChange:function(e){return x(e.target.value)}})]}),(0,U.jsx)(c,{}),(0,U.jsx)("div",{className:"mt-4 text-center",children:(0,U.jsxs)(_.A,{variant:"success",className:"w-50",onClick:j,children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.DW4})," Recover password"]})})]})})})},Pt=function(e){var n=e.token,t=(0,c.Zp)(),s=(0,r.useContext)(q).user,a=(0,r.useState)(""),i=(0,b.A)(a,2),l=i[0],o=i[1],d=(0,r.useState)(""),u=(0,b.A)(d,2),h=u[0],x=u[1],m=(0,r.useMemo)((function(){return It(n).email}),[n]);(0,r.useEffect)((function(){null!=s&&s.logged&&m!==s.email&&t("/",{replace:!0})}),[s,m,t]);var f=We((0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l&&h){e.next=2;break}throw new Error("Missing password");case 2:if(!(l.length<8)){e.next=4;break}throw new Error("Password too short");case 4:if(l===h){e.next=6;break}throw new Error("Passwords do not match");case 6:return e.next=8,P.completeRecoverPassword(n,l);case 8:t("/login",{replace:!0});case 9:case"end":return e.stop()}}),e)}))),[t,n,l,h],{title:"Password recovery",successMessage:"Password recovery successful!"});return(0,U.jsx)(Me.A,{children:(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsxs)(Re.A,{xs:12,lg:6,children:[(0,U.jsxs)("div",{className:"text-center",children:[(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.Hzw})," Email"]}),(0,U.jsx)(Z.A.Control,{type:"email",value:m,disabled:!0})]}),(0,U.jsxs)("div",{className:"text-center mt-3",children:[(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.bMg})," Password"]}),(0,U.jsx)(Z.A.Control,{type:"password",placeholder:"Password",value:l,onChange:function(e){return o(e.target.value)}})]}),(0,U.jsxs)("div",{className:"text-center mt-3",children:[(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.bMg})," Confirm password"]}),(0,U.jsx)(Z.A.Control,{type:"password",placeholder:"Confirm password",value:h,onChange:function(e){return x(e.target.value)}})]}),(0,U.jsx)("div",{className:"text-center mt-4",children:(0,U.jsxs)(_.A,{variant:"success",className:"w-50",onClick:f,children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.DW4})," Change password"]})})]})})})};const Ot=function(){var e=(0,r.useContext)(q).user,n=new URLSearchParams(location.search).get("token")||void 0,t=Wt(n);return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Ye,{children:(0,U.jsxs)("title",{children:["Password recovery - ",g]})}),(0,U.jsx)("div",{className:"py-5 bg-blue-light text-center text-white",children:(0,U.jsx)(Me.A,{children:(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsx)(Re.A,{xs:12,lg:8,children:(0,U.jsxs)("h1",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.DW4})," ",null!=e&&e.logged?"Reset ":"Recover ","password for the platform"]})})})})}),(0,U.jsx)("div",{className:"py-5 bg-body",children:"recovery"===t?(0,U.jsx)(Pt,{token:n}):(0,U.jsx)(Dt,{})})]})},zt=function(){var e=(0,r.useState)([]),n=(0,b.A)(e,2),t=n[0],s=n[1],a=(0,r.useState)(!1),i=(0,b.A)(a,2),c=i[0],l=i[1],o=(0,r.useState)("any"),d=(0,b.A)(o,2),u=d[0],h=d[1],x=(0,r.useState)("any"),m=(0,b.A)(x,2),f=m[0],p=m[1],g=(0,r.useState)(!0),j=(0,b.A)(g,2),v=j[0],y=j[1],w=(0,r.useState)(""),k=(0,b.A)(w,2),C=k[0],S=k[1],W=(0,r.useState)(""),I=(0,b.A)(W,2),E=I[0],M=I[1],L=(0,r.useState)(""),R=(0,b.A)(L,2),F=R[0],T=R[1],Y=(0,r.useState)(""),D=(0,b.A)(Y,2),O=D[0],z=D[1],G=(0,r.useState)(void 0),H=(0,b.A)(G,2),B=H[0],q=H[1],V=(0,r.useState)(!1),Q=(0,b.A)(V,2),K=Q[0],J=Q[1],ee=(0,r.useState)(""),ne=(0,b.A)(ee,2),te=ne[0],se=ne[1],re=(0,r.useState)(""),ae=(0,b.A)(re,2),ie=ae[0],ce=ae[1],le=(0,r.useState)(!1),oe=(0,b.A)(le,2),de=oe[0],ue=oe[1],he=(0,r.useCallback)((0,A.A)(N().mark((function e(){var n,t,r,a;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([P.getAdminAffiliations(),P.getAdminRegistrationConfigs()]);case 2:n=e.sent,t=(0,b.A)(n,2),r=t[0],a=t[1],s(r),l(a.registrationAllowed),h(a.registrationAffiliations),p(a.registrationDomains),y(a.registrationNicknameRequired),S(a.registrationEmailTitle),M(a.registrationEmailBody),T(a.alreadyRegisteredEmailTitle),z(a.alreadyRegisteredEmailBody),q(a.registrationPrivacyPolicy),J(a.passwordRecoveryAllowed),se(a.passwordRecoveryEmailTitle),ce(a.passwordRecoveryEmailBody),ue(a.captchaIsConfigured);case 20:case"end":return e.stop()}}),e)}))),[]);Ie((0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),[he]);var xe=We((0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.setAdminRegistrationConfigs({registrationAllowed:c,registrationAffiliations:u,registrationDomains:f,registrationNicknameRequired:v,registrationEmailTitle:C,registrationEmailBody:E,alreadyRegisteredEmailTitle:F,alreadyRegisteredEmailBody:O,registrationPrivacyPolicy:B,passwordRecoveryAllowed:K,passwordRecoveryEmailTitle:te,passwordRecoveryEmailBody:ie});case 2:return e.next=4,he();case 4:case"end":return e.stop()}}),e)}))),[he,c,f,u,v,C,E,F,O,B,K,te,ie],{title:"Registration",successMessage:"Registration configs saved successfully!"});return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("h3",{children:"Registration"}),(0,U.jsx)(Me.A,{fluid:!0,className:"mt-3",children:(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsxs)(Re.A,{xs:12,lg:8,children:[c&&!de&&(0,U.jsxs)(Pe.A,{variant:"warning",children:[(0,U.jsx)("strong",{children:"Warning"}),": registrations are open, but no CAPTCHA is configured to prevent spamming."]}),(0,U.jsxs)(fn.A,{className:"text-start",children:[(0,U.jsxs)(fn.A.Item,{variant:"primary",className:"d-table",children:[(0,U.jsx)("span",{className:"d-table-cell align-middle float-none",children:"Enable registration"}),(0,U.jsx)(Yn(),{checked:c,onlabel:"Yes",onstyle:"success",offlabel:"No",offstyle:"danger",style:"mx-3 float-end",onChange:function(e){return l(e)}})]}),c&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(fn.A.Item,{variant:"secondary",className:"d-table",children:[(0,U.jsx)("span",{className:"d-table-cell align-middle float-none",children:"Require registration nickname"}),(0,U.jsx)(Yn(),{checked:v,onlabel:"Yes",onstyle:"success",offlabel:"No",offstyle:"danger",style:"mx-3 float-end",onChange:function(e){return y(e)}})]}),(0,U.jsxs)(fn.A.Item,{variant:"secondary",className:"d-table",children:[(0,U.jsxs)("span",{className:"d-table-cell align-middle float-none",children:[(0,U.jsx)("div",{children:"Allow registration for all affiliations"}),(0,U.jsx)("small",{children:"Whether players should be able to register with any affiliation. This does not affect enrollment."})]}),(0,U.jsx)(Yn(),{checked:"any"===u,onlabel:"Yes",onstyle:"success",offlabel:"No",offstyle:"danger",style:"mx-3 float-end",onChange:function(e){return h(e?"any":[])}})]}),(0,U.jsxs)(fn.A.Item,{variant:"secondary",className:"d-table",children:[(0,U.jsx)("span",{className:"d-table-cell align-middle float-none",children:"Allow registration for all email domains"}),(0,U.jsx)(Yn(),{checked:"any"===f,onlabel:"Yes",onstyle:"success",offlabel:"No",offstyle:"danger",style:"mx-3 float-end",onChange:function(e){return p(e?"any":[])}})]}),(0,U.jsxs)(fn.A.Item,{variant:"secondary",className:"d-table",children:[(0,U.jsx)("span",{className:"d-table-cell align-middle float-none",children:"Require privacy policy consent"}),(0,U.jsx)(Yn(),{checked:void 0!==B,onlabel:"Yes",onstyle:"success",offlabel:"No",offstyle:"danger",style:"mx-3 float-end",onChange:function(e){return q(e?"":void 0)}})]})]})]}),c&&(0,U.jsxs)(U.Fragment,{children:["any"!==u&&(0,U.jsxs)(Z.A.Group,{className:"mt-3 text-start",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.QnR,fixedWidth:!0})," Allowed affiliations"]})}),(0,U.jsx)(lt,{affiliations:t,selected:t.filter((function(e){return u.includes(e.id)})),onSelection:function(e){return h(e.map((function(e){return e.id})))}}),(0,U.jsx)("small",{children:"Affiliation enrollment bypasses the allowed affiliations check. Affiliations that are not allowed can still leverage enrollment tokens to register users. If only one affiliation is allowed the users won't be asked to choose."})]}),"any"!==f&&(0,U.jsxs)(Z.A.Group,{className:"mt-3 text-start",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.Hzw,fixedWidth:!0})," Allowed domains"]})}),(0,U.jsx)(Z.A.Control,{type:"text",placeholder:"Enter email domains",value:f.join(","),onChange:function(e){return p(e.target.value.split(",").map((function(e){return e.trim()})))}}),(0,U.jsx)("small",{children:"Affiliation enrollment does not bypass the allowed email domains check."})]}),(0,U.jsxs)(Z.A.Group,{className:"mt-3 text-start",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.y_8,fixedWidth:!0})," Email subject"]})}),(0,U.jsx)(Z.A.Control,{type:"text",placeholder:"Enter email subject",value:C,onChange:function(e){return S(e.target.value)}})]}),(0,U.jsxs)(Z.A.Group,{className:"mt-3 text-start",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.v_t,fixedWidth:!0})," Email body"]})}),(0,U.jsx)(Z.A.Control,{type:"text",as:"textarea",placeholder:"Enter email body",value:E,onChange:function(e){return M(e.target.value)}}),(0,U.jsxs)("small",{children:["The ",(0,U.jsx)("code",{children:"link"})," template variable contains the link to the platform to continue the registration. Example usage:"," ",(0,U.jsx)("code",{children:'<a href="{{ link }}">click here</a>'})]})]}),(0,U.jsxs)(Z.A.Group,{className:"mt-3 text-start",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.y_8,fixedWidth:!0})," Already registered email subject"]})}),(0,U.jsx)(Z.A.Control,{type:"text",placeholder:"Enter email subject",value:F,onChange:function(e){return T(e.target.value)}})]}),(0,U.jsxs)(Z.A.Group,{className:"mt-3 text-start",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.v_t,fixedWidth:!0})," Already registered email body"]})}),(0,U.jsx)(Z.A.Control,{type:"text",as:"textarea",placeholder:"Enter email body",value:O,onChange:function(e){return z(e.target.value)}}),(0,U.jsxs)("small",{children:["The ",(0,U.jsx)("code",{children:"link"})," template variable contains the link to the platform to continue the password recovery process. Example usage:"," ",(0,U.jsx)("code",{children:'<a href="{{ link }}">click here</a>'}),". This email should explain that the user has already registered and no action is required if the user himself has not caused this."]}),!K&&(0,U.jsx)(Pe.A,{variant:"warning",className:"mt-2",children:"Password recovery is required for already registered emails to work properly."})]}),void 0!==B&&(0,U.jsxs)(Z.A.Group,{className:"mt-3 text-start",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.OBG,fixedWidth:!0})," Privacy policy"]})}),(0,U.jsx)(Z.A.Control,{type:"text",as:"textarea",placeholder:"Enter privacy policy",value:B,onChange:function(e){return q(e.target.value)}})]})]})]})})}),(0,U.jsx)("h3",{className:"mt-5",children:"Password recovery"}),(0,U.jsx)(Me.A,{className:"mt-3",children:(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsxs)(Re.A,{xs:12,lg:8,children:[K&&!de&&(0,U.jsxs)(Pe.A,{variant:"warning",children:[(0,U.jsx)("strong",{children:"Warning"}),": password recovery is enabled, but no CAPTCHA is configured to prevent spamming."]}),(0,U.jsx)(fn.A,{className:"text-start",children:(0,U.jsxs)(fn.A.Item,{variant:"primary",className:"d-table",children:[(0,U.jsx)("span",{className:"d-table-cell align-middle float-none",children:"Enable password recovery"}),(0,U.jsx)(Yn(),{checked:K,onlabel:"Yes",onstyle:"success",offlabel:"No",offstyle:"danger",style:"mx-3 float-end",onChange:function(e){return J(e)}})]})}),K&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(Z.A.Group,{className:"mt-3 text-start",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.y_8,fixedWidth:!0})," Email subject"]})}),(0,U.jsx)(Z.A.Control,{type:"text",placeholder:"Enter email subject",value:te,onChange:function(e){return se(e.target.value)}})]}),(0,U.jsxs)(Z.A.Group,{className:"mt-3 text-start",children:[(0,U.jsx)(Z.A.Label,{className:"w-100 text-center",children:(0,U.jsxs)("h5",{children:[(0,U.jsx)(X.g,{icon:$.v_t,fixedWidth:!0})," Email body"]})}),(0,U.jsx)(Z.A.Control,{type:"text",as:"textarea",placeholder:"Enter email body",value:ie,onChange:function(e){return ce(e.target.value)}}),(0,U.jsxs)("small",{children:["The ",(0,U.jsx)("code",{children:"link"})," template variable contains the link to the platform to continue the password recovery process. Example usage:"," ",(0,U.jsx)("code",{children:'<a href="{{ link }}">click here</a>'})]})]})]})]})})}),(0,U.jsx)(Me.A,{className:"mt-5",children:(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsx)(Re.A,{xs:12,lg:6,children:(0,U.jsx)("h3",{children:(0,U.jsxs)(_.A,{variant:"success",onClick:xe,children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.hSh})," Save"]})})})})})]})},_t=function(){var e=(0,r.useContext)(q).user,n=(0,c.Zp)(),t=(0,r.useState)(),s=(0,b.A)(t,2),a=s[0],i=s[1],o=(0,r.useState)("unknown"),d=(0,b.A)(o,2),u=d[0],h=d[1],x=(0,r.useState)(),m=(0,b.A)(x,2),f=m[0],p=m[1],j=(0,r.useState)(!1),v=(0,b.A)(j,2),y=v[0],w=v[1],k=new URLSearchParams(location.search).get("token")||void 0,C=Wt(k);Ie((0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=i,e.next=3,P.getSignupConfig(k);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)}))),[k]),(0,r.useEffect)((function(){!e||e.logged||n("/signup?token=".concat(encodeURIComponent(k)))}),[e,k,n]),(0,r.useEffect)((function(){if("enroll"===C&&e&&e.logged&&a){var n=It(k);if(n.name&&e.name!==n.name)h("no");else if(n.surname&&e.surname!==n.surname)h("no");else if(n.email&&e.email!==n.email)h("no");else{var t=Object.entries(a.registrationAffiliations).find((function(e){return(0,b.A)(e,2)[1]===n.affiliationId}));t?(p({id:t[1],name:t[0]}),n.affiliationId!==e.affiliationId?h("yes"):h("useless")):h("unknown")}}else h("unknown")}),[e,k,C,a]);var S=We((0,A.A)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.enroll(k);case 2:n("/");case 3:case"end":return e.stop()}}),e)}))),[k,n]);if("enroll"===C)return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Ye,{children:(0,U.jsxs)("title",{children:["Enroll - ",g]})}),(0,U.jsx)("div",{className:"py-5 bg-blue-light text-center text-white",children:(0,U.jsx)(Me.A,{children:(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsx)(Re.A,{xs:12,lg:8,children:(0,U.jsxs)("h1",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.pCJ})," Enrollment"]})})})})}),(0,U.jsx)("div",{className:"py-5 bg-body",children:(0,U.jsx)(Me.A,{children:(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsx)(Re.A,{xs:12,lg:6,children:"no"===u?(0,U.jsxs)(Pe.A,{variant:"danger",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.zpE})," This token does not match your profile, you may have the wrong token. If you think it should be valid ask your affiliation supervisor for a new one."]}):"yes"===u?(0,U.jsxs)("div",{className:"mt-4 text-center",children:[a.privacyPolicyAffiliations[null==f?void 0:f.id]&&(0,U.jsxs)("div",{className:"mb-2 text-start",children:[(0,U.jsx)("div",{children:(0,hn.Ay)(a.privacyPolicyAffiliations[null==f?void 0:f.id]||"",{trim:!0})}),(0,U.jsx)(Z.A.Check,{id:"privacyPolicyCheckbox",className:"mt-2",type:"checkbox",label:"I have read the above information and give my consent to the processing of my data",checked:y,onChange:function(e){return w(e.target.checked)}})]}),(0,U.jsxs)("h5",{children:["Are you sure you want to be enrolled in the"," ",(0,U.jsx)("i",{children:(null==f?void 0:f.name)||"???"})," affiliation?"]}),(0,U.jsxs)("div",{className:"mt-2",children:[(0,U.jsx)(l.N_,{to:"/",children:(0,U.jsxs)(_.A,{variant:"danger",className:"w-25 me-3",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.GRI})," Abort"]})}),(0,U.jsxs)(_.A,{variant:"success",className:"w-25",onClick:S,disabled:(null==a?void 0:a.privacyPolicyAffiliations[null==f?void 0:f.id])&&!y,children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.pCJ})," Enroll"]})]})]}):"useless"===u?(0,U.jsxs)(Pe.A,{variant:"warning",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.zpE})," This token has no effect in your enrollment status. You are already part of the"," ",(0,U.jsx)("i",{children:(null==f?void 0:f.name)||"???"})," affiliation."]}):(0,U.jsx)(U.Fragment,{})})})})})]});n("/")},Ut=function(){var e=(0,r.useState)([]),n=(0,b.A)(e,2),t=n[0],s=n[1],a=We((0,A.A)(N().mark((function e(){var n;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.getAdminAffiliations();case 2:n=e.sent,s(n);case 4:case"end":return e.stop()}}),e)}))),[]);(0,r.useEffect)((function(){a()}),[a]);var i=We(function(){var e=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.deleteAdminAffiliation(n);case 2:a();case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[a],{title:"Affiliation",successMessage:"Affiliation deleted successfully!"});return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)("h3",{children:["Affiliations"," ",(0,U.jsx)(l.N_,{to:"/admin/affiliations/new",style:{color:"inherit"},children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.OQW})})]}),(0,U.jsx)("div",{className:"table-responsive",children:(0,U.jsxs)($e.A,{striped:!0,bordered:!0,hover:!0,className:"mt-5 text-nowrap text-start",children:[(0,U.jsx)("thead",{children:(0,U.jsxs)("tr",{children:[(0,U.jsx)("th",{className:"align-middle text-center",children:"#"}),(0,U.jsx)("th",{className:"align-middle",children:"Name"}),(0,U.jsx)("th",{className:"align-middle text-center",children:"Users"}),(0,U.jsx)("th",{className:"align-middle text-center",children:"Privacy policy"}),(0,U.jsx)("th",{className:"align-middle text-center",children:"Enrollment"}),(0,U.jsx)("th",{className:"align-middle text-center",children:"Edit"}),(0,U.jsx)("th",{className:"align-middle text-center",children:"Delete"})]})}),(0,U.jsx)("tbody",{children:t.map((function(e){return(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{className:"align-middle text-center",children:e.id}),(0,U.jsx)("td",{className:"align-middle",children:e.name}),(0,U.jsx)("td",{className:"align-middle text-center",children:e.usersCount}),(0,U.jsx)("td",{className:"align-middle text-center",children:e.privacyPolicy?(0,U.jsx)(_.A,{size:"sm",variant:"success",className:"pe-none",children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.e68})}):(0,U.jsx)(_.A,{size:"sm",variant:"danger",className:"pe-none",children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.GRI})})}),(0,U.jsx)("td",{className:"align-middle text-center",children:e.enrollmentEnabled?(0,U.jsx)(_.A,{size:"sm",variant:"success",className:"pe-none",children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.e68})}):(0,U.jsx)(_.A,{size:"sm",variant:"danger",className:"pe-none",children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.GRI})})}),(0,U.jsx)("td",{className:"align-middle text-center",children:(0,U.jsx)(l.N_,{to:"/admin/affiliations/".concat(e.id),children:(0,U.jsx)(_.A,{size:"sm",variant:"primary",children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.MT7})})})}),(0,U.jsx)("td",{className:"align-middle text-center",children:(0,U.jsx)(_.A,{size:"sm",variant:"danger",disabled:e.usersCount>0,onClick:function(){return i(e.id)},children:(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.yLS})})})]},e.id)}))})]})})]})},Gt=function(){var e=(0,c.Zp)(),n=(0,c.g)(),t=(0,r.useState)(""),s=(0,b.A)(t,2),a=s[0],i=s[1],l=(0,r.useState)(""),o=(0,b.A)(l,2),d=o[0],u=o[1],h=(0,r.useState)(!1),x=(0,b.A)(h,2),m=x[0],f=x[1];Ie((0,A.A)(N().mark((function t(){var s,r;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("new"!==n.id){t.next=4;break}return i(""),u(""),t.abrupt("return");case 4:if(s=Number.parseInt(n.id),!isNaN(s)){t.next=8;break}return e("/admin/affiliations/new"),t.abrupt("return");case 8:return t.next=10,P.getAdminAffiliation(s);case 10:r=t.sent,i(r.name),u(r.privacyPolicy);case 13:case"end":return t.stop()}}),t)}))),[n.id,e]);var p=We((0,A.A)(N().mark((function t(){var s,r;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.upsertAdminAffiliation("new"===n.id?"new":Number.parseInt(n.id,10),{name:a,privacyPolicy:d||null});case 2:s=t.sent,r=s.id,"new"===n.id&&e("/admin/affiliations/".concat(r),{replace:!0});case 5:case"end":return t.stop()}}),t)}))),[n.id,e,a,d],{title:"Affiliation",successMessage:"Affiliation updated successfully!"}),g=We((0,A.A)(N().mark((function t(){return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.deleteAdminAffiliation(Number.parseInt(n.id));case 2:e("/admin/affiliations");case 3:case"end":return t.stop()}}),t)}))),[e,n.id],{title:"Affiliation",successMessage:"Affiliation deleted successfully!"});return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("h3",{children:"new"===n.id?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.OQW})," Create affiliation"]}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.MT7})," Edit affiliation"]})}),(0,U.jsxs)(Z.A,{className:"text-start mt-3",children:[(0,U.jsxs)(Z.A.Group,{children:[(0,U.jsx)(Z.A.Label,{children:"Name"}),(0,U.jsx)(Z.A.Control,{type:"text",placeholder:"Affiliation name",value:a,onChange:function(e){return i(e.target.value)}})]}),(0,U.jsxs)(Z.A.Group,{className:"text-start mt-3",children:[(0,U.jsx)(Z.A.Label,{children:"Privacy policy"}),(0,U.jsx)(Z.A.Control,{as:"textarea",rows:12,value:d,onChange:function(e){return u(e.target.value)}})]}),(0,U.jsxs)("div",{className:"text-center mt-3",children:[(0,U.jsx)(_.A,{variant:"success",onClick:p,children:"new"===n.id?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.hSh})," Create"]}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.hSh})," Save"]})})," ","new"!==n.id&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(_.A,{variant:"danger",onClick:function(){return f(!0)},children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.yLS})," Delete"]})," "]}),(0,U.jsxs)(_.A,{variant:"secondary",onClick:function(){return e(-1)},children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.GRI})," Close"]})]})]}),(0,U.jsx)(zn,{show:m,onClose:function(){return f(!1)},confirmText:"Delete",confirmVariant:"danger",onConfirm:g,children:"Are you sure you want to delete the affiliation"})]})},Ht=function(){var e,n,t,s,a=(0,c.Zp)(),i=(0,c.zy)(),o=(0,r.useState)({affiliations:[],events:[],customFields:{}}),d=(0,b.A)(o,2),u=d[0],h=d[1],x=(0,r.useState)([]),m=(0,b.A)(x,2),f=m[0],p=m[1],g=(0,r.useState)([]),j=(0,b.A)(g,2),v=j[0],y=j[1],w=(0,r.useState)(0),k=(0,b.A)(w,2),C=k[0],S=k[1],E=(0,r.useState)(1),M=(0,b.A)(E,2),L=M[0],R=M[1],F=(0,r.useState)(null!==(e=new URLSearchParams(i.search).get("venue"))&&void 0!==e?e:"-1"),T=(0,b.A)(F,2),Y=T[0],D=T[1],O=(0,r.useState)(null!==(n=new URLSearchParams(i.search).get("event"))&&void 0!==n?n:"-1"),z=(0,b.A)(O,2),G=z[0],H=z[1],B=(0,r.useState)(null!==(t=new URLSearchParams(i.search).get("section"))&&void 0!==t?t:"-1"),q=(0,b.A)(B,2),V=q[0],Q=q[1],K=(0,r.useState)(null!==(s=new URLSearchParams(i.search).get("challenge"))&&void 0!==s?s:"-1"),J=(0,b.A)(K,2),ee=J[0],ne=J[1],te=We(function(){var e=(0,A.A)(N().mark((function e(n,t){var s;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.getAdminWriteups(50*n,50,t);case 2:if(s=e.sent,R(Math.ceil(s.total/50)),0!==s.writeups.length||0===n){e.next=8;break}return e.next=7,te(n-1,t);case 7:return e.abrupt("return");case 8:y(s.writeups),S(n),S(n);case 11:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),[]),se=We(function(){var e=(0,A.A)(N().mark((function e(n){var t,s;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(n),t={},s="/admin/writeups?","-1"!==Y&&(t.affiliation=Number.parseInt(Y),s+="venue=".concat(t.affiliation,"&")),"-1"!==G&&(t.event=Number.parseInt(G),s+="event=".concat(t.event,"&")),"-1"!==V&&(t.section=Number.parseInt(V),s+="section=".concat(t.section,"&")),"-1"!==ee&&(t.challenge=Number.parseInt(ee),s+="challenge=".concat(t.challenge,"&")),e.next=9,te(n,t);case 9:a(s.slice(0,-1),{replace:!0});case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[Y,G,V,ee,a,te]);Ie((0,A.A)(N().mark((function e(){var n,t,s,r;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([P.getScoreboardSearchParams(),P.getAdminChallenges()]);case 2:return n=e.sent,t=(0,b.A)(n,2),s=t[0],r=t[1],e.next=8,se(0);case 8:h(s),p(r);case 10:case"end":return e.stop()}}),e)}))),[]);var re,ae,ie=(0,r.useCallback)((function(){var e=new URLSearchParams({token:P.token||""}),n=new URLSearchParams(i.search),t=n.get("venue")||"-1",s=n.get("event")||"-1",r=n.get("section")||"-1",a=n.get("challenge")||"-1";"-1"!==t&&e.set("affiliation",t),"-1"!==s&&e.set("event",s),"-1"!==r&&e.set("section",r),"-1"!==a&&e.set("challenge",a);var c=document.createElement("a");c.href="/api/admin/writeups/export?"+e.toString(),document.body.appendChild(c),c.click(),document.body.removeChild(c)}),[i.search]);if("-1"!==G){var ce,le=u.events.find((function(e){return e.id===Number.parseInt(G)}));re=null!==(ce=null==le?void 0:le.sections.map((function(e){return(0,W.A)((0,W.A)({},e),{},{event:le.name})})))&&void 0!==ce?ce:[]}else{re=[];var oe,de=(0,I.A)(u.events);try{for(de.s();!(oe=de.n()).done;){var ue,he=oe.value,xe=(0,I.A)(he.sections);try{for(xe.s();!(ue=xe.n()).done;){var me=ue.value;re.push((0,W.A)((0,W.A)({},me),{},{event:he.name}))}}catch(e){xe.e(e)}finally{xe.f()}}}catch(e){de.e(e)}finally{de.f()}}return ae="-1"!==V?f.filter((function(e){return e.sectionId===Number.parseInt(V)})):f.filter((function(e){return-1!==re.findIndex((function(n){return n.id===e.sectionId}))})),(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("h3",{children:"Writeups"}),(0,U.jsxs)(Le.A,{className:"justify-content-center",children:[(0,U.jsx)(Re.A,{xs:12,lg:3,className:"mt-3",children:(0,U.jsx)(Z.A.Group,{children:(0,U.jsxs)(Z.A.Select,{value:Y,onChange:function(e){return D(e.target.value)},children:[(0,U.jsx)("option",{value:"-1",children:"All affiliations"}),u.affiliations.map((function(e){return(0,U.jsx)("option",{value:e.id,children:e.name},e.id)}))]})})}),(0,U.jsx)(Re.A,{xs:12,lg:2,className:"mt-3",children:(0,U.jsx)(Z.A.Group,{className:"m-0",children:(0,U.jsxs)(Z.A.Select,{value:G,onChange:function(e){return function(e){if("-1"===e)return H(e);var n=u.events.find((function(n){return n.id===Number.parseInt(e)})),t=n.sections.find((function(e){return e.id===Number.parseInt(V)}));t||Q("-1"),H(e);var s=f.find((function(e){return e.id===Number.parseInt(ee)}));s&&s.eventId!==Number.parseInt(e)&&ne("-1")}(e.target.value)},children:[(0,U.jsx)("option",{value:"-1",children:"All events"}),u.events.map((function(e){return(0,U.jsx)("option",{value:e.id,children:e.name},e.id)}))]})})}),(0,U.jsx)(Re.A,{xs:12,lg:2,className:"mt-3",children:(0,U.jsx)(Z.A.Group,{className:"m-0",children:(0,U.jsxs)(Z.A.Select,{value:V,onChange:function(e){return function(e){if("-1"===e)return Q(e);Q(e);var n=f.find((function(e){return e.id===Number.parseInt(ee)}));n&&n.sectionId!==Number.parseInt(e)&&ne("-1")}(e.target.value)},children:[(0,U.jsx)("option",{value:"-1",children:"All sections"}),re.map((function(e){return(0,U.jsxs)("option",{value:e.id,children:[e.event," - ",e.name]},e.id)}))]})})}),(0,U.jsx)(Re.A,{xs:12,lg:3,className:"mt-3",children:(0,U.jsx)(Z.A.Group,{className:"m-0",children:(0,U.jsxs)(Z.A.Select,{value:ee,onChange:function(e){return ne(e.target.value)},children:[(0,U.jsx)("option",{value:"-1",children:"All challenges"}),ae.map((function(e){return(0,U.jsx)("option",{value:e.id,children:e.title},e.id)}))]})})}),(0,U.jsx)(Re.A,{xs:8,lg:3,className:"mt-3",children:(0,U.jsxs)(_.A,{variant:"success",className:"w-100",onClick:function(){return se(0)},children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.mRM})," Filter writeups"]})}),(0,U.jsx)(Re.A,{xs:4,lg:1,className:"mt-3",onClick:ie,children:(0,U.jsx)(_.A,{className:"w-100",children:"Export"})})]}),(0,U.jsxs)(Le.A,{className:"justify-content-center",children:[(0,U.jsx)(Re.A,{xs:6,md:2,className:"mt-3",children:(0,U.jsxs)(_.A,{className:"w-100",onClick:function(){return S(0)},children:[(0,U.jsx)(X.g,{icon:$.v2M})," First"]})}),(0,U.jsx)(Re.A,{xs:6,md:2,className:"mt-3",children:(0,U.jsxs)(_.A,{className:"w-100",onClick:function(){return S(Math.max(0,C-1))},children:[(0,U.jsx)(X.g,{icon:$.L4I})," Previous"]})}),(0,U.jsx)(Re.A,{xs:12,md:2,className:"mt-3",children:(0,U.jsx)(Z.A.Select,{className:"text-center",value:C,onChange:function(e){return S(parseInt(e.target.value))},children:Array.from({length:L},(function(e,n){return n})).map((function(e){return(0,U.jsx)("option",{value:e,children:e+1},e)}))})}),(0,U.jsx)(Re.A,{xs:6,md:2,className:"mt-3",children:(0,U.jsxs)(_.A,{className:"w-100",onClick:function(){return S(Math.min(L-1,C+1))},children:["Next ",(0,U.jsx)(X.g,{icon:$.BxI})]})}),(0,U.jsx)(Re.A,{xs:6,md:2,className:"mt-3",children:(0,U.jsxs)(_.A,{className:"w-100",onClick:function(){return S(L-1)},children:["Last ",(0,U.jsx)(X.g,{icon:$.byU})]})})]}),(0,U.jsx)("div",{className:"table-responsive",children:(0,U.jsxs)($e.A,{striped:!0,bordered:!0,hover:!0,className:"mt-5 text-nowrap text-start",children:[(0,U.jsx)("thead",{children:(0,U.jsxs)("tr",{children:[(0,U.jsx)("th",{className:"align-middle",children:"Title"}),(0,U.jsx)("th",{className:"align-middle",children:"Date"}),(0,U.jsx)("th",{className:"align-middle",children:"Author"}),(0,U.jsx)("th",{className:"align-middle",children:"Challenge"})]})}),(0,U.jsx)("tbody",{children:v.map((function(e,n){return(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{className:"align-middle",children:(0,U.jsx)(l.N_,{to:"/writeup/"+e.id,children:e.title})}),(0,U.jsx)("td",{className:"align-middle",children:Ge()(e.timestamp).format("YYYY-MM-DD HH:mm:ss")}),(0,U.jsx)("td",{className:"align-middle",children:(0,U.jsx)(l.N_,{to:"/player/"+e.author.id,children:e.author.nickname?"".concat(e.author.name," ").concat(e.author.surname," (").concat(e.author.nickname,")"):"".concat(e.author.name," ").concat(e.author.surname)})}),(0,U.jsx)("td",{className:"align-middle",children:(0,U.jsx)(l.N_,{to:"/challenges#challenge-".concat(e.challenge.id),children:e.challenge.title})})]},n)}))})]})})]})},Bt=function(){return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Ye,{children:(0,U.jsxs)("title",{children:["Writeup not Found - ",g]})}),(0,U.jsx)("div",{className:"py-5 bg-body text-center",children:(0,U.jsx)(Me.A,{children:(0,U.jsx)(Le.A,{className:"justify-content-center",children:(0,U.jsx)(Re.A,{xs:12,lg:8,children:(0,U.jsxs)("h3",{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.zpE})," 404 Writeup not Found"]})})})})})]})};var qt=["node","className","children"];const Vt=function(){var e=(0,r.useRef)(H()),n=(0,r.useRef)(ye()),t=(0,r.useContext)(q),s=t.user,a=t.setSession,i=(0,c.g)(),o=(0,c.zy)(),d=(0,c.Zp)(),u=(0,r.useState)(!1),h=(0,b.A)(u,2),x=h[0],m=h[1],f=(0,r.useState)(null),p=(0,b.A)(f,2),g=p[0],j=p[1];return(0,r.useEffect)((function(){var t=Number.parseInt(i.id);if(!isNaN(t)){var s=!0;return(0,A.A)(N().mark((function r(){var i;return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n.current(!0),r.next=4,P.getWriteup(t);case 4:i=r.sent,s&&(j(i),m(!1)),n.current(!1),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(0),"NOT_FOUND"===r.t0.code?m(!0):"LOGIN_REQUIRED"===r.t0.code?(a(null),d("/login?redirect=/writeup/".concat(t))):e.current(r.t0.toString(),!0),n.current(!1);case 13:case"end":return r.stop()}}),r,null,[[0,9]])})))(),function(){s=!1}}m(!0)}),[i.id,o.key,d,a]),x?(0,U.jsx)(Bt,{}):g?(0,U.jsxs)(Me.A,{className:"py-5",children:[(0,U.jsxs)("div",{className:"d-flex",children:[(0,U.jsx)("h1",{className:"flex-grow-1",children:g.title}),(null==s?void 0:s.logged)&&("ADMIN"===s.group||"PLAYER"===s.group&&s.writeupsEditing&&s.id===g.author.id)&&(0,U.jsx)("div",{children:(0,U.jsx)(l.N_,{to:"/writeup/edit/".concat(i.id),children:(0,U.jsxs)(_.A,{variant:"primary",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.MT7})," Edit"]})})})]}),(0,U.jsxs)("h4",{className:"text-muted",children:["Writeup by"," ",(0,U.jsx)(l.N_,{to:"/player/".concat(g.author.id),target:"_blank",children:g.author.displayedName})," ","for"," ",(0,U.jsx)(l.N_,{to:"/challenges#challenge-".concat(g.challenge.id),target:"_blank",children:g.challenge.title})]}),(0,U.jsxs)("h6",{className:"text-muted",children:["Last edited: ",new Date(g.timestamp).toLocaleString()]}),(0,U.jsx)("div",{children:(0,U.jsx)("div",{className:"markdown bg-body p-3 mt-3",children:(0,U.jsx)(Xe.$,{rehypePlugins:[Je.A],linkTarget:"_blank",components:{code:function(e){e.node;var n=e.className,t=e.children,s=(0,Ke.A)(e,qt);return(0,U.jsx)("code",(0,W.A)((0,W.A)({className:n?"code "+n:"code"},s),{},{children:t}))}},children:g.content})})})]}):(0,U.jsx)(U.Fragment,{})};var Qt=function(e){return new Promise((function(n,t){var s=new FileReader;s.readAsDataURL(e),s.onload=function(){return n(s.result)},s.onerror=t}))};const Kt=function(){var e=(0,c.Zp)(),n=(0,r.useContext)(q).user,t=(0,c.g)(),s=sn().noFreeze,a=(0,r.useState)(""),i=(0,b.A)(a,2),o=i[0],d=i[1],u=(0,r.useState)(""),h=(0,b.A)(u,2),x=h[0],m=h[1],f=(0,r.useState)(),p=(0,b.A)(f,2),g=p[0],j=p[1],v=(0,r.useState)(!1),y=(0,b.A)(v,2),w=y[0],k=y[1],C=(0,Kn.VB)({onDrop:function(e){Promise.all(e.map(function(){var e=(0,A.A)(N().mark((function e(n){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n.name,e.next=3,Qt(n);case 3:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())).then((function(e){m((function(n){var t,s=(0,I.A)(e);try{for(s.s();!(t=s.n()).done;){var r=(0,b.A)(t.value,2),a=r[0],i=r[1];n+='<img alt="'.concat(a,'" src="').concat(i,'"/>'),n+="\n\n"}}catch(e){s.e(e)}finally{s.f()}return n}))})).catch(console.error)}}),S=C.getRootProps,E=C.getInputProps;Ie((0,A.A)(N().mark((function n(){var r,a,i,c;return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0!==t.id){n.next=13;break}if(r=Number.parseInt(t.challengeId),!isNaN(r)){n.next=5;break}return e(-1),n.abrupt("return");case 5:return d(""),m(""),n.next=9,P.getChallenge(r,s);case 9:a=n.sent,j(a),n.next=23;break;case 13:if(i=Number.parseInt(t.id),!isNaN(i)){n.next=17;break}return e(-1),n.abrupt("return");case 17:return n.next=19,P.getWriteup(i);case 19:c=n.sent,d(c.title),m(c.content),j(c.challenge);case 23:case"end":return n.stop()}}),n)}))),[t,e,s]);var M=We((0,A.A)(N().mark((function n(){var s,r,a,i,c;return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0!==t.id){n.next=8;break}return n.next=3,P.createWriteup(Number.parseInt(t.challengeId,10),o,x);case 3:s=n.sent,r=s.id,e("/writeup/edit/".concat(r),{replace:!0}),n.next=17;break;case 8:return n.next=10,P.updateWriteup(Number.parseInt(t.id,10),o,x);case 10:return a=n.sent,i=a.id,n.next=14,P.getWriteup(i);case 14:c=n.sent,d(c.title),m(c.content);case 17:case"end":return n.stop()}}),n)}))),[e,t,o,x],{title:"Writeup",successMessage:"Writeup updated successfully!"}),L=We((0,A.A)(N().mark((function n(){return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,P.deleteWriteup(Number.parseInt(t.id));case 2:e(-1);case 3:case"end":return n.stop()}}),n)}))),[t.id,e],{title:"Writeup",successMessage:"Writeup deleted successfully!"});return(0,U.jsxs)(Me.A,{className:"py-5",children:[(0,U.jsx)("h3",{children:void 0===t.id?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.OQW})," Create writeup"]}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.MT7})," Edit writeup"]})}),g&&(0,U.jsxs)("h4",{className:"text-muted",children:["For"," ",(0,U.jsx)(l.N_,{to:"/challenges#challenge-".concat(g.id),target:"_blank",children:g.title})]}),(0,U.jsxs)(Z.A,{className:"text-start mt-3",children:[(0,U.jsxs)(Z.A.Group,{children:[(0,U.jsx)(Z.A.Label,{children:"Title"}),(0,U.jsx)(Z.A.Control,{type:"text",placeholder:"Enter title",value:o,onChange:function(e){return d(e.target.value)}})]}),(0,U.jsxs)(Z.A.Group,{className:"text-start mt-3",children:[(0,U.jsx)(Z.A.Label,{children:"Content"}),(0,U.jsx)(ot.KE,{language:"markdown",wrapperProps:{style:{display:"flex",position:"relative",textAlign:"initial",width:"100%",height:"80vh",overflow:"hidden",border:"var(--bs-border-width) solid var(--bs-border-color)",borderRadius:"var(--bs-border-radius)"}},theme:"dark"===te()?"vs-dark":"light",value:x,onChange:function(e){return m(e)}})]}),(0,U.jsxs)("div",(0,W.A)((0,W.A)({},S({className:"dropzone text-center my-4"})),{},{children:[(0,U.jsx)("input",(0,W.A)({},E())),(0,U.jsx)(_.A,{variant:"info",className:"text-white",children:"Drag 'n' drop any images here, or click to select"})]})),(0,U.jsxs)("div",{className:"text-center mt-3",children:[(0,U.jsx)(_.A,{variant:"success",onClick:M,children:void 0===t.id?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.hSh})," Create"]}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.hSh})," Save"]})})," ",void 0!==t.id&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(l.N_,{to:"/writeup/".concat(t.id),target:"_blank",children:(0,U.jsxs)(_.A,{variant:"primary",children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.pS3})," View"]})})," "]})," ",void 0!==t.id&&(null==n?void 0:n.logged)&&("ADMIN"===n.group||n.writeupsEditing)&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(_.A,{variant:"danger",onClick:function(){return k(!0)},children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.yLS})," Delete"]})," "]}),(0,U.jsxs)(_.A,{variant:"secondary",onClick:function(){return e(-1)},children:[(0,U.jsx)(X.g,{fixedWidth:!0,icon:$.GRI})," Close"]})]})]}),(0,U.jsx)(zn,{show:w,onClose:function(){return k(!1)},confirmText:"Delete",confirmVariant:"danger",onConfirm:L,children:"Are you sure you want to delete the writeup?"})]})};var Zt=function(){var e=(0,c.zy)().pathname;return(0,r.useEffect)((function(){window.scrollTo(0,0)}),[e]),null},$t=function(){var e,n=(0,c.zy)();return(0,U.jsx)(c.C5,{to:null!==(e=new URLSearchParams(n.search).get("redirect"))&&void 0!==e?e:"/challenges",replace:!0})},Xt=function(){var e=(0,c.zy)();return(0,U.jsx)(c.C5,{to:"/login?redirect=/challenges".concat(encodeURIComponent(e.hash)),replace:!0})};const Jt=function(){var e=(0,r.useContext)(q).user,n=(0,r.useMemo)((function(){if(!e)return[];var n=0,t=[];return e.logged&&"ADMIN"===e.group&&(t=[].concat((0,i.A)(t),[(0,U.jsxs)(c.qh,{path:"/admin",element:(0,U.jsx)(De,{}),children:[(0,U.jsx)(c.qh,{path:"/admin",element:(0,U.jsx)(bt,{})}),(0,U.jsx)(c.qh,{path:"/admin/statistics",element:(0,U.jsx)(bt,{})}),(0,U.jsx)(c.qh,{path:"/admin/challenges",element:(0,U.jsx)(_n,{})}),(0,U.jsx)(c.qh,{path:"/admin/challenges/:id",element:(0,U.jsx)(Jn,{})}),(0,U.jsx)(c.qh,{path:"/admin/hints",element:(0,U.jsx)(et,{})}),(0,U.jsx)(c.qh,{path:"/admin/users",element:(0,U.jsx)(at,{})}),(0,U.jsx)(c.qh,{path:"/admin/users/:id",element:(0,U.jsx)(it,{})}),(0,U.jsx)(c.qh,{path:"/admin/pages",element:(0,U.jsx)(ct,{})}),(0,U.jsx)(c.qh,{path:"/admin/pages/:id",element:(0,U.jsx)(dt,{})}),(0,U.jsx)(c.qh,{path:"/admin/files",element:(0,U.jsx)(mt,{})}),(0,U.jsx)(c.qh,{path:"/admin/submissions",element:(0,U.jsx)(ft,{})}),(0,U.jsx)(c.qh,{path:"/admin/writeups",element:(0,U.jsx)(Ht,{})}),(0,U.jsx)(c.qh,{path:"/admin/webhooks",element:(0,U.jsx)(kt,{})}),(0,U.jsx)(c.qh,{path:"/admin/webhooks/:id",element:(0,U.jsx)(Ct,{})}),(0,U.jsx)(c.qh,{path:"/admin/registration",element:(0,U.jsx)(zt,{})}),(0,U.jsx)(c.qh,{path:"/admin/affiliations",element:(0,U.jsx)(Ut,{})}),(0,U.jsx)(c.qh,{path:"/admin/affiliations/:id",element:(0,U.jsx)(Gt,{})}),(0,U.jsx)(c.qh,{path:"/admin/config",element:(0,U.jsx)(gt,{})}),(0,U.jsx)(c.qh,{path:"/admin/inventory",element:(0,U.jsx)(jt,{})})]},n++)])),e.logged&&"SUPERVISOR"===e.group&&(t=[].concat((0,i.A)(t),[(0,U.jsx)(c.qh,{path:"/venue-management",element:(0,U.jsx)(On,{})},n++)])),t=[].concat((0,i.A)(t),[(0,U.jsx)(c.qh,{path:"/enroll",element:(0,U.jsx)(_t,{})},n++)]),e.logged?(t=[].concat((0,i.A)(t),[(0,U.jsx)(c.qh,{path:"/login",element:(0,U.jsx)($t,{})},n++),(0,U.jsx)(c.qh,{path:"/player",element:(0,U.jsx)(Nn,{})},n++),(0,U.jsx)(c.qh,{path:"/player/:id",element:(0,U.jsx)(Nn,{})},n++),(0,U.jsx)(c.qh,{path:"/challenges",element:(0,U.jsx)(dn,{})},n++)]),"PLAYER"===e.group&&e.writeupsEditing&&(t=[].concat((0,i.A)(t),[(0,U.jsx)(c.qh,{path:"/writeup/new/:challengeId",element:(0,U.jsx)(Kt,{})},n++),(0,U.jsx)(c.qh,{path:"/writeup/edit/:id",element:(0,U.jsx)(Kt,{})},n++)])),(e.writeupsEnabled||"ADMIN"===e.group)&&(t=[].concat((0,i.A)(t),[(0,U.jsx)(c.qh,{path:"/writeup/:id",element:(0,U.jsx)(Vt,{})},n++)])),("PLAYER"!==e.group||e.scoreboardVisible)&&(t=[].concat((0,i.A)(t),[(0,U.jsx)(c.qh,{path:"/scoreboard",element:(0,U.jsx)(Fn,{})},n++)])),e.passwordRecoveryAllowed&&(t=[].concat((0,i.A)(t),[(0,U.jsx)(c.qh,{path:"/password-recovery",element:(0,U.jsx)(Ot,{})},n++)]))):(t=[].concat((0,i.A)(t),[(0,U.jsx)(c.qh,{path:"/login",element:(0,U.jsx)(un,{})},n++),(0,U.jsx)(c.qh,{path:"/player",element:(0,U.jsx)(Nn,{})},n++),(0,U.jsx)(c.qh,{path:"/player/:id",element:(0,U.jsx)(Nn,{})},n++),(0,U.jsx)(c.qh,{path:"/scoreboard",element:(0,U.jsx)(Fn,{})},n++),(0,U.jsx)(c.qh,{path:"/challenges",element:(0,U.jsx)(Xt,{})},n++)]),e.registrationAllowed&&(t=[].concat((0,i.A)(t),[(0,U.jsx)(c.qh,{path:"/signup",element:(0,U.jsx)(Yt,{})},n++)])),e.passwordRecoveryAllowed&&(t=[].concat((0,i.A)(t),[(0,U.jsx)(c.qh,{path:"/password-recovery",element:(0,U.jsx)(Ot,{})},n++)]))),[].concat((0,i.A)(t),[(0,U.jsx)(c.qh,{path:"/*",element:(0,U.jsx)(mn,{})},n++)])}),[e]);return(0,U.jsx)(l.Kd,{children:(0,U.jsxs)(Se,{children:[(0,U.jsx)(Ee,{}),(0,U.jsx)(Zt,{}),(0,U.jsx)(B,{children:(0,U.jsx)(Ne,{children:(0,U.jsx)(rn,{children:(0,U.jsx)(c.BV,{children:n})})})}),(0,U.jsx)(p,{})]})})};t(6378);var es=t(4909),ns={};ns.styleTagTransform=je(),ns.setAttributes=me(),ns.insert=he().bind(null,"head"),ns.domAPI=de(),ns.insertStyleElement=pe(),le()(es.A,ns),es.A&&es.A.locals&&es.A.locals;var ts=t(9238),ss={};ss.styleTagTransform=je(),ss.setAttributes=me(),ss.insert=he().bind(null,"head"),ss.domAPI=de(),ss.insertStyleElement=pe(),le()(ts.A,ss),ts.A&&ts.A.locals&&ts.A.locals;var rs=t(7919),as={};as.styleTagTransform=je(),as.setAttributes=me(),as.insert=he().bind(null,"head"),as.domAPI=de(),as.insertStyleElement=pe(),le()(rs.A,as),rs.A&&rs.A.locals&&rs.A.locals;var is=t(3007),cs=t(1030);const ls=function(){var e=window.__MATOMO_URL||void 0,n=parseInt(window.__MATOMO_SITE_ID)||void 0,t=(0,is.A)({urlBase:e||"disabled",siteId:n||-1,disabled:!e||!n});return(0,U.jsx)(cs.A,{value:t,children:(0,U.jsx)(a.vd,{children:(0,U.jsx)(V,{children:(0,U.jsx)(Jt,{})})})})};var os=t(6429);t(895),os.$W.autoAddCss=!1,s.H(document.getElementById("root")).render((0,U.jsx)(r.StrictMode,{children:(0,U.jsx)(ls,{})}))},2247:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 30 30%27%3e%3cpath stroke=%27rgba%2833, 37, 41, 0.75%29%27 stroke-linecap=%27round%27 stroke-miterlimit=%2710%27 stroke-width=%272%27 d=%27M4 7h22M4 15h22M4 23h22%27/%3e%3c/svg%3e"},3385:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%272%27 fill=%27%23fff%27/%3e%3c/svg%3e"},3544:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var s=t(1601),r=t.n(s),a=t(6314),i=t.n(a)()(r());i.push([e.id,"@keyframes loading-rotate360 {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loading-spinnerDash {\n  0% {\n    stroke-dasharray: 1, 200;\n    stroke-dashoffset: 0;\n  }\n  50% {\n    stroke-dasharray: 89, 200;\n    stroke-dashoffset: -35px;\n  }\n  100% {\n    stroke-dasharray: 89, 200;\n    stroke-dashoffset: -124px;\n  }\n}\n\n.loading-container {\n  z-index: 5000;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  top: 0px;\n  left: 0px;\n  display: flex;\n  text-align: center;\n  font-size: 1.2em;\n  color: #fff;\n  background: rgba(0, 0, 0, 0.7);\n  z-index: 800;\n  transition: opacity 300ms ease-in;\n  opacity: 0;\n}\n\n.loading-container-entering {\n  opacity: 1 !important;\n}\n\n.loading-spinner {\n  position: relative;\n  margin: 0px auto 10px auto;\n  width: 50px;\n  max-height: 100%;\n}\n\n.loading-spinner:before {\n  content: '';\n  display: block;\n  padding-top: 100%;\n}\n\n.loading-spinner svg {\n  animation: loading-rotate360 2s linear infinite;\n  height: 100%;\n  transform-origin: center center;\n  width: 100%;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n}\n.loading-spinner svg circle {\n  animation: loading-spinnerDash 1.5s ease-in-out infinite;\n  stroke-dasharray: 1, 200;\n  stroke-dashoffset: 0;\n  stroke-linecap: round;\n  stroke: #fff;\n}\n",""]);const c=i},4274:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 20 20%27%3e%3cpath fill=%27none%27 stroke=%27%23fff%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%273%27 d=%27M6 10h8%27/%3e%3c/svg%3e"},4718:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27%23fff%27/%3e%3c/svg%3e"},4909:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var s=t(1601),r=t.n(s),a=t(6314),i=t.n(a)()(r());i.push([e.id,".svg-white {\n  filter: brightness(0) invert(1);\n}\n\n[data-bs-theme='dark'] .svg-body {\n  filter: brightness(0) invert(1);\n}\n\n.text-blue {\n  color: #1b4778;\n}\n\n.text-red {\n  color: #f33c3c;\n}\n\n.text-gray {\n  color: #9a9a9a;\n}\n\n.text-blue-light {\n  color: #1e5ea4;\n}\n\n.border-blue {\n  border-color: #1b4778;\n}\n\n.border-red {\n  border-color: #f33c3c;\n}\n\n.border-gray {\n  border-color: #9a9a9a;\n}\n\n.bg-blue {\n  background-color: #1b4778;\n}\n\n.bg-red {\n  background-color: #f33c3c;\n}\n\n.bg-gray {\n  background-color: #9a9a9a;\n}\n\n.bg-blue-light {\n  background-color: #1e5ea4;\n}\n\n.table .thead-blue th {\n  color: #fff;\n  background-color: #1b4778;\n  border-color: #1b4778;\n}\n\n.w-10 {\n  width: 10% !important;\n}\n.w-20 {\n  width: 20% !important;\n}\n.w-30 {\n  width: 30% !important;\n}\n.w-40 {\n  width: 40% !important;\n}\n.w-50 {\n  width: 50% !important;\n}\n.w-60 {\n  width: 60% !important;\n}\n.w-70 {\n  width: 70% !important;\n}\n.w-80 {\n  width: 80% !important;\n}\n.w-90 {\n  width: 90% !important;\n}\n.w-100 {\n  width: 100% !important;\n}\n\n.cursor-pointer {\n  cursor: pointer;\n}\n\n.line-height-1 {\n  line-height: 1rem;\n}\n\n.opacity-0 {\n  opacity: 0;\n}\n.opacity-10 {\n  opacity: 0.1;\n}\n.opacity-20 {\n  opacity: 0.2;\n}\n.opacity-30 {\n  opacity: 0.3;\n}\n.opacity-40 {\n  opacity: 0.4;\n}\n.opacity-50 {\n  opacity: 0.5;\n}\n.opacity-60 {\n  opacity: 0.6;\n}\n.opacity-70 {\n  opacity: 0.7;\n}\n.opacity-80 {\n  opacity: 0.8;\n}\n.opacity-90 {\n  opacity: 0.9;\n}\n.opacity-100 {\n  opacity: 1;\n}\n\n.table > :not(:first-child) {\n  border-top: 0px !important;\n}\n\n/* Old bootstrap colors */\n.text-primary, .bg-primary {\n  --bs-primary-rgb: 0, 123, 255;\n}\n.text-success, .bg-success {\n  --bs-success-rgb: 40, 167, 69;\n}\n.text-info, .bg-info {\n  --bs-info-rgb: 23, 162, 184;\n}\n\n.btn-primary {\n  --bs-btn-bg: #007bff;\n  --bs-btn-border-color: #007bff;\n  --bs-btn-disabled-bg: #007bff;\n  --bs-btn-disabled-border-color: #007bff;\n\n  --bs-btn-hover-bg: #0069d9;\n  --bs-btn-hover-border-color: #0069d9;\n\n  --bs-btn-active-bg: #0063cc;\n  --bs-btn-active-border-color: #0063cc;\n}\n.btn-success {\n  --bs-btn-bg: #28a745;\n  --bs-btn-border-color: #28a745;\n  --bs-btn-disabled-bg: #28a745;\n  --bs-btn-disabled-border-color: #28a745;\n\n  --bs-btn-hover-bg: #23913d;\n  --bs-btn-hover-border-color: #23913d;\n\n  --bs-btn-active-bg: #218a39;\n  --bs-btn-active-border-color: #218a39;\n}\n.btn-info {\n  --bs-btn-bg: #17a2b8;\n  --bs-btn-border-color: #17a2b8;\n  --bs-btn-disabled-bg: #17a2b8;\n  --bs-btn-disabled-border-color: #17a2b8;\n\n  --bs-btn-hover-bg: #32a6b8;\n  --bs-btn-hover-border-color: #32a6b8;\n\n  --bs-btn-active-bg: #3ba7b8;\n  --bs-btn-active-border-color: #3ba7b8;\n}\n.btn-lightbtn-sm,\n.btn-lightbtn-xs {\n  background: #f8f9fa !important;\n  border-color: #f8f9fa !important;\n}\n\n/* Top color */\n.text-gold {\n  color: gold;\n}\n.text-silver {\n  color: silver;\n}\n.text-bronze {\n  color: #cd7f32;\n}\n/* More rounded size */\n\n.rounded-4 {\n  border-radius: 0.4rem !important;\n}\n.rounded-5 {\n  border-radius: 0.5rem !important;\n}\n\n.table-overflow {\n  max-height: 512px !important;\n  overflow-y: auto !important;\n}\n\n.table-overflow-256 {\n  max-height: 256px !important;\n  overflow-y: auto !important;\n}\n\n.navbar-height {\n  min-height: 90px;\n}\n\n.text-overflow-ellipsis {\n  text-overflow: ellipsis;\n}\n\n.white-space-nowrap {\n  white-space: nowrap;\n}\n\n.overflow-hidden {\n  overflow: hidden;\n}\n\n.overflow-wrap-anywhere {\n  overflow-wrap: anywhere;\n}\n\n.markdown:last-child {\n  padding-bottom: 0px !important;\n}\n.markdown > p {\n  padding-bottom: 16px !important;\n}\n\n.form-check-label,\n.form-check-input {\n  /* This adds an affordance to the input, for some \n    reason Bootstrap doesn't have it, and I hate it very much */\n  cursor: pointer;\n}\n",""]);const c=i},5372:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 12 12%27 width=%2712%27 height=%2712%27 fill=%27none%27 stroke=%27%23dc3545%27%3e%3ccircle cx=%276%27 cy=%276%27 r=%274.5%27/%3e%3cpath stroke-linejoin=%27round%27 d=%27M5.8 3.6h.4L6 6.5z%27/%3e%3ccircle cx=%276%27 cy=%278.2%27 r=%27.6%27 fill=%27%23dc3545%27 stroke=%27none%27/%3e%3c/svg%3e"},5419:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 20 20%27%3e%3cpath fill=%27none%27 stroke=%27%23fff%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%273%27 d=%27m6 10 3 3 6-6%27/%3e%3c/svg%3e"},5782:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27%2386b7fe%27/%3e%3c/svg%3e"},5932:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23fff%27%3e%3cpath d=%27M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z%27/%3e%3c/svg%3e"},6366:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 30 30%27%3e%3cpath stroke=%27rgba%28255, 255, 255, 0.55%29%27 stroke-linecap=%27round%27 stroke-miterlimit=%2710%27 stroke-width=%272%27 d=%27M4 7h22M4 15h22M4 23h22%27/%3e%3c/svg%3e"},6690:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%236ea8fe%27%3e%3cpath fill-rule=%27evenodd%27 d=%27M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e"},7115:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27%3e%3cpath fill=%27none%27 stroke=%27%23dee2e6%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%272%27 d=%27m2 5 6 6 6-6%27/%3e%3c/svg%3e"},7154:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27rgba%280, 0, 0, 0.25%29%27/%3e%3c/svg%3e"},7249:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23000%27%3e%3cpath d=%27M.293.293a1 1 0 0 1 1.414 0L8 6.586 14.293.293a1 1 0 1 1 1.414 1.414L9.414 8l6.293 6.293a1 1 0 0 1-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 0 1-1.414-1.414L6.586 8 .293 1.707a1 1 0 0 1 0-1.414z%27/%3e%3c/svg%3e"},7830:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23212529%27%3e%3cpath fill-rule=%27evenodd%27 d=%27M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e"},7912:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27%3e%3cpath fill=%27none%27 stroke=%27%23343a40%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%272%27 d=%27m2 5 6 6 6-6%27/%3e%3c/svg%3e"},7919:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var s=t(1601),r=t.n(s),a=t(6314),i=t.n(a)()(r());i.push([e.id,"",""]);const c=i},8487:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 8 8%27%3e%3cpath fill=%27%23198754%27 d=%27M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z%27/%3e%3c/svg%3e"},8563:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var s=t(1601),r=t.n(s),a=t(6314),i=t.n(a)()(r());i.push([e.id,"p {\n  margin: 0px !important;\n}\n",""]);const c=i},8734:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27rgba%28255, 255, 255, 0.25%29%27/%3e%3c/svg%3e"},8881:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23052c65%27%3e%3cpath fill-rule=%27evenodd%27 d=%27M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e"},9238:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var s=t(1601),r=t.n(s),a=t(6314),i=t.n(a)()(r());i.push([e.id,"html {\n  height: 100%;\n}\n\nbody {\n  height: 100%;\n  margin: 0;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu',\n    'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#root {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\ncode,\n.code {\n  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace;\n  font-size: 87.5%;\n  color: #e83e8c;\n  word-wrap: break-word;\n}\n\na {\n  text-decoration: none;\n}\n\na:hover {\n  text-decoration: none;\n}\n\n.markdown p:last-child {\n  margin-bottom: 0 !important;\n}\n",""]);const c=i}},e=>{e.O(0,[96],(()=>e(e.s=1985))),e.O()}]);