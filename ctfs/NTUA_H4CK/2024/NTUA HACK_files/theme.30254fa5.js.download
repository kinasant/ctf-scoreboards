(n=>{let r={};r.userPreferences={_mod:"theme.platformtheme.",_scheme:{darkmode:["boolean",!1,void 0]},get:function(e){let t=window.localStorage.getItem(this._mod+e);if(!this._scheme.hasOwnProperty(e))return t;let o=this._scheme[e];if(t==null)return o[1];switch(o[0]){case"boolean":try{return t=t.toLowerCase(),o[2]=!!(t&&t==="true")}catch(s){return console.log(`Failed to parse the preference "${e}"!`,s),o[1]}case"json":try{return o[2]=JSON.parse(t)}catch(s){return console.log(`Failed to parse them preference "${e}"!`,s),o[1]}}return console.log(`Failed to parse them preference "${e}", unknown type!`),o[1]},set:function(e,t){this._scheme.hasOwnProperty(e)||window.localStorage.setItem(this._mod+e,t);let o=this._scheme[e];switch(o[0]){case"boolean":try{return o[2]=!!t,window.localStorage.setItem(this._mod+e,t?"true":"false"),!0}catch(s){return console.log(`Failed to set the preference "${e}"!`,s),!1}case"json":try{return o[2]=t,window.localStorage.setItem(this._mod+e,JSON.stringify(t)),!0}catch(s){return console.log(`Failed to set them preference "${e}"!`,s),!1}}return console.log(`Failed to parse them preference "${e}", unknown type!`),!1}},r.init={body:function(){this.sidebarCollapse(),this.darkMode()},sidebarCollapse:function(){window.localStorage.getItem("remember.lte.pushmenu")=="sidebar-collapse"&&document.body.classList.add("sidebar-collapse")},darkMode:function(){r.userPreferences.get("darkmode")&&document.body.classList.add("dark-mode")}},r.action={updateDarkMode:function(){let e=r.userPreferences.get("darkmode");e?document.body.classList.contains("dark-mode")||document.body.classList.add("dark-mode"):document.body.classList.contains("dark-mode")&&document.body.classList.remove("dark-mode");let t=document.getElementById("theme-mode-dark");if(t){let o=t.getElementsByTagName("a");o[0].style.display=e?"none":"block",o[1].style.display=e?"block":"none"}},toggleDarkMode:function(){let e=!r.userPreferences.get("darkmode");r.userPreferences.set("darkmode",e),this.updateDarkMode()}},n.CTFdPlatformTheme=r})(window);
