(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{B0n4:function(e,t,n){"use strict";n.r(t),function(e){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n("+mXV"),c=n("obyI"),s=n("C+Gs"),l=n("WX8x"),u=n("JXlG"),d=n("pEbl"),b=n("ucLl"),p=n("YM+X"),f=n("O1lG");const m=[25,50,100],g=0,v=1,O=2,y=Object(s.a)({frame:{paddingBottom:"1.5em",paddingTop:"2.125em",background:"var(--bg-dark)",backdropFilter:"none","& .frame__subtitle":{color:"#fff"},"& button, & select, & option":{background:"var(--bg-darker)",color:"#fff"}},tableFrame:{paddingTop:"1.5em"},selected:{backgroundColor:"rgba(216,216,216,.07)","&:hover":{backgroundColor:"rgba(216,216,216,.20) !important"}},table:{tableLayout:"fixed","& tbody td":{overflow:"hidden",whiteSpace:"nowrap"},"& a":{color:"white","&:hover":{textDecoration:"underline"}}},goto:{marginTop:"2rem","&:hover":{color:"var(--btn-fg)"}}},(({classes:t})=>{const n=Object(i.h)((()=>null!==localStorage.getItem("token")),[]),r=Object(i.h)((()=>{const e=JSON.parse(localStorage.getItem("scoreboardPageState")||"{}"),t=new URLSearchParams(location.search),n={};if(t.has("page")){const e=parseInt(t.get("page"));isNaN(e)||(n.page=e)}if(t.has("pageSize")){const e=parseInt(t.get("pageSize"));isNaN(e)||(n.pageSize=e)}return t.has("division")&&(n.division=t.get("division")),o(o({},e),n)}),[]),[a,s]=Object(i.k)(null),[y,h]=Object(i.k)(r.pageSize||100),[j,w]=Object(i.k)([]),[k,x]=Object(i.k)(null),[P,S]=Object(i.k)(r.division||"all"),[$,M]=Object(i.k)(r.page||1),[E,X]=Object(i.k)(0),[C,D]=Object(i.k)(g),[I,L]=Object(i.k)(g),T=Object(i.j)(),{toast:z}=Object(b.b)(),N=Object(i.a)((e=>{S(e),M(1)}),[S,M]),_=Object(i.a)((e=>{h(e),M(Math.floor(($-1)*y/e)+1)}),[y,h,$,M]);Object(i.d)((()=>{localStorage.setItem("scoreboardPageState",JSON.stringify({pageSize:y,division:P}))}),[y,P]),Object(i.d)((()=>{1===$&&""===location.search||history.replaceState({},"",`?page=${$}&division=${encodeURIComponent(P)}&pageSize=${y}`)}),[y,P,$]);const F=Object(i.a)((e=>N(e.target.value)),[N]),G=Object(i.a)((e=>_(e.target.value)),[_]);Object(i.d)((()=>{document.title=`Scoreboard | ${c.a.ctfName}`}),[]),Object(i.d)((()=>{n&&Object(f.c)().then((({data:e,error:t})=>{t&&z({body:t,type:"error"}),s(e)}))}),[n,z]),Object(i.d)((()=>{(async()=>{const e="all"===P?void 0:P,{kind:t,data:n}=await Object(p.b)({division:e,offset:($-1)*y,limit:y});D("badNotStarted"===t?v:O),"goodLeaderboard"===t&&(w(n.leaderboard.map(((e,t)=>o(o({},e),{},{rank:t+1+($-1)*y})))),X(n.total))})()}),[P,$,y]),Object(i.d)((()=>{(async()=>{const e="all"===P?void 0:P,{kind:t,data:n}=await Object(p.a)({division:e});L("badNotStarted"===t?v:O),"goodLeaderboard"===t&&x(n)})()}),[P]);const B=n&&null!==a&&null!==a.globalPlace&&("all"===P||Number.parseInt(P)===a.division),R=Object(i.h)((()=>{if(null==a)return!1;let e=!1;return j.forEach((({id:t})=>{t===a.id&&(e=!0)})),e}),[a,j]),V=Object(i.a)((()=>{T.current.scrollIntoView({block:"nearest",behavior:"smooth"})}),[T]),[U,J]=Object(i.k)(!1),H=Object(i.a)((()=>{if(!B)return;let e;e="all"===P?a.globalPlace:a.divisionPlace,M(Math.floor((e-1)/y)+1),R?V():J(!0)}),[a,M,y,P,B,R,V]);return Object(i.d)((()=>{U&&R&&(V(),J(!1))}),[R,U,V]),C===g||I===g?null:C===v||I===v?e(d.a,null):e("div",{class:"row u-center",style:"align-items: initial !important"},e("div",{class:"col-12 u-center"},e("div",{class:"col-8"},e(u.a,{graphData:k}))),e("div",{class:"col-3"},e("div",{class:`frame ${t.frame}`},e("div",{class:"frame__body"},e("div",{class:"frame__subtitle"},"Filter by division"),e("div",{class:"input-control"},e("select",{required:!0,class:"select",name:"division",value:P,onChange:F},e("option",{value:"all",selected:!0},"All"),Object.entries(c.a.divisions).map((([t,n])=>e("option",{key:t,value:t},n))))),e("div",{class:"frame__subtitle"},"Teams per page"),e("div",{class:"input-control"},e("select",{required:!0,class:"select",name:"pagesize",value:y,onChange:G},m.map((t=>e("option",{key:t,value:t},t))))),n&&e("div",{class:"btn-container u-center"},e("button",{class:`btn- ${t.goto}`,disabled:!B,onClick:H},"Go to my team"))))),e("div",{class:"col-6"},e("div",{class:`frame ${t.frame} ${t.tableFrame}`},e("div",{class:"frame__body"},e("table",{class:`table small ${t.table}`},e("thead",null,e("tr",null,e("th",{style:"width: 3.5em"},"#"),e("th",null,"Team"),e("th",{style:"width: 5em"},"Points"))),e("tbody",null,j.map((({id:n,name:r,score:o,rank:i})=>{const c=null!=a&&a.id===n;return e("tr",{key:n,class:c?t.selected:"",ref:c?T:null},e("td",null,i),e("td",null,e("a",{href:`/profile/${n}`},r)),e("td",null,o))}))))),E>y&&e(l.a,{totalItems:E,pageSize:y,page:$,setPage:M,numVisiblePages:9}))))}));t.default=y}.call(this,n("sL3o").h)},"FrX+":function(e,t,n){"use strict";function r(e){return Object(o.h)(l.a,{...e,glyph:"clock",viewBox:"0 0 24 24"})}n.d(t,"a",(function(){return r}));var o=n("sL3o"),a=n("ziER"),i=n.n(a),c=n("5JeM"),s=n.n(c),l=n("VXtC");const u=new i.a({id:"clock",use:"clock-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#ffffff" id="clock"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z" /><path d="M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z" /></symbol>'});s.a.add(u)},JXlG:function(e,t,n){"use strict";(function(e){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=n("sL3o"),l=n("+mXV"),u=n("C+Gs"),d=n("obyI"),b=n("Xjb4");const p=["points","onTooltipIn","onMouseMove","onMouseOut","name","currentScore"],f=400,m=864e5,g=({minX:e,maxX:t,time:n,width:r})=>(n-e)/(t-e)*r,v=e=>{const t=parseInt(e.slice(-12),16)+1;return`rgba(186, ${89*t%128}, ${53*t%128}, 0.8)`},O=Object(b.b)((t=>{let{points:n,onTooltipIn:r,onMouseMove:o,onMouseOut:a,name:l,currentScore:u}=t,d=c(t,p);return e(s.Fragment,null,e("polyline",i({},d,{points:n,"stroke-width":2,"stroke-linecap":"round",fill:"transparent","pointer-events":"none"})),e("polyline",{"stroke-width":12,points:n,"stroke-linecap":"round",fill:"transparent","pointer-events":"stroke",onMouseOver:r(`${l} - ${u} points`),onMouseMove:o,onMouseOut:a}))}));t.a=Object(u.a)({root:{marginBottom:"20px",background:"var(--bg-dark)","& .frame__body":{padding:"20px"}},tooltip:{position:"fixed",pointerEvents:"none",background:"#fff",color:"var(--bg-dark)",padding:"5px 10px",borderRadius:"5px",margin:"5px",top:"0",left:"0"}},(function({graphData:t,classes:n}){const r=Object(l.j)(null),[a,i]=Object(l.k)(window.innerWidth),c=Object(l.a)((()=>{null!==r.current&&i(r.current.getBoundingClientRect().width)}),[]),[u,b]=Object(l.k)({x:0,y:0,content:""});Object(l.g)((()=>{c()}),[c]),Object(l.d)((()=>{function e(){c()}return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[c]);const{polylines:p,labels:y}=Object(l.h)((()=>{if(!t||0===t.length)return{polylines:[],labels:[]};const e=d.a.startTime,n=Math.min(Date.now(),d.a.endTime);let r=0;t.graph.forEach((e=>{e.points.forEach((e=>{e.score>r&&(r=e.score)}))}));const o=(({minX:e,maxX:t,width:n})=>{const r=[],o=Math.ceil((t-e)/n*200/m)*m;let a=new Date(e).setHours(0,0,0,0);a%o!=0&&(a+=o);for(let i=a;i<=t;i+=o)r.push({label:new Date(i).toLocaleDateString(),x:g({minX:e,maxX:t,time:i,width:n})});return r})({minX:e,maxX:n,width:a}),i=t.graph.map((t=>(({id:e,name:t,currentScore:n,points:r,maxX:o,minX:a,maxY:i,width:c})=>{const s=r.map((e=>`${g({minX:a,maxX:o,time:e.time,width:c})} ${(1-e.score/i)*f}`));return{color:v(e),name:t,currentScore:n,points:s.join(",")}})({points:t.points,id:t.id,name:t.name,currentScore:t.points[0].score,maxX:n,minX:e,maxY:r,width:a})));return{polylines:i,labels:o}}),[t,a]),h=Object(l.a)((e=>()=>{b((t=>o(o({},t),{},{content:e})))}),[]),j=Object(l.a)((e=>{b((t=>o(o({},t),{},{x:e.clientX,y:e.clientY})))}),[]),w=Object(l.a)((()=>{b((e=>o(o({},e),{},{content:""})))}),[]);return null===t?null:e("div",{class:`frame ${n.root}`},e("div",{class:"frame__body"},e("svg",{ref:r,viewBox:`-22 -2 ${a+4+20} 444`},e(s.Fragment,null,p.map((({points:t,color:n,name:r,currentScore:o},a)=>e(O,{key:a,stroke:n,points:t,name:r,currentScore:o,onMouseMove:j,onMouseOut:w,onTooltipIn:h})))),e(s.Fragment,null,y.map(((t,n)=>e("text",{x:t.x,y:440,key:n,fill:"#fff"},t.label)))),e("line",{x1:-20,y1:420,x2:a,y2:420,stroke:"var(--cirrus-bg)","stroke-linecap":"round","stroke-width":2}),e("line",{x1:-20,y1:"0",x2:-20,y2:420,stroke:"var(--cirrus-bg)","stroke-linecap":"round","stroke-width":2}))),u.content&&e("div",{class:n.tooltip,style:{transform:`translate(${u.x}px, ${u.y}px)`}},u.content))}))}).call(this,n("sL3o").h)},O1lG:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return s})),n.d(t,"a",(function(){return l}));var r=n("vgrf");const o=async()=>{const e=await Object(r.b)("GET","/users/me");return Object(r.a)({resp:e,valid:["goodUserData"]})},a=async({authToken:e})=>{const{data:t}=await(await fetch("/api/v1/users/me",{headers:{authorization:`Bearer ${e}`}})).json();return t},i=async e=>{const t=await Object(r.b)("GET",`/users/${encodeURIComponent(e)}`);return Object(r.a)({resp:t,valid:["goodUserData"]})},c=async({name:e,division:t})=>{const n=await Object(r.b)("PATCH","/users/me",{name:e,division:t});if("badRateLimit"===n.kind){const e=Math.floor(n.data.timeLeft/1e3),t=Math.floor(e/60);let r;return r=0===t?`${e} seconds`:`${t} minutes`,{error:`Please wait ${r} before trying this again`}}return Object(r.a)({resp:n,valid:["goodUserUpdate"]})},s=async({email:e,recaptchaCode:t})=>{const n=await Object(r.b)("PUT","/users/me/auth/email",{email:e,recaptchaCode:t});return Object(r.a)({resp:n,valid:["goodVerifySent","goodEmailSet"],resolveDataMessage:!0})},l=async()=>{const e=await Object(r.b)("DELETE","/users/me/auth/email");return Object(r.a)({resp:e,valid:["goodEmailRemoved","badEmailNoExists"],resolveDataMessage:!0})}},VXtC:function(e,t,n){"use strict";(function(e){function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function a(t){let{glyph:n,viewBox:a}=t,c=o(t,i);return e("svg",r({},c,{viewBox:a,xmlns:"http://www.w3.org/2000/svg"}),e("use",{xlinkHref:`#${n}`}))}n.d(t,"a",(function(){return a}));const i=["glyph","viewBox"]}).call(this,n("sL3o").h)},WX8x:function(e,t,n){"use strict";(function(e){function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function a(t){let{onClick:n,disabled:a,selected:c,children:s,tabindex:u}=t,d=o(t,l);const b=d.class||"";delete d.class;const p=Object(i.a)((e=>{e.preventDefault(),n()}),[n]);return e("div",r({class:`pagination-item short ${b}${c?" selected":""}`},d),e("a",{disabled:a,href:n&&"#",onClick:p,tabindex:u},s))}var i=n("+mXV"),c=n("sL3o"),s=n("C+Gs");const l=["onClick","disabled","selected","children","tabindex"],u=Object(s.a)({noHover:{backgroundColor:"transparent !important"},ellipses:{paddingLeft:"0.1em !important",paddingRight:"0.1em !important"}},(({classes:t})=>{const n=Object(i.a)((e=>e.target.blur()),[]);return e("div",{class:`pagination-item short ${t.noHover}`},e("a",{class:`ellipses ${t.ellipses}`,tabindex:"-1",onFocus:n},"…"))}));t.a=function({totalItems:t,pageSize:n,page:r,setPage:o,numVisiblePages:s}){s=s||9;const l=Math.ceil(t/n),{pages:d,startPage:b,endPage:p}=Object(i.h)((()=>{let e,t;l<=s?(e=1,t=l):(e=r-Math.ceil((s-1)/2),t=r+Math.floor((s-1)/2),e<1?(e=1,t=s):t>l&&(t=l,e=l-s+1),e>1&&(e+=2),t<l&&(t-=2));const n=[];for(let r=e;r<=t;r++)n.push(r);return{pages:n,startPage:e,endPage:t}}),[l,r,s]),f=Object(i.h)((()=>{const e=[];for(let t=1;t<=l;t++)e.push((()=>o(t)));return e}),[o,l]);return e("div",{class:"pagination u-center"},e(a,{disabled:1===r,key:"<",onClick:f[r-1-1]},"<"),b>1&&e(c.Fragment,null,e(a,{key:1,onClick:f[0]},"1"),e(u,{key:".<"})),d.map((t=>e(a,{selected:t===r,key:t,onClick:f[t-1]},t))),p<l&&e(c.Fragment,null,e(u,{key:".>"}),e(a,{key:l,onClick:f[l-1]},l)),e(a,{disabled:r===l,key:">",onClick:f[r+1-1]},">"))}}).call(this,n("sL3o").h)},"YM+X":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a}));var r=n("vgrf");const o=({division:e,limit:t=100,offset:n=0})=>Object(r.b)("GET","/leaderboard/now",{division:e,limit:t,offset:n}),a=async({division:e})=>Object(r.b)("GET","/leaderboard/graph",{division:e,limit:10})},pEbl:function(e,t,n){"use strict";(function(e){var r=n("C+Gs"),o=n("FrX+"),a=n("obyI");const i=Object(r.a)({card:{background:"var(--bg-dark)",backdropFilter:"none",padding:"30px !important",flexDirection:"column"},icon:{width:"60px"}},(({classes:t})=>e("div",{class:"row"},e("div",{class:`card u-center col-6 ${t.card}`},e("div",{class:t.icon},e(o.a,null)),e("h4",null,a.a.ctfName," has not started yet.")))));t.a=i}).call(this,n("sL3o").h)}}]);