(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[813],{27004:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/challenges/[id]",function(){return a(63723)}])},12167:(e,s,a)=>{"use strict";a.d(s,{y:()=>l});var r=a(85893),t=a(68595);let l=e=>{let{register:s,...a}=e;return(0,r.jsx)("input",{...s,...a,className:(0,t.A)("w-full outline-none font-medium text-sm my-1 p-2 placeholder:text-gray-300 border-1 rounded border-gray-300 focus:ring-0 focus:border-mayuzumi sm:text-sm","".concat(a.className))})}},63723:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>$});var r=a(85893),t=a(9008),l=a.n(t),n=a(11163),i=a(58202),c=a(97696),o=a(78013),d=a(67294),m=a(87536),x=a(52045),u=a(50724),h=a(26805),g=a(68595),p=a(27100);let j=()=>"SECCON{[\\x20-\\x7e]+}",b={beginner:"bg-blue-100 text-blue-800",easy:"bg-indigo-100 text-indigo-800",medium:"bg-green-100 text-green-800","medium-hard":"bg-yellow-100 text-yellow-800",hard:"bg-red-100 text-red-800",other:"bg-gray-200 text-gray-800"},y=e=>{let s=b[e];return void 0===s?b.other:s},f=e=>{let{variant:s,children:a,className:t}=e;return(0,r.jsx)("span",{className:(0,g.A)(y(s),"".concat(t),"inline-flex items-center px-2.5 py-0.5 rounded-md text-sm font-medium"),children:a})},v=e=>{let{challengeID:s}=e,a=(0,x.bg)(s),t=(0,n.useRouter)();return(0,r.jsx)("div",{children:(0,r.jsx)("table",{className:"min-w-full border-separate",children:(0,r.jsx)("tbody",{className:"bg-white",children:a.map((e,s)=>(0,r.jsx)("tr",{children:(0,r.jsxs)("td",{onClick:async()=>{await t.push("/teams/".concat(null==e?void 0:e.id))},className:"cursor-pointer whitespace-nowrap rounded border-gray-200 bg-gray-100 p-4 text-sm font-medium text-gray-900 transition-colors duration-100 ease-in-out hover:bg-gray-200/80",children:[(0,r.jsxs)("span",{className:"pr-2 font-bold",children:[s+1,"."]}),(0,r.jsx)("span",{children:null==e?void 0:e.name})]})},s))})})})};var N=a(12167),w=a(89754),T=a(93179),k=a(34441),F=a(47896);let C=e=>{let{children:s}=e;return(0,r.jsx)(w.U,{rehypePlugins:[F.Z],className:"prose prose-blue text-base prose-p:break-words",components:{code(e){let{node:s,inline:a,className:t,children:l,...n}=e,i=/language-(\w+)/.exec(t||"");return!a&&i?(0,r.jsx)(T.Z,{style:k.Z,language:i[1],PreTag:"div",...n,children:String(l).replace(/\n$/,"")}):(0,r.jsx)("code",{className:t,...n,children:l})}},children:s})},_=e=>{var s;let{challenge:a}=e,t=(0,n.useRouter)(),l=(0,p.s)(),{mutate:b}=(0,h.F9)(),{mutate:y}=(0,x.BJ)(),w=(0,x.vq)(a.id),T=(0,u.vK)(),[k,F]=(0,d.useState)(!0),_=j(),{register:O,handleSubmit:P,setError:S,clearErrors:K,formState:{errors:q,isSubmitting:H}}=(0,m.cI)(),E=async e=>{let{id:s}=t.query,a={value:e.value.trim(),challenge_id:Number(s)},r=await l.api.submissions.post({body:a});if(200!==r.status){switch(r.status){case 400:S("global",{type:"manual",message:"Flag is wrong..."});break;case 409:S("global",{type:"manual",message:"Your team has already answered"});break;case 403:S("global",{type:"manual",message:"CTF is closed"});break;default:S("global",{type:"manual",message:"Something wrong ;( Please contact to admin via Discord server."})}return}setTimeout(async()=>{await b(),await y()},1e4),S("global",{type:"manual",message:"Correct!"})},R=async()=>{F(!1),await t.replace("/challenges","/challenges",{scroll:!1})};return(0,r.jsx)(i.u,{show:k,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0",as:d.Fragment,children:(0,r.jsxs)(c.Vq,{as:"div",className:"relative z-10",open:k,onClose:R,children:[(0,r.jsx)(i.x,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-500/80 backdrop-blur-sm"})}),(0,r.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,r.jsx)("div",{className:"flex min-h-full items-center justify-center text-center",children:(0,r.jsx)(i.x,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,r.jsxs)(c.Vq.Panel,{className:"w-[600px] overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all",children:[(0,r.jsxs)(o.OK.Group,{children:[(0,r.jsx)(o.OK.List,{className:"border-b-2 border-gray-300 px-4",children:["Challenge","".concat(a.solved," Solved")].map(e=>(0,r.jsx)(o.OK,{className:e=>{let{selected:s}=e;return(0,g.A)(s?"text-indigo-900 border-indigo-700 border-b-4":" text-gray-400 border-b-4 hover:text-gray-700 hover:border-gray-300 border-transparent","py-4 px-2 text-base font-medium text-center")},children:e},e))}),(0,r.jsxs)(o.OK.Panels,{className:"flex h-96 w-full flex-col overflow-y-auto px-10 pt-10",children:[(0,r.jsxs)(o.OK.Panel,{children:[(0,r.jsxs)("div",{className:"pb-4",children:[(0,r.jsx)(c.Vq.Title,{as:"h3",className:"break-all text-center font-medium leading-6 text-gray-900",children:(0,r.jsx)("span",{className:"text-4xl",children:a.name})}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:["(",a.point," pt)"]})}),(0,r.jsx)("div",{className:"grid justify-items-center py-2",children:(0,r.jsx)("div",{className:"flex gap-1",children:a.tags.map((e,s)=>(0,r.jsx)(f,{variant:e,children:e},"".concat(e,"-").concat(s)))})})]}),(0,r.jsx)(C,{children:a.description})]}),(0,r.jsx)(o.OK.Panel,{children:(0,r.jsx)(v,{challengeID:a.id})})]})]}),(0,r.jsx)("div",{className:"my-4 border-t-2 border-gray-300 px-8",children:(0,r.jsxs)("form",{onSubmit:P(E),children:[(0,r.jsxs)("div",{className:"p-2",children:[q.global&&(0,r.jsx)(i.u,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:"Correct!"!==q.global.message?(0,r.jsx)("div",{className:"my-2 border-l-4 border-red-400 bg-red-50 p-4",children:(0,r.jsx)("div",{className:"flex",children:(0,r.jsx)("div",{className:"ml-3",children:(0,r.jsx)("p",{className:"text-sm font-medium text-red-700",children:q.global.message})})})}):(0,r.jsx)("div",{className:"my-2 border-l-4 border-green-400 bg-green-50 p-4",children:(0,r.jsx)("div",{className:"flex",children:(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-green-700",children:q.global.message}),T&&(0,r.jsx)("p",{className:"text-xs font-medium text-green-700",children:"(Notice: The game is already over)"})]})})})}),w&&(null===(s=q.global)||void 0===s?void 0:s.message)!=="Correct!"&&(0,r.jsx)("div",{className:"my-2 border-l-4 border-green-400 bg-green-50 p-4",children:(0,r.jsx)("div",{className:"flex",children:(0,r.jsx)("div",{className:"ml-3",children:(0,r.jsx)("p",{className:"text-sm font-medium text-green-700",children:"Already solved"})})})})]}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("label",{className:"block grow text-sm font-medium text-gray-700",htmlFor:"submission-flag",children:"Flag:"}),q.value&&(0,r.jsx)("p",{className:"w-full text-right text-sm text-red-600",id:"submission-flag-error",children:(0,r.jsx)("span",{children:q.value.message})})]}),(0,r.jsx)(N.y,{id:"submission-flag",type:"text",placeholder:_,disabled:H,onClick:()=>K(),register:O("value",{required:"Please input a flag.",pattern:{value:new RegExp("^".concat(_,"$")),message:"Flag format must be '".concat(_,"'")}})}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 py-4",children:[(0,r.jsx)("button",{type:"button",disabled:H,className:"inline-flex w-full justify-center rounded-md border border-transparent bg-red-600 py-2 px-4 text-base font-medium text-white shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:text-sm",onClick:R,children:"Close"}),(0,r.jsx)("button",{type:"submit",disabled:H,className:"inline-flex w-full justify-center rounded-md border border-transparent bg-blue-600 py-2 px-4 text-base font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:text-sm",children:"Submit"})]})]})})]})})})})]})})};var O=a(29264),P=a(81758),S=a(26999),K=a(30211);let q=async()=>{let e=(0,p.s)(),s=await e.api.team_tokens.get();if(200!==s.status&&(0,K.S)(s.body))throw Error(s.body.error);return s.body},H=()=>{let e=(0,S.kq)();return(0,P.ZP)(e?"/api/team_tokens":null,q)},E=()=>{let{data:e}=H(),s=e?e.find(e=>!e.revoked):null;return void 0===s?null:s};var R=a(55346);let V=e=>{let{text:s}=e,[a,t]=(0,d.useState)(!1),l=async()=>{await navigator.clipboard.writeText(s),t(!0),setTimeout(()=>{t(!1)},3e3)};return(0,r.jsx)("button",{type:"button",className:"flex items-center px-1",onClick:l,children:a?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(R.Zlo,{className:"inline-block align-baseline "}),(0,r.jsx)("span",{className:"text-sm ",children:"Copied"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(R.GON,{className:"inline-block align-baseline "}),(0,r.jsx)("span",{className:"text-sm ",children:"Copy"})]})})};var z=a(15581),A=a(20473),I=a(66261);let Z=e=>{let{scoredRound:s,nowRound:a,id:t}=e,l=!!a&&s.round<a.round,n=!!a&&s.round===a.round,i=(0,x.bg)(s.challengeID);return(0,r.jsx)("li",{id:t,children:(0,r.jsxs)("div",{className:"relative pb-8",children:[(0,r.jsx)("span",{className:"absolute top-4 left-4 -ml-px h-full w-0.5 bg-gray-200","aria-hidden":"true"}),(0,r.jsxs)("div",{className:"relative flex items-center space-x-3",children:[(0,r.jsx)("div",{children:s.isScored?(0,r.jsx)("span",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-green-400 ring-8 ring-white",children:(0,r.jsx)(z.bzc,{className:"h-6 w-6",color:"white"})}):l?(0,r.jsx)("span",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-gray-300 ring-8 ring-white",children:(0,r.jsx)(A.xO1,{className:"h-6 w-6",color:"white"})}):n?(0,r.jsx)("span",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-gray-500 ring-8 ring-white",children:(0,r.jsx)(A.utU,{className:"h-5 w-5",color:"white"})}):(0,r.jsx)("span",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-gray-300 ring-8 ring-white",children:(0,r.jsx)(A.lN8,{className:"h-5 w-5",color:"white"})})}),(0,r.jsxs)("div",{className:"flex min-w-0 flex-1 justify-between space-x-4",children:[(0,r.jsxs)("div",{className:"text-sm",children:[s.isScored?(0,r.jsxs)("p",{className:"text-gray-600",children:["Your team scored ",(0,r.jsxs)("span",{className:"font-semibold",children:[s.scoredPoint,"pt"]})]}):l?(0,r.jsx)("p",{className:"text-gray-300",children:"not scored"}):n?(0,r.jsx)("p",{className:"text-gray-500",children:"Current round"}):(0,r.jsx)("p",{className:"text-gray-300",children:"Ungraded"}),(0,r.jsx)("div",{className:"text-xs text-gray-400",children:(0,r.jsxs)("p",{children:[i&&i.length," teams scored"]})})]}),(0,r.jsxs)("div",{className:"whitespace-nowrap text-right text-sm text-gray-500",children:[(0,r.jsxs)("p",{children:["Round: ",s.round]}),(0,r.jsxs)("p",{className:"text-xs",children:["(",s.startTime.format("HH:mm")," - ",s.endTime.format("HH:mm"),")"]})]})]})]})]})})},L=e=>{let{category:s}=e,a=(0,O.W9)(s),t=(0,O.TV)(s),l=(0,O.Ne)(a.length);return(0,r.jsxs)("div",{className:"flow-root",id:"".concat(s,"-scroll-container"),children:[(0,r.jsx)(I.rU,{to:"".concat(s,"-round-").concat(l?l.round:0),smooth:!0,duration:500,offset:-150,containerId:"".concat(s,"-scroll-container"),className:"group grid grid-cols-1 text-gray-500 hover:cursor-pointer hover:text-gray-800",children:(0,r.jsxs)("div",{className:"flex justify-end pt-5 pb-10",children:[(0,r.jsxs)("div",{className:"grow",children:[(0,r.jsxs)("h2",{className:"text-xl",children:[s," ",(0,r.jsxs)("span",{className:"text-lg font-bold",children:["(",t," pt)"]})]}),l&&(0,r.jsxs)("p",{className:"text-xs",children:["Current round: ",l.round," (",l.startTime.format("HH:mm")," - ",l.endTime.format("HH:mm"),")"]})]}),(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-blue-600 ring-8 ring-white group-hover:animate-bounce group-hover:bg-blue-800",children:(0,r.jsx)(z.cuw,{className:"h-6 w-6",color:"white"})})})]})}),(0,r.jsx)("ul",{role:"list",className:"-mb-8",children:l&&a.map((e,a)=>(0,r.jsx)(Z,{scoredRound:e,nowRound:l,id:"".concat(s,"-round-").concat(e.round)},a))})]})},U=e=>{let{challenge:s}=e,a=(0,n.useRouter)(),t=(0,x.JT)(s.category),l=(0,O.TV)(s.category),m=null!==t?t.length:1,u=(0,O.Ne)(m),h=E(),[p,j]=(0,d.useState)(!0),b=async()=>{j(!1),await a.replace("/challenges","/challenges",{scroll:!1})};return(0,r.jsx)(i.u,{show:p,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0",as:d.Fragment,children:(0,r.jsxs)(c.Vq,{as:"div",className:"relative z-10",open:p,onClose:b,children:[(0,r.jsx)(i.u.Child,{as:d.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-500/80 backdrop-blur-sm"})}),(0,r.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,r.jsx)("div",{className:"flex min-h-full items-center justify-center text-center",children:(0,r.jsx)(i.u.Child,{as:d.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,r.jsxs)(c.Vq.Panel,{className:"w-[600px] overflow-hidden rounded bg-white text-left align-middle shadow-xl transition-all",children:[(0,r.jsxs)(o.OK.Group,{children:[(0,r.jsx)(o.OK.List,{className:"border-b-2 border-gray-300 px-4",children:["Challenge","Timeline"].map(e=>(0,r.jsx)(o.OK,{className:e=>{let{selected:s}=e;return(0,g.A)(s?"text-indigo-900 border-indigo-700 border-b-4":" text-gray-400 border-b-4 hover:text-gray-700 hover:border-gray-300 border-transparent","pt-4 pb-2 px-2 text-base font-medium text-center")},children:e},e))}),(0,r.jsxs)(o.OK.Panels,{className:"flex h-96 w-full flex-col overflow-y-auto px-10 pt-5",id:"".concat(s.category,"-scroll-container"),children:[(0,r.jsxs)(o.OK.Panel,{children:[(0,r.jsxs)("div",{className:"pb-4",children:[(0,r.jsx)(c.Vq.Title,{as:"h3",className:"break-all text-center font-medium leading-6 text-gray-900",children:(0,r.jsx)("span",{className:"text-4xl",children:s.category})}),(0,r.jsx)("div",{className:"flex justify-center",children:u&&(0,r.jsxs)("div",{className:"text-center text-sm text-gray-500",children:[(0,r.jsxs)("p",{children:["Current round: ",(0,r.jsx)("span",{className:"text-base font-semibold",children:u.round})," / ",m]}),(0,r.jsxs)("p",{className:"text-xs",children:["(",u.startTime.format("H:m")," - ",u.endTime.format("HH:mm"),")"]}),(0,r.jsxs)("p",{className:"text-xs font-bold",children:[l," pt"]})]})}),(0,r.jsx)("div",{className:"grid justify-items-center py-2",children:(0,r.jsx)("div",{className:"flex gap-1",children:s.tags.map((e,s)=>(0,r.jsx)(f,{variant:e,children:e},"".concat(e,"-").concat(s)))})})]}),(0,r.jsx)(C,{children:s.description})]}),(0,r.jsx)(o.OK.Panel,{children:(0,r.jsx)(L,{category:s.category})})]})]}),(0,r.jsx)("div",{className:"my-4 border-t-2 border-gray-300 px-8",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-2 py-4",children:[(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)("div",{className:"flex grow items-center",children:h&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"px-2 text-sm",children:"Your team token: "}),(0,r.jsx)("input",{value:h.token,disabled:!0,className:"shrink grow truncate border-b border-gray-900 px-2 text-gray-500"}),(0,r.jsx)(V,{text:h.token})]})})}),(0,r.jsx)("button",{type:"button",className:"inline-flex w-full justify-center rounded-md border border-transparent bg-red-600 py-2 px-4 text-base font-medium text-white shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:text-sm",onClick:b,children:"Close"})]})})]})})})})]})})};var Y=a(1809),D=a(36519),G=a(4943),J=a(6611);let X=()=>{let e=(0,n.useRouter)(),s=parseInt("".concat(e.query.id),10),a=(0,x.Lo)(s);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l(),{children:(0,r.jsxs)("title",{children:[(0,D.Y)()," - Challenge"]})}),(0,r.jsx)(J.default,{}),a&&(a.king_of_the_hill?(0,r.jsx)(U,{challenge:a}):(0,r.jsx)(_,{challenge:a}))]})};X.getLayout=e=>(0,r.jsx)(G.S,{children:(0,r.jsx)(Y.z,{children:e})});let $=X}},e=>{var s=s=>e(e.s=s);e.O(0,[594,509,754,536,696,568,611,888,774,179],()=>s(27004)),_N_E=e.O()}]);